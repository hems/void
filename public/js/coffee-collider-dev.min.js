!function(t){"use strict";var e=function(t,i){e.modules||(e.modules={},e.payloads={}),e.payloads[t]=i,e.modules[t]=null},i=function(t,n){n=s(t,n);var r=e.modules[n];if(!r){r=e.payloads[n];var a={},u={id:n,exports:a},o=function(t){return i(n,t)},h=null;r?(r(o,a,u),a=h||u.exports):a=-1,e.modules[n]=a,delete e.payloads[n]}return r=e.modules[n]=a||r},s=function(t,e){if("."===e.charAt(0)){var i=t.split("/").slice(0,-1).join("/");e=i+"/"+e;for(var s;-1!==e.indexOf(".")&&s!==e;)s=e,e=e.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return e};"function"==typeof require&&(t.require=require);var n=e;n("cc/loader",function(e,i,s){var n=e("./cc");if("undefined"!=typeof document){var r=document.getElementsByTagName("script");if(r&&r.length)for(var a=0;a<r.length;a++){var u=/^(.*\/)coffee-collider(?:-dev)?\.js(\#.*)?$/.exec(r[a].src);if(u){n.rootPath=u[1],n.coffeeColliderPath=u[0],n.coffeeColliderHash=u[2];break}}n.opmode="client",n.context="client",e("./client/client"),t.CoffeeCollider=function(t){return n.createSynthClient(t)},t.CoffeeCollider.version=n.version}else"undefined"!=typeof WorkerLocation?"#socket"===location.hash?(n.opmode="socket",n.context="lang",e("./lang/lang"),n.lang=n.createSynthLang()):(n.opmode="worker",n.context="lang/server",e("./lang/lang"),e("./server/server"),n.lang=n.createSynthLang(),n.server=n.createSynthServer(),n.lang.sendToServer=n.server.recvFromLang.bind(n.server),n.server.sendToLang=n.lang.recvFromServer.bind(n.lang),n.server.connect()):"undefined"!=typeof t.GLOBAL&&(n.global.CoffeeCollider=function(){return n.opmode="nodejs",n.context="client/lang/server",e("./client/client"),e("./lang/lang"),e("./server/server"),n.client=n.createSynthClient({nodejs:!0}),n.lang=n.createSynthLang(),n.server=n.createSynthServer(),n.client.impl.sendToLang=n.lang.recvFromClient.bind(n.lang),n.client.impl.sendToLangWithTransferable=n.lang.recvFromClient.bind(n.lang),n.lang.sendToServer=n.server.recvFromLang.bind(n.server),n.server.sendToLang=n.lang.recvFromServer.bind(n.lang),n.lang.sendToClient=n.client.impl.recvFromLang.bind(n.client.impl),n.lang.sendToClientWithTransferable=n.client.impl.recvFromLang.bind(n.client.impl),n.server.connect(),n.client},n.global.SocketSynthServer=function(t){return n.opmode="socket",n.context="server",e("./server/server"),n.server=n.createSynthServer(),n.server.exports.createServer(t)},n.global.version=n.version,s.exports=n.global)}),n("cc/cc",function(t,e,i){i.exports={version:"0.3.0",global:{},Object:function(){},ugen:{specs:{}},unit:{specs:{}},deprecate:{}}}),n("cc/client/client",function(e,i,s){var n=e("../cc"),r=e("../common/emitter"),a=e("../common/pack").unpack,u={},o=[].slice,h=function(){function t(t){t=t||{},this.version=n.version,this.impl=t.socket?n.createSynthClientSocketImpl(this,t):t.nodejs?n.createSynthClientNodeJSImpl(this,t):n.createSynthClientWorkerImpl(this,t),this.sampleRate=this.impl.sampleRate,this.channels=this.impl.channels}return t.prototype.play=function(){return this.impl.play.apply(this.impl,arguments),this},t.prototype.pause=function(){return this.impl.pause.apply(this.impl,arguments),this},t.prototype.reset=function(){return this.impl.reset.apply(this.impl,arguments),this},t.prototype.execute=function(){return this.impl.execute.apply(this.impl,arguments),this},t.prototype.run=function(){return this.impl.run.apply(this.impl,arguments),this},t.prototype.compile=function(){return this.impl.compile.apply(this.impl,arguments)},t.prototype.getStream=function(){return this.impl.getStream.apply(this.impl,arguments)},t.prototype.getWebAudioComponents=function(){return this.impl.getWebAudioComponents.apply(this.impl,arguments)},t.prototype.load=function(){return this.impl.load.apply(this.impl,arguments),this},t.prototype.send=function(){return this.impl.send.apply(this.impl,arguments),this},t.prototype.isPlaying=function(){return this.impl.isPlaying},t.prototype.getListeners=function(){return this.impl.getListeners.apply(this.impl,arguments)},t.prototype.hasListeners=function(){return this.impl.hasListeners.apply(this.impl,arguments)},t.prototype.on=function(){return this.impl.on.apply(this.impl,arguments),this},t.prototype.once=function(){return this.impl.once.apply(this.impl,arguments),this},t.prototype.off=function(){return this.impl.off.apply(this.impl,arguments),this},t}(),c=function(){function e(t,e){r.mixin(this),this.compiler=n.createCompiler("coffee"),this.isPlaying=!1,this.execId=0,this.execCallbacks={},this.sampleRate=44100,this.channels=2,this.api=n.createAudioAPI(this,e),this.sampleRate=this.api.sampleRate,this.channels=this.api.channels,this.api.strmLength&&(this.strmLength=this.api.strmLength),this.strm=new Float32Array(this.strmLength*this.channels),this.clear=new Float32Array(this.strmLength*this.channels),this.strmList=new Array(8),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.syncCount=0,this.speaker=e.speaker!==!1,this.api.init();var i=new Uint8Array(20);if("undefined"!=typeof window&&e.mouse!==!1){var s=new Float32Array(i.buffer);window.addEventListener("mousemove",function(t){s[2]=t.pageX/window.innerWidth,s[3]=t.pageY/window.innerHeight},!0),window.addEventListener("mousedown",function(){s[4]=1},!0),window.addEventListener("mouseup",function(){s[4]=0},!0)}this.syncItems=i,this.syncItemsUInt32=new Uint32Array(i.buffer),this.pendingExecution=[]}return e.prototype.play=function(){this.isPlaying||(this.isPlaying=!0,this.sendToLang(["/play"]),this.api&&this.api.play())},e.prototype._played=function(t){var e,i=this.strm;for(e=i.length;e--;)i[e]=0;this.strmList.splice(0),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.syncCount=t,this.emit("play")},e.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,this.sendToLang(["/pause"]))},e.prototype._paused=function(){this.api&&this.api.pause(),this.emit("pause")},e.prototype.reset=function(){this.execId=0,this.execCallbacks={};var t,e=this.strm;for(t=e.length;t--;)e[t]=0;this.strmList.splice(0),this.strmListReadIndex=0,this.strmListWriteIndex=0,this.sendToLang(["/reset"]),this.emit("reset")},e.prototype.execute=function(t){var e,i=arguments;if("string"!=typeof t)throw new Error("cc.execute requires a code, but got: "+typeof t);if(this.pendingExecution)return void this.pendingExecution.push(o.apply(i));var s,n,r=1;s="boolean"==typeof i[r]?i[r++]:!1,n="function"==typeof i[r]?i[r++]:null,e="object"==typeof i[r]?i[r++]:{},e.lang&&"js"===e.lang||(t=this.compiler.compile(t.trim())),n&&(this.execCallbacks[this.execId]=n),this.sendToLang(["/execute",this.execId,t,s,!!n]),this.execId+=1},e.prototype.run=function(){this.isPlaying||this.play(),this.execute.apply(this,arguments)},e.prototype.compile=function(t){if("string"!=typeof t)throw new Error("cc.execute requires a code, but got: "+typeof t);return this.compiler.compile(t.trim())},e.prototype.getStream=function(){var t=this.strm,e=this.strmLength,i=4*e;return{getChannelData:function(s){if(0===s)return new Float32Array(t.buffer,0,e);if(1===s)return new Float32Array(t.buffer,i);throw new Error("bad channel")}}},e.prototype.getWebAudioComponents=function(){return this.api&&"Web Audio API"===this.api.type?[this.api.context,this.api.jsNode]:[]},e.prototype.load=function(e,i){if("function"!=typeof i)throw new Error("cc#load requires a callback function.");var s=!1;Array.isArray(e)||(e=[e],s=!0);var r=[],a=function(e){var u=e.shift();if("string"!=typeof u)return s&&(r=r[0]),i(r);if("nodejs"===n.opmode){var o=t.require("fs");r.push(o.existsSync(u)?o.readFileSync(u,"utf-8"):null),a(e)}else{var h=n.createXMLHttpRequest();h.open("GET",u),h.onreadystatechange=function(){4===h.readyState&&(r.push(200===h.status?h.response:null),a(e))},h.send()}};a(e)},e.prototype.send=function(){this.sendToLang(["/send",o.call(arguments)])},e.prototype.process=function(){var t;this.strmListReadIndex<this.strmListWriteIndex?(t=this.strmList[7&this.strmListReadIndex],this.strmListReadIndex+=1,this.strm.set(t)):this.strm.set(this.clear),this.syncItemsUInt32[1]=++this.syncCount,this.sendToLang(this.syncItems)},e.prototype.sendToLang=function(t){this.lang&&this.lang.postMessage(t)},e.prototype.sendToLangWithTransferable=function(t){this.lang&&this.lang.postMessage(t,[t.buffer])},e.prototype.recvFromLang=function(t){if(t instanceof Float32Array)this.strmList[7&this.strmListWriteIndex]=t,this.strmListWriteIndex+=1;else{var e=u[t[0]];if(!e)throw new Error("Unknown command: "+t[0]);e.call(this,t)}},e.prototype.readAudioFile=function(t,e){var i=this.api;if(i){if(!i.decodeAudioFile)return void e("Audio decoding not supported",null);var s=n.createXMLHttpRequest();s.open("GET",t),s.responseType="arraybuffer",s.onreadystatechange=function(){4===s.readyState&&(200===s.status&&s.response?i.decodeAudioFile(s.response,function(t,i){e(t,i)}):e("error",null))},s.send()}},e}();u["/connected"]=function(t){var e=t[3];e&&e.forEach(function(t){n.global[t]=!0}),this.sendToLang(["/init",this.sampleRate,this.channels,this.strmLength]),this.emit("connected");var i,s;if(this.pendingExecution){var r=this.execute,a=this.pendingExecution;for(this.pendingExecution=null,i=0,s=a.length;s>i;++i)r.apply(this,a[i])}},u["/played"]=function(t){var e=t[1];this._played(e)},u["/paused"]=function(t){var e=t[1];this._paused(e)},u["/executed"]=function(t){var e=t[1],i=t[2],s=this.execCallbacks[e];s&&(s(a(i)),delete this.execCallbacks[e])},u["/buffer/request"]=function(t){var e=this,i=t[2];this.readAudioFile(t[1],function(t,s){if(!t){var n=new Uint8Array(16+4*s.samples.length),r=new Uint16Array(n.buffer),a=new Uint32Array(n.buffer),u=new Float32Array(n.buffer);r[0]=1,r[1]=i,r[3]=s.channels,a[2]=s.sampleRate,a[3]=s.frames,u.set(s.samples,4),e.sendToLangWithTransferable(n)}})},u["/socket/sendToClient"]=function(t){this.emit("message",t[1])},u["/send"]=function(t){var e=t[1];this.emit.apply(this,e)},u["/console/log"]=function(t){console.log.apply(console,a(t[1]))},n.SynthClientImpl=c,n.createSynthClient=function(t){return new h(t)},n.createSynthClientImpl=function(t,e){return new c(t,e)},e("../common/browser"),e("../common/audioapi"),e("./compiler"),e("./client-worker"),e("./client-nodejs"),e("./client-socket"),s.exports={SynthClient:h,SynthClientImpl:c}}),n("cc/common/emitter",function(t,e,i){var s=function(){function t(t){this.__context=t||this,this.__callbacks={}}return t.prototype.getListeners=function(t){return this.__callbacks[t]||(this.__callbacks[t]=[])},t.prototype.hasListeners=function(t){return this.getListeners(t).length>0},t.prototype.on=function(t,e){var i=this.getListeners(t);return-1===i.indexOf(e)&&i.push(e),this},t.prototype.once=function(t,e){function i(){s.off(t,i),e.apply(s.__context,arguments)}var s=this;return i.callback=e,this.on(t,i),this},t.prototype.off=function(t,e){if(0===arguments.length)return this.__callbacks={},this;var i=this.getListeners(t);if(1===arguments.length)return i.splice(0),this;var s=i.indexOf(e);if(-1===s)for(var n=0,r=i.length;r>n;++n)if(i[n].callback===e){s=n;break}return-1!==s&&i.splice(s,1),this},t.prototype.emit=function(t){for(var e=Array.prototype.slice.call(arguments,1),i=this.getListeners(t).slice(0),s=0,n=i.length;n>s;++s)i[s].apply(this.__context,e);return this},t}(),n=function(t){return["getListeners","hasListeners","on","once","off","emit"].forEach(function(e){t[e]||(t[e]=s.prototype[e])}),s.call(t),t};i.exports={Emitter:s,mixin:n}}),n("cc/common/pack",function(t,e,i){var s=function(){var t=function(e,i){if(!e)return e;if("function"==typeof e)return{klassName:"Function"};if(-1!==i.indexOf(e))return{klassName:"Circular"};var s;if("object"==typeof e){if(e.buffer instanceof ArrayBuffer)return e;i.push(e),Array.isArray(e)?s=e.filter(function(t){return"function"!=typeof t}).map(function(e){return t(e,i)}):(s={},Object.keys(e).forEach(function(n){"_"!==n.charAt(0)&&"function"!=typeof e[n]&&(s[n]=t(e[n],i))})),i.pop()}else s=e;return s};return function(e){return t(e,[])}}(),n=function(){var t=function(e){if(!e)return e;var i;if("object"==typeof e){if(e.buffer instanceof ArrayBuffer)return e;Array.isArray(e)?i=e.map(function(e){return t(e)}):(e.klassName&&/^[_a-z$][_a-z0-9$]*$/i.test(e.klassName)?(i=eval.call(null,"new (function "+e.klassName+"(){})"),delete e.klassName):i={},Object.keys(e).forEach(function(s){i[s]=t(e[s])}))}else i=e;return i};return function(e){return t(e)}}();i.exports={pack:s,unpack:n}}),n("cc/common/browser",function(t,e,i){var s=t("../cc");s.createWebWorker=function(t){return new Worker(t)},s.createWebSocket=function(t){return new WebSocket(t)},s.createXMLHttpRequest=function(){return new XMLHttpRequest},i.exports={}}),n("cc/common/audioapi",function(t,e,i){var s=t("../cc");t("./audioapi-webaudio"),t("./audioapi-flashfallback"),t("./audioapi-nodeaudio"),s.createAudioAPI=function(t,e){return s.createWebAudioAPI(t,e)||s.createFlashAudioAPI(t,e)||s.createNodeAudioAPI(t,e)},i.exports={}}),n("cc/common/audioapi-webaudio",function(e,i,s){var n,r=e("../cc");if("undefined"!=typeof document){var a=t.AudioContext||t.webkitAudioContext;a&&(n=function(){function t(t,e){this.sys=t,this.context=e.AudioContext||new a,this.sampleRate=this.context.sampleRate,this.channels=2,this.type="Web Audio API",this.delegate=!!e.AudioContext,this.jsNode=null}return t.prototype.init=function(){},t.prototype.play=function(){var t,e,i=this.sys,s=i.strm,n=i.strmLength,r=4*n,a=new Float32Array(s.buffer,0,n),u=new Float32Array(s.buffer,r);e=this.context.createScriptProcessor(n,2,this.channels),i.speaker?i.sampleRate===this.sampleRate&&(t=function(t){var e=t.outputBuffer;i.process(),e.getChannelData(0).set(a),e.getChannelData(1).set(u)}):t=function(){i.process()},e.onaudioprocess=t,this.delegate||e.connect(this.context.destination),this.jsNode=e},t.prototype.pause=function(){this.jsNode&&(this.delegate||this.jsNode.disconnect(),this.jsNode.onaudioprocess=null,this.jsNode=null)},t.prototype.decodeAudioFile=function(t,e){this.context.decodeAudioData(t,function(t){var i,s,n=t.length,r=t.numberOfChannels,a=n*r,u=new Float32Array(a),o=0,h=new Array(r);for(s=0;r>s;++s)h[s]=t.getChannelData(s);for(i=0;n>i;++i)for(s=0;r>s;++s)u[o++]=h[s][i];e(null,{sampleRate:t.sampleRate,channels:t.numberOfChannels,frames:t.length,samples:u})},function(t){e(t)})},t}())}r.createWebAudioAPI=function(t,e){return n?new n(t,e):void 0},s.exports={}}),n("cc/common/audioapi-flashfallback",function(t,e,i){var s,n=t("../cc");"undefined"!=typeof document&&(s=function(){function t(t){this.sys=t,this.sampleRate=44100,this.channels=2,this.strmLength=Math.max(2048,t.strmLength),this.type="Fallback"}t.prototype.init=function(){},t.prototype.play=function(){e.play&&(this.play=e.play,this.play())},t.prototype.pause=function(){e.pause&&(this.pause=e.pause,this.pause())};var e={};return window.addEventListener("load",function(){var t=n.rootPath+"coffee-collider-fallback.swf",i=t+"?"+Date.now(),s="coffee-collider-fallback",r=document.createElement("div");r.style.display="inline",r.width=1,r.height=1,r.innerHTML='<object id="'+s+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1"><param name="movie" value="'+i+'"/><param name="bgcolor" value="#FFFFFF"/><param name="quality" value="high"/><param name="allowScriptAccess" value="always"/></object>',document.body.appendChild(r),window.coffeecollider_flashfallback_init=function(){var t=document.getElementById(s),i=0;e.play=function(){if(0===i){var e=this.sys,s=e.strmLength/e.sampleRate*1e3,n=0,r=Date.now(),a=new Array(e.strmLength*e.channels),u=a.length,o=function(){if(!(n>Date.now()-r)){e.process();for(var i,o=e.strm,h=0;u>h;++h)i=16384*o[h]+32768|0,i=Math.max(16384,Math.min(i,49152)),a[h]=String.fromCharCode(i);t.writeAudio(a.join("")),n+=s}};i=setInterval(o,.8*s),t.play()}},e.pause=function(){0!==i&&(t.pause(),clearInterval(i),i=0)}}}),t}()),n.createFlashAudioAPI=function(t,e){return s?new s(t,e):void 0},i.exports={}}),n("cc/common/audioapi-nodeaudio",function(e,i,s){var n,r=e("../cc");"undefined"!=typeof t.GLOBAL&&(n=function(){function e(t){this.sys=t,this.sampleRate=44100,this.channels=2,this.node=null,this.isPlaying=!1}var i=t.require("stream").Readable,s=t.require("speaker");return i||(i=t.require("readable-stream/readable")),e.prototype.init=function(){},e.prototype.play=function(){var t=this.sys;this.isPlaying=!0,this.node=new i,this.node._read=function(e){var i,s,n,r=t._strm,a=t.strmLength,u=new Buffer(e),o=0;for(e=(e>>2)/t.strmLength;e--;)for(t._process(),s=0,n=a;a>s;++s,++n)i=Math.max(-32768,Math.min(32768*r[s]|0,32767)),u.writeInt16LE(i,o),o+=2,i=Math.max(-32768,Math.min(32768*r[n]|0,32767)),u.writeInt16LE(i,o),o+=2;this.push(u)},this.node.pipe(new s({sampleRate:this.sampleRate}))},e.prototype.pause=function(){this.node&&process.nextTick(this.node.emit.bind(this.node,"end")),this.node=null,this.isPlaying=!1},e}()),r.createNodeAudioAPI=function(t,e){return n?new n(t,e):void 0},s.exports={}}),n("cc/client/compiler",function(e,i,s){var n=t.CoffeeScript||t.require("coffee-script"),r=e("../cc"),a=e("../common/numericstring"),u=[].push,o=0,h=1,c={},p=function(t){return!!t&&("."===t[o]||"@"===t[o])},l=function(t){return!!t&&":"===t[o]},f=function(t,e){var i,s=0,n=t.length;for(i=e;n>i;++i)switch(t[i][o]){case"PARAM_START":s+=1;break;case"PARAM_END":if(s-=1,0===s)return i}return-1},_=function(t,e){var i,s=t.length;for(i=e;s>i;++i)switch(t[i][o]){case"PARAM_START":case"->":case"=>":return i;case"TERMINATOR":case"[":case"{":case"(":case"CALL_START":case"INDEX_START":return-1}return-1},d=function(t){return t.tokens.slice(t.begin,t.end+1).map(function(e,i){return"STRING"===e[o]&&"'"===e[h].charAt(0)?'"'+e[h].substr(1,e[h].length-2)+'"':"IDENTIFIER"===e[o]&&":"===t.tokens[t.begin+i+1][o]?'"'+e[h]+'"':e[h]}).join("")},m=function(t){var e,i,s="",n=t.length;for(e=0;n>e;++e){if(i=t[e][o],"+"===i||"-"===i)switch(s){case"IDENTIFIER":case"NUMBER":case"STRING":case"BOOL":case"REGEX":case"NULL":case"UNDEFINED":case"]":case"}":case")":case"CALL_END":case"INDEX_END":t[e][o]="MATH";break;default:t[e][o]="UNARY"}s=i}return t.cc_plusminus=!0,t},y=function(t){var e,i,s=t.length;for(e=0;s>e;++e)i=t[e][h],("+"===i||"-"===i)&&(t[e][o]=i);return t},g=function(t,e){for(var i,s=0,n=0,r=e;e>1;){switch(t[e][o]){case"(":case"[":case"{":case"PARAM_START":case"CALL_START":case"INDEX_START":s-=1;break;case"}":case"]":case")":case"PARAM_END":case"CALL_END":case"INDEX_END":s+=1;break;case"OUTDENT":n+=1;break;case"INDENT":n-=1}switch(t[e-1][o]){case"PARAM_END":case"CALL_END":case"INDEX_END":case".":case"@":e-=1;continue}switch(t[e][o]){case"(":case"[":case"{":case"PARAM_START":case"IDENTIFIER":case"NUMBER":case"BOOL":case"STRING":case"REGEX":case"UNDEFINED":case"NULL":case"@":case"THIS":case"SUPER":case"->":case"=>":if(0===s&&0===n){for(;(i=t[e-1])&&"UNARY"===i[o];)e-=1;return{tokens:t,begin:e,end:r}}}e-=1}return{tokens:t,begin:0,end:r}},v=function(t,e){var i,s=0,n=0,r=e,a=t.length-2;if(t[e]&&"@"===t[e][o]&&"IDENTIFIER"!==t[e+1][o])return{tokens:t,begin:e,end:e};for(;a>e;){switch(i=t[e][o]){case"(":case"[":case"{":case"PARAM_START":s+=1;break;case"}":case"]":case")":case"PARAM_END":case"CALL_END":case"INDEX_END":s-=1;break;case"INDENT":n+=1;break;case"OUTDENT":n-=1}switch(t[e+1][o]){case"CALL_START":case"INDEX_START":s+=1,e+=1;continue;case".":case"@":case"ELSE":e+=1;continue}switch(i){case"}":case"]":case")":case"CALL_END":case"INDEX_END":case"IDENTIFIER":case"NUMBER":case"BOOL":case"STRING":case"REGEX":case"UNDEFINED":case"NULL":case"OUTDENT":if(0===s&&0===n)return{tokens:t,begin:r,end:e}}e+=1}return{tokens:t,begin:r,end:Math.max(0,t.length-2)}},b={},w=function(t){var e,i,s,n,r=[{declared:[],args:[],local:[],outer:[]}],a=0,u=[],c=[],p=t.length-1;for(r.setVariables=b.setVariables(r),n=0;p>n;++n)switch(s=t[n],r.peek=r[r.length-1],s[o]){case"PARAM_START":u=b.getInfoOfArguments(t,n),n=u.end+1,c=u.vars,u=u.args;case"->":case"=>":e={declared:r.peek.declared.concat(r.peek.local).concat(r.peek.args),args:c.splice(0),local:[],outer:[],indent:a},t[n].cc_funcParams={args:u.splice(0),local:e.local,outer:e.outer},s.cc_funcRef=t[n],r.push(e);break;case"FOR":do i=v(t,n+1),b.getVariables(i).forEach(r.setVariables),n=i.end+1;while(p>n&&","===t[n][o]);break;case"INDENT":a+=1;break;case"OUTDENT":a-=1,r.peek.indent===a&&r.pop();break;case"[":i=v(t,n),b.getVariables(i).forEach(r.setVariables);break;case"IDENTIFIER":if("CALL_START"===t[n+1][o]||/^[A-Z]/.test(s[h]))break;i=v(t,n),(i.begin===i.end&&":"!==t[i.end+1][o]||"."===t[i.begin+1][o])&&b.getVariables(i).forEach(r.setVariables)}return t.cc_funcParams={local:r[0].local},t};b.setVariables=function(t){var e=["cc","global","console","setInterval","setTimeout","clearInterval","clearTimeout"];return function(i){var s;if(-1===e.indexOf(i)){if(-1===t.peek.declared.indexOf(i))return void(-1===t.peek.args.indexOf(i)&&-1===t.peek.local.indexOf(i)&&t.peek.local.push(i));if(-1===t.peek.outer.indexOf(i))for(t.peek.outer.push(i),s=t.length-2;s>=0;s--){if(-1!==t[s].local.indexOf(i))return;-1===t[s].outer.indexOf(i)&&t[s].outer.push(i)}}}},b.getInfoOfArguments=function(t,e){var i,s,n=e,r=f(t,e),a=[],u=[];for(i=n+1;r>i;++i)s=v(t,i),u.push(d(s)),a=b.getVariables(s,a),i+=s.end-s.begin+1,"="===t[i][o]?(s=v(t,i+1),u.push(d(s)),i+=s.end-s.begin+1):u.push(null),","!==t[i][o]&&(i+=1);return{vars:a,args:u,end:r}},b.getVariables=function(t,e){var i,s,n,r=t.tokens;if(e=e||[],"["===r[t.begin][o]&&"]"===r[t.end][o])for(s=t.end,i=t.begin+1;s>i;++i)n=v(r,i),e=b.getVariables(n,e),i+=n.end-n.begin+1,","!==r[i][o]&&(i+=1);else p(r[t.begin-1])||/^[a-z][a-zA-Z0-9_$]*$/.test(r[t.begin][h])&&e.push(r[t.begin][h]);return e};var k=function(t){var e,i,s,n,r=t.length;for(n=0;r>n;++n)e=t[n],"STRING"===e[o]&&'"'===e[h].charAt(0)&&(i=e[h].substr(1,e[h].length-2),s=a.timevalue(i),"number"!=typeof s&&(s=a.notevalue(i)),"number"==typeof s&&(e[o]="NUMBER",e[h]=s.toString()));return t},N=function(t){var e,i,s,n;for(e=t.length-1;e>0;e--)i=t[e],"MATH"===i[o]&&"+"!==i[h]&&"-"!==i[h]&&(s=g(t,e),n=v(t,e),t.splice(n.end+1,0,[")",")",c]),t.splice(s.begin,0,["(","(",c]));return t},x=function(t){var e,i,s,n;for(e=t.length-1;e>=0;e--)if(i=t[e],"UNARY"===i[o]){switch(i[h]){case"+":s="__plus__";break;case"-":s="__minus__";break;default:continue}n=v(t,e),t.splice(n.end+1,0,[".",".",c],["IDENTIFIER",s,c],["CALL_START","(",c],["CALL_END",")",c]),t.splice(e,1)}return t},A=function(t){return t.replace(/([+\-*\/%])(W|S|C|F|T|X|WRAP|SHORT|CLIP|FOLD|TABLE|FLAT)\1/g,function(t,e,i){return e+' "#!'+i.charAt(0)+'" '+e})},M=function(t){var e,i,s,n;for(e=t.length-1;e>=0;e--)i=t[e],"MATH"===i[o]&&(s=t[e+1],n=t[e+2],i[h]===n[h]&&/^"#![WSCFTX]"$/.test(s[h])&&(i.adverb=s[h].charAt(3),t.splice(e+1,2)));return t},S=function(t){var e,i,s,n,r;for(e=t.length-1;e>=0;e--)if(i=t[e],"MATH"===i[o]){switch(i[h]){case"+":s="__add__";break;case"-":s="__sub__";break;case"*":s="__mul__";break;case"/":s="__div__";break;case"%":s="__mod__";break;default:throw new Error("Unknown MATH:"+i[h])}n=i.adverb,r=v(t,e),t.splice(e,1,[".",".",c],["IDENTIFIER",s,c],["CALL_START","(",c]),n?(n={W:"WRAP",S:"SHORT",C:"CLIP",F:"FOLD",T:"TABLE",X:"FLAT"}[n],t.splice(r.end+3,0,[",",",",c],["IDENTIFIER",n,c],["CALL_END",")",c])):t.splice(r.end+3,0,["CALL_END",")",c])}return t},R=function(t){var e,i,s,n,r,a,u;for(e=t.length-1;e>=0;e--)if(s=t[e],"COMPOUND_ASSIGN"===s[o]){switch(s[h]){case"+=":n="__add__";break;case"-=":n="__sub__";break;case"*=":n="__mul__";break;case"/=":n="__div__";break;case"%=":n="__mod__";break;default:throw new Error("Unknown COMPOUND_ASSIGN:"+s[h])}for(r=g(t,e),a=v(t,e),t.splice(e,1,["=","=",c],[".",".",c],["IDENTIFIER",n,c],["CALL_START","(",c]),t.splice(a.end+4,0,["CALL_END",")",c]),u=[e+1,0],i=r.begin;e>i;++i)u.push(t[i]);t.splice.apply(t,u)}return t},P={},T=function(t){var e,i,s;for(e=t.length-1;e>=0;e--)if("SynthDef"===t[e][h]&&!p(t[e-1])){for(i=e;i<t.length&&"CALL_START"!==t[i][o];)i+=1;i=_(t,i+1),-1!==i&&(s=t[i].cc_funcRef.cc_funcParams.args,s.length&&P.replaceDefaultArguments(t,i,s),i=v(t,i).end+1,P.insertSynthDefArgumentsToAfterFunction(t,i,s))}return t};P.replaceDefaultArguments=function(t,e,i){var s,n,r,a=i.length;for(n=f(t,e)-e+1,r=[e,n],r.push(["PARAM_START","(",c]),s=0;a>s;s+=2)s&&r.push([",",",",c]),r.push(["IDENTIFIER",i[s],c]);r.push(["PARAM_END",")",c]),t.splice.apply(t,r)},P.insertSynthDefArgumentsToAfterFunction=function(t,e,i){var s,n,r=i.length;for(n=[e,0],n.push([",",",",c],["[","[",c]),s=0;r>s;++s)s&&n.push([",",",",c]),n.push(["STRING","'"+(i[s]||0)+"'",c]);n.push(["]","]",c]),t.splice.apply(t,n)};var I={},L=function(t){var e,i,s,n;for(e=t.length-1;e>=0;e--)if(i=t[e],"IDENTIFIER"===i[o]&&"CALL_START"===t[e+1][o]){switch(i[h]){case"Task":n=!1;break;case"syncblock":n=!0;break;default:continue}s=_(t,e+2),-1!==s&&I.makeSyncBlock(v(t,s),n)}return t};I.makeSyncBlock=function(t,e){var i,s,r,a=t.tokens,o=a.splice(t.begin,t.end-t.begin+1),h=a.splice(t.begin),c=o[0].cc_funcRef;i=c.cc_funcParams.local,s=c.cc_funcParams.outer,r=c.cc_funcParams.args.filter(function(t,e){return!(1&e)}).map(function(t){var e=n.tokens(t);return e.pop(),e}),r.length&&o.splice(0,f(o,0)+1),o.splice(0,2),o.pop();for(var p=I.createSyncBlock(o,r,i,e),l=p.length;l--;)p[l].cc_segmented=!0;return u.apply(a,p),u.apply(a,h),t},I.createSyncBlock=function(t,e,i,s){var n=[];s||n.push(["IDENTIFIER","syncblock",c],["CALL_START","(",c]),n.push(["->","->",c],["INDENT",2,c]),I.insertLocalVariables(n,i),n.push(["[","[",c],["INDENT",2,c]);for(var r=0;t.length;)r++&&n.push(["TERMINATOR","\n",c]),I.beginOfSegment(n,e),I.insertSegment(n,t),I.endOfSegment(n,e);return n.push(["OUTDENT",2,c],["]","]",c]),n.push(["OUTDENT",2,c]),s||n.push(["CALL_END",")",c]),n},I.insertLocalVariables=function(t,e){if(e&&e.length){for(var i=0,s=e.length;s>i;i++)t.push(["IDENTIFIER",e[i],c],["=","=",c]);t.push(["UNDEFINED","undefined",c],["TERMINATOR","\n",c])}},I.beginOfSegment=function(t,e){if(e&&e.length){t.push(["PARAM_START","(",c]);for(var i=0,s=e.length;s>i;++i)i&&t.push([",",",",c]),u.apply(t,e[i]);t.push(["PARAM_END",")",c])}t.push(["->","->",c],["INDENT",2,c])},I.splitIdentifiers=["Task","syncblock","wait"],I.insertSegment=function(t,e){for(;e.length;){var i=I.fetchLine(e);u.apply(t,i);for(var s=0,n=i.length;n>s;++s){var r=i[s];if("IDENTIFIER"===r[o]&&-1!==I.splitIdentifiers.indexOf(r[h]))return}}},I.endOfSegment=function(t){t.push(["OUTDENT",2,c])},I.fetchLine=function(t){for(var e=0,i=0,s=t.length;s>i;++i)switch(t[i][o]){case"(":case"{":case"[":case"CALL_START":case"PARAM_START":case"INDEX_START":e+=1;break;case"]":case"}":case")":case"CALL_END":case"PARAM_END":case"INDEX_END":e-=1;break;case"TERMINATOR":if(0===e)return t.splice(0,i+1);break;case"INDENT":e+=1;break;case"OUTDENT":if(0===e)return t.splice(0,i);e-=1}return t.splice(0)};var O=function(t){var e,i;for(e=t.length-1;e>=0;e--)i=t[e],"IDENTIFIER"===i[o]&&/^\$[a-z][a-zA-Z0-9_]*$/.test(i[h])&&(l(t[e+1])||p(t[e-1])||t.splice(e,1,["IDENTIFIER","global",c],[".",".",c],["IDENTIFIER",i[h].substr(1),c]));return t},C=function(t){var e,i;for(e=t.length-1;e>=0;e--)i=t[e],"IDENTIFIER"===i[o]&&r.global.hasOwnProperty(i[h])&&(l(t[e+1])||p(t[e-1])||t.splice(e,0,["IDENTIFIER","cc",c],[".",".",c]));return t},F=function(t){return t.unshift(["(","(",c],["PARAM_START","(",c],["IDENTIFIER","global",c],[",",",",c],["IDENTIFIER","cc",c],["PARAM_END",")",c],["->","->",c],["INDENT",2,c]),t.push(["OUTDENT",2,c],[")",")",c],[".",".",c],["IDENTIFIER","call",c],["CALL_START","(",c],["IDENTIFIER","cc",c],[".",".",c],["IDENTIFIER","__context__",c],[",",",",c],["THIS","this",c],[".",".",c],["IDENTIFIER","self",c],["LOGIC","||",c],["IDENTIFIER","global",c],[",",",",c],["IDENTIFIER","cc",c],["CALL_END",")",c]),t},E=function(t){var e;return t=A(t),e=n.tokens(t),e.length&&(e=k(e),e=w(e),e=m(e),e=M(e)),e},D=function(){function t(){}return t.prototype.tokens=function(t){var e=E(t);return e.length&&(e=O(e),e=N(e),e=x(e),e=S(e),e=R(e),e=T(e),e=L(e),e=C(e),e=F(e)),e},t.prototype.compile=function(t){return n.nodes(this.tokens(t)).compile({bare:!0}).trim()},t}();r.createCompiler=function(){return new D},s.exports={CoffeeCompiler:D,indexOfParamEnd:f,indexOfFunctionStart:_,formatArgument:d,getPrevOperand:g,getNextOperand:v,detectPlusMinusOperator:m,revertPlusMinusOperator:y,detectFunctionParameters:w,replaceTextBinaryAdverb:A,replaceBinaryOperatorAdverbs:M,replaceNumericString:k,replaceStrictlyPrecedence:N,replaceUnaryOperator:x,replaceBinaryOperator:S,replaceCompoundAssign:R,replaceSynthDefinition:T,replaceSyncBlock:L,replaceGlobalVariables:O,replaceCCVariables:C,wrapWholeCode:F}}),n("cc/common/numericstring",function(t,e,i){var s=t("../cc"),n=function(t){var e,i=null;"~"===t.charAt(0)&&(e=!0,t=t.substr(1));do{if(i=r(t),null!==i)break;if(i=a(t),null!==i)break;if(i=u(t),null!==i)break;if(i=o(t),null!==i)break;if(i=c(t),null!==i)break;if(i=l(t),null!==i)break;i=_(t)}while(!1);return null!==i?e?0===i?0:1/i:i:t},r=function(t){var e=/^(\d+(?:\.\d+)?)hz$/i.exec(t);return e?0===+e[1]?0:1/+e[1]:null},a=function(t){var e=/^(\d+(?:\.\d+)?)(min|sec|m|msec)s?$/i.exec(t);if(e)switch(e[2]){case"min":return 60*+e[1];case"sec":return+e[1];case"msec":case"m":return+e[1]/1e3}return null},u=function(t){var e=0,i=/^(?:([1-9]?[0-9]*):)?(?:([0-9]*):)?([0-9]+)(?:\.(\d{1,3}))?$/.exec(t);return i?(void 0!==i[1]&&void 0===i[2]&&(i[2]=i[1],i[1]=0),e+=3600*(0|i[1]),e+=60*(0|i[2]),e+=0|i[3],e+=(0|((i[4]||"")+"00").substr(0,3))/1e3):null},o=function(t){var e=/^(\d+)samples(?:\/(\d+)hz)?$/i.exec(t);return e?e[1]/(0|e[2]||s.sampleRate):null},h=function(t,e,i){var s=60/t*(4/e),n=1;if(i>=0&&3>=i)s*=[1,1.5,1.75,1.875][i];else{for(var r=1;i>r;++r)n+=Math.pow(.5,r);s*=n}return s},c=function(t){var e=/^bpm([1-9]\d+(?:\.\d+)?)\s*l([1-9]\d*)(\.*)$/i.exec(t);return e?h(+e[1],+e[2],e[3].length):null},p=function(t,e,i,s){var n=480*(4*e+i)+s;return 60/t*(n/480)},l=function(t){var e=/^bpm([1-9]\d+(?:\.\d+)?)\s*(\d+)\.(\d+).(\d{1,3})$/i.exec(t);return e?p(+e[1],+e[2],+e[3],+e[4]):null},f=function(t,e){return 60/t*e/480},_=function(t){var e=/^bpm([1-9]\d+(?:\.\d+)?)\s*(\d+)ticks$/i.exec(t);return e?f(+e[1],+e[2]):null},d=function(t){var e=/^([A-Ga-g])([-+#b])?(\d)$/.exec(t);if(e){var i={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[e[1]]+12*e[3]+12,s=e[2];return"-"===s||"b"===s?i--:("+"===s||"#"===s)&&i++,i}return t};i.exports={hz:r,time:a,hhmmss:u,samples:o,note:c,beat:l,ticks:_,calcNote:h,calcBeat:p,calcTicks:f,timevalue:n,notevalue:d}}),n("cc/client/client-worker",function(t,e,i){var s=t("../cc"),n=t("../common/extend"),r=function(){function t(t,e){s.opmode="worker",this.strmLength=1024,this.bufLength=64,s.SynthClientImpl.call(this,t,e);var i=this;this.lang=s.createWebWorker(s.coffeeColliderPath),this.lang.onmessage=function(t){i.recvFromLang(t.data)}}return n(t,s.SynthClientImpl),t}();s.createSynthClientWorkerImpl=function(t,e){return new r(t,e)},i.exports={}}),n("cc/common/extend",function(t,e,i){var s=function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t};i.exports=s}),n("cc/client/client-nodejs",function(t,e,i){var s=t("../cc"),n=t("../common/extend"),r=function(){function t(t,e){s.opmode="nodejs",this.strmLength=4096,this.bufLength=64,s.SynthClientImpl.call(this,t,e),this.api=null}return n(t,s.SynthClientImpl),t}();s.createSynthClientNodeJSImpl=function(t,e){return new r(t,e)},i.exports={}}),n("cc/client/client-socket",function(t,e,i){var s=t("../cc"),n=t("../common/extend"),r=function(){function t(t,e){s.opmode="socket",this.strmLength=4096,this.bufLength=64,s.SynthClientImpl.call(this,t,e);var i=this;this.lang=s.createWebWorker(s.coffeeColliderPath+"#socket"),this.lang.onmessage=function(t){i.recvFromLang(t.data)},t.socket={open:function(){i.sendToLang(["/socket/open",e.socket])},close:function(){i.sendToLang(["/socket/close"])},send:function(t){i.sendToLang(["/socket/sendToServer",t])}}}return n(t,s.SynthClientImpl),t}();s.createSynthClientSocketImpl=function(t,e){return new r(t,e)},i.exports={}}),n("cc/lang/lang",function(e,i,s){var n=e("./cc"),r=e("../common/pack").pack,a=e("../common/random"),u={},o=function(){function t(){this.klassName="SynthLang",this.sampleRate=0,this.channels=0,this.strmLength=0,this.bufLength=0,this.rootNode=n.createLangRootNode(),this.taskManager=n.createTaskManager(),this.timelineResult=[],this.phase=0,this.random=new a.Random,this.currentTime=0,this.callbacks=[],this.extendCommands(u)
}return t.prototype.sendToClient=function(){throw"SynthLang#sendToClient: should be overridden["+n.opmode+"]"},t.prototype.sendToClientWithTransferable=function(){throw"SynthLang#sendToClientWithTransferable: should be overridden["+n.opmode+"]"},t.prototype.recvFromClient=function(t){if(t){var e=u[t[0]];e&&e.call(this,t)}},t.prototype.sendToServer=function(){throw"SynthLang#sendToServer: should be overridden["+n.opmode+"]"},t.prototype.recvFromServer=function(t){if(t instanceof Float32Array)this.sendToClient(t);else{var e=u[t[0]];if(!e)throw new Error("Unknown command: "+t[0]);e.call(this,t)}},t.prototype.pushToTimeline=function(t){this.timelineResult.push(t)},t.prototype.play=function(t){this.currentTimeIncr=this.bufLength/this.sampleRate*1e3,this.taskManager.start(this.currentTimeIncr),this.sendToServer(t)},t.prototype.pause=function(t){this.sendToServer(t)},t.prototype.reset=function(t){this.currentTime=0,n.resetNode(),n.resetBuiltin(),n.resetMessage(),this.taskManager.reset(),this.sendToServer(t)},t.prototype.requestBuffer=function(t,e){if("string"==typeof t&&"function"==typeof e){var i=this.setCallback(e);this.sendToClient(["/buffer/request",t,i])}},t.prototype.process=function(){throw"SynthLang#process: should be overridden"},t.prototype.extendCommands=function(){},t.prototype.setCallback=function(t){var e=this.callbacks.length;return this.callbacks[e]=t,e},t.prototype.getCallback=function(t){var e=this.callbacks[t];return this.callbacks[t]=null,e},t}();u["/connected"]=function(t){"nodejs"!==n.opmode&&t.push(Object.keys(n.global)),this.sendToClient(t)},u["/init"]=function(t){this.sampleRate=0|t[1],this.channels=0|t[2],this.sendToServer(t)},u["/play"]=function(t){this.play(t)},u["/played"]=function(t){this.sendToClient(t)},u["/pause"]=function(t){this.pause(t)},u["/paused"]=function(t){this.sendToClient(t)},u["/reset"]=function(t){this.reset(t)},u["/process"]=function(){this.process()},u["/execute"]=function(e){var i=e[1],s=e[2],a=e[3],u=e[4];a||this.reset(["/reset"]),n.global!==t&&(t.cc=n.global),t.cc.__context__={version:n.version};var o=eval.call(t,s);u&&this.sendToClient(["/executed",i,r(o)])},u["/buffer/response"]=function(t){var e=t[1],i=t[2],s=this.getCallback(i);s&&s(e)},u["/send"]=function(t){var e=t[1];n.global.Message.emit.apply(n.global.Message,e)},u["/b_get"]=function(t){var e=t[1],i=this.getCallback(e);i&&i(t[2])},u["/b_getn"]=function(t){var e=t[1],i=this.callbacks[e];i&&(i(t.slice(2)),this.callbacks[e]=null)},u[1]=function(t){var e=(t[3]<<8)+t[2],i=this.getCallback(e);i&&i(t)},n.SynthLang=o,n.createSynthLang=function(){switch(n.opmode){case"worker":return n.createWorkerSynthLang();case"nodejs":return n.createNodeJSSynthLang();case"socket":return n.createSocketSynthLang()}throw new Error("A SynthLang is not defined for: "+n.opmode)},e("./array"),e("./boolean"),e("./buffer"),e("./builtin"),e("./bus"),e("./date"),e("./env"),e("./function"),e("./message"),e("./mix"),e("./node"),e("./number"),e("./object"),e("./pattern"),e("./ref"),e("./scale"),e("./string"),e("./syncblock"),e("./synthdef"),e("./task"),e("./ugen"),e("./basic_ugen"),e("../plugins/installer"),e("./lang-worker"),e("./lang-nodejs"),e("./lang-socket"),Object.keys(n.ugen.specs).forEach(function(t){n.ugen.register(t,n.ugen.specs[t])}),n.global.System={},n.global.System.currentTime=function(){return n.lang.currentTime},s.exports={}}),n("cc/lang/cc",function(t,e,i){i.exports=t("../cc")}),n("cc/common/random",function(t,e,i){var s=function(){function t(t){"number"!=typeof t&&(t=Date.now()),t=new Uint32Array([t]),t[0]+=~(t[0]<<15),t[0]^=t[0]>>>10,t[0]+=t[0]<<3,t[0]^=t[0]>>>6,t[0]+=~(t[0]<<11),t[0]^=t[0]>>>16,this.s1=new Uint32Array([1243598713^t[0]]),this.s2=new Uint32Array([3093459404^t[0]]),this.s3=new Uint32Array([1821928721^t[0]]),this.s1[0]<2&&(this.s1[0]=1243598713),this.s2[0]<8&&(this.s2[0]=3093459404),this.s3[0]<16&&(this.s3[0]=1821928721)}t.prototype.trand=function(){return this.s1[0]=(4294967294&this.s1[0])<<12^(this.s1[0]<<13^this.s1[0])>>>19,this.s2[0]=(4294967288&this.s2[0])<<4^(this.s2[0]<<2^this.s2[0])>>>25,this.s3[0]=(4294967280&this.s3[0])<<17^(this.s3[0]<<3^this.s3[0])>>>11,this.s1[0]^this.s2[0]^this.s3[0]};var e=new Uint32Array(1),i=new Float32Array(e.buffer);return t.prototype.next=function(){return e[0]=1065353216|this.trand()>>>9,i[0]-1},t}();i.exports={Random:s}}),n("cc/lang/array",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/ops"),a=t("./utils"),u=[].slice;n.defineProperty(Array.prototype,"copy",function(){return this.slice()}),n.defineProperty(Array.prototype,"clone",n(function(t){return t?this.map(function(t){return t&&t.clone?t.clone(!0):t}):this.slice()}).defaults(r.COMMONS.clone).build()),n.defineProperty(Array.prototype,"dup",n(function(t,e){for(var i=new Array(0|t),s=0,n=i.length;n>s;++s)i[s]=this.clone(e);return i}).defaults(r.COMMONS.dup).build()),n.defineProperty(Array.prototype,"value",function(){return this}),n.defineProperty(Array.prototype,"valueArray",function(){return this}),n.defineProperty(Array.prototype,"do",function(t){var e=this;return s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler?(s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsArray(e)),this):(e.forEach(t),this)}),n.defineProperty(Array.prototype,"wait",function(t){var e=this;return s.currentTask&&s.currentTask.__wait__(s.createTaskWaitTokenArray(e,t)),this}),n.defineProperty(Array.prototype,"asUGenInput",function(){return this.map(a.asUGenInput)}),n.defineProperty(Array.prototype,"asString",function(){return"[ "+this.map(a.asString).join(", ")+" ]"}),["__plus__","__minus__"].concat(Object.keys(r.UNARY_OPS)).forEach(function(t){n.defineProperty(Array.prototype,t,function(){return this.map(function(e){return e[t]()})})});var o=function(t,e){var i=t.length;return e%=2*i-2,e>=i&&(e=2*(i-1)-e),t[e]},h=function(t,e,i,s){var n=e.length-i.length;switch(s){case 1:n>0?e.splice(i.length):0>n&&i.splice(e.length);break;case 2:if(n>0)return e.map(function(e,s){return e[t](o(i,s))});if(0>n)return i.map(function(i,s){return o(e,s)[t](i)});break;case 3:case 4:var r=e.map(function(e){return i.map(function(i){return e[t](i)})});return 4===s?a.flatten(r):r}return e.length===i.length?e.map(function(e,s){return e[t](i[s])}):e.length>i.length?e.map(function(e,s){return e[t](i[s%i.length])}):i.map(function(i,s){return e[s%e.length][t](i)})};s.global.SHORT=1,s.global.FOLD=2,s.global.TABLE=3,s.global.FLAT=4,["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(r.BINARY_OPS)).forEach(function(t){var e;e=r.ALIASES.hasOwnProperty(t)?r.ALIASES[t]:t,n.defineProperty(Array.prototype,t,function(i,n){return Array.isArray(i)?h(t,this,i,n):this.map(s.instanceOfUGen(i)?function(t){return s.createBinaryOpUGen(e,t,i)}:function(e){return e[t](i)})})}),Object.keys(r.ARITY_OPS).forEach(function(t){n.defineProperty(Array.prototype,t,n(function(){var e=u.call(arguments);return this.map(function(i){return i[t]?i[t].apply(i,e):i})}).defaults(r.ARITY_OPS[t]).multiCall().build())});var c=n(function(t,e){return this.map(function(i){return"number"==typeof i?i.midichord(t,e):i})}).defaults('name="",inversion=0').multiCall().build();n.defineProperty(Array.prototype,"midichord",c),n.defineProperty(Array.prototype,"chord",c);var p=n(function(t,e){return this.map(function(i){return"number"==typeof i?i.cpschord(t,e):i})}).defaults('name="",inversion=0').multiCall().build();n.defineProperty(Array.prototype,"cpschord",p),n.defineProperty(Array.prototype,"chordcps",p);var l=n(function(t,e){return this.map(function(i){return"number"==typeof i?i.ratiochord(t,e):i})}).defaults('name="",inversion=0').multiCall().build();n.defineProperty(Array.prototype,"ratiochord",l),n.defineProperty(Array.prototype,"chordratio",l);var f=function(t){return"function"==typeof t?t:function(){return t}},_=function(){return s.lang.random.next()},d=function(t){return s.lang.random.next()*t|0};n.defineProperty(Array,"series",n(function(t,e,i){t|=0;for(var s=new Array(t),n=e,r=0,a=s.length;a>r;r++)s[r]=n,n+=i;return s}).defaults("size=0,start=0,step=1").build()),n.defineProperty(Array,"geom",n(function(t,e,i){t|=0;for(var s=new Array(t),n=e,r=0,a=s.length;a>r;r++)s[r]=n,n*=i;return s}).defaults("size=0,start=1,grow=2").build()),n.defineProperty(Array,"fill",n(function(t,e){t|=0;var i=new Array(t);e=f(e);for(var s=0,n=i.length;n>s;++s)i[s]=e(s);return i}).defaults("size=0,func=0").build()),n.defineProperty(Array,"fill2D",n(function(t,e,i){t|=0,e|=0,i=f(i);var s,n,r,a;for(s=new Array(t),r=0;t>r;++r)for(n=s[r]=new Array(e),a=0;e>a;++a)n[a]=i(r,a);return s}).defaults("rows=0,cols=0,func=0").build()),n.defineProperty(Array,"fillND",function(){var t=function(e,i,s){var n,r,a,u;if(n=e[0],r=[],a=s.length,s=s.concat(0),e.length<=1)for(u=0;n>u;++u)s[a]=u,r.push(i.apply(null,s));else for(e=e.slice(1),u=0;n>u;++u)s[a]=u,r.push(t(e,i,s));return r};return n(function(e,i){return t(e,f(i),[])}).defaults("dimensions=[],func=0").build()}()),n.defineProperty(Array,"fib",n(function(t,e,i){for(var s,n=new Array(0|t),r=0,a=n.length;a>r;r++)n[r]=i,s=i,i=e+i,e=s;return n}).defaults("size=0,a=0,b=1").build()),n.defineProperty(Array,"rand",n(function(t,e,i){for(var s=new Array(0|t),n=0,r=s.length;r>n;n++)s[n]=e.rrand(i);return s}).defaults("size=0,minVal=0,maxVal=1").build()),n.defineProperty(Array,"rand2",n(function(t,e){for(var i=new Array(0|t),s=0,n=i.length;n>s;s++)i[s]=e.rand2();return i}).defaults("size=0,val=1").build()),n.defineProperty(Array,"linrand",n(function(t,e,i){for(var s=new Array(0|t),n=0,r=s.length;r>n;n++)s[n]=e.linrand(i);return s}).defaults("size=0,minVal=0,maxVal=1").build()),n.defineProperty(Array,"exprand",n(function(t,e,i){for(var s=new Array(0|t),n=0,r=s.length;r>n;n++)s[n]=e.exprand(i);return s}).defaults("size=0,minVal=0.001,maxVal=1").build()),n.defineProperty(Array,"interpolation",n(function(t,e,i){if(1===t)return[e];for(var s=new Array(0|t),n=(i-e)/(t-1),r=0,a=s.length;a>r;r++)s[r]=e+r*n;return s}).defaults("size=0,start=0,end=1").build());var m=function(t,e){var i=2*e-2;return t=(0|t)%i,0>t&&(t+=i),t>=e&&(t=i-t),t};n.defineProperty(Array.prototype,"size",function(){return this.length});var y=function(t){var e,i,s,n,r;if(t)for(t=f(t),r=this[0],n=t(this[0],0),e=1,i=this.length;i>e;++e)s=t(this[e],e),n>s&&(r=this[e],n=s);else for(r=this[0],e=1,i=this.length;i>e;++e)this[e]<r&&(r=this[e]);return r};n.defineProperty(Array.prototype,"minItem",y),n.defineProperty(Array.prototype,"minValue",y);var g=function(t){var e,i,s,n,r;if(t)for(t=f(t),r=this[0],n=t(this[0],0),e=1,i=this.length;i>e;++e)s=t(this[e],e),s>n&&(r=this[e],n=s);else for(r=this[0],e=1,i=this.length;i>e;++e)r<this[e]&&(r=this[e]);return r};n.defineProperty(Array.prototype,"maxItem",g),n.defineProperty(Array.prototype,"maxValue",g),n.defineProperty(Array.prototype,"at",n(function(t){return this[0|t]}).multiCall().build()),n.defineProperty(Array.prototype,"clipAt",n(function(t){return this[0|Math.max(0,Math.min(t,this.length-1))]}).multiCall().build()),n.defineProperty(Array.prototype,"wrapAt",n(function(t){return t=(0|t)%this.length,0>t&&(t+=this.length),this[t]}).multiCall().build()),n.defineProperty(Array.prototype,"foldAt",n(function(t){return this[m(t,this.length)]}).multiCall().build()),n.defineProperty(Array.prototype,"blendAt",n(function(t,e){switch(e){case"clipAt":case"wrapAt":case"foldAt":break;default:e="clipAt"}var i=0|t,s=this[e](i),n=this[e](i+1);return s+Math.abs(t-i)*(n-s)}).multiCall().build()),n.defineProperty(Array.prototype,"put",function(t,e){return Array.isArray(t)?t.forEach(function(t){this.put(t,e)},this):(t|=0,t>=0&&t<this.length&&(this[t]=e)),this}),n.defineProperty(Array.prototype,"clipPut",function(t,e){return Array.isArray(t)?t.forEach(function(t){this.clipPut(t,e)},this):this[0|Math.max(0,Math.min(t,this.length-1))]=e,this}),n.defineProperty(Array.prototype,"wrapPut",function(t,e){return Array.isArray(t)?t.forEach(function(t){this.wrapPut(t,e)},this):(t=(0|t)%this.length,0>t&&(t+=this.length),this[t]=e),this}),n.defineProperty(Array.prototype,"foldPut",function(t,e){return Array.isArray(t)?t.forEach(function(t){this.foldPut(t,e)},this):this[m(t,this.length)]=e,this}),n.defineProperty(Array.prototype,"insert",function(t,e){return this.splice(Math.max(0,t),0,e),this}),n.defineProperty(Array.prototype,"swap",function(t,e){if(t|=0,e|=0,t>=0&&t<this.length&&e>=0&&e<this.length){var i=this[t];this[t]=this[e],this[e]=i}return this}),n.defineProperty(Array.prototype,"clipSwap",function(t,e){return t=0|Math.max(0,Math.min(t,this.length-1)),e=0|Math.max(0,Math.min(e,this.length-1)),this.swap(t,e)}),n.defineProperty(Array.prototype,"wrapSwap",function(t,e){return t=(0|t)%this.length,0>t&&(t+=this.length),e=(0|e)%this.length,0>e&&(e+=this.length),this.swap(t,e)}),n.defineProperty(Array.prototype,"foldSwap",function(t,e){return t=m(t,this.length),e=m(e,this.length),this.swap(t,e)}),n.defineProperty(Array.prototype,"sum",function(){for(var t=0,e=0,i=this.length;i>e;++e)t=t.__add__(this[e]);return t}),n.defineProperty(Array.prototype,"normalize",n(function(t,e){var i=this.minItem(),s=this.maxItem();return this.map(function(n){return n.linlin(i,s,t,e)})}).defaults("min=0,max=1").build()),n.defineProperty(Array.prototype,"normalizeSum",function(){var t=this.sum();return this.map(function(e){return e/t})}),n.defineProperty(Array.prototype,"mirror",function(){var t=2*this.length-1;if(2>t)return this.slice(0);var e,i,s,n=new Array(t);for(e=0,s=this.length;s>e;++e)n[e]=this[e];for(i=s-2,s=t;s>e;++e,--i)n[e]=this[i];return n}),n.defineProperty(Array.prototype,"mirror1",function(){var t=2*this.length-2;if(2>t)return this.slice(0);var e,i,s,n=new Array(t);for(e=0,s=this.length;s>e;++e)n[e]=this[e];for(i=s-2,s=t;s>e;++e,--i)n[e]=this[i];return n}),n.defineProperty(Array.prototype,"mirror2",function(){var t=2*this.length;if(2>t)return this.slice(0);var e,i,s,n=new Array(t);for(e=0,s=this.length;s>e;++e)n[e]=this[e];for(i=s-1,s=t;s>e;++e,--i)n[e]=this[i];return n}),n.defineProperty(Array.prototype,"stutter",n(function(t){t=Math.max(0,0|t);for(var e=new Array(this.length*t),i=0,s=0,n=this.length;n>i;++i)for(var r=0;t>r;++r,++s)e[s]=this[i];return e}).defaults("n=2").build()),n.defineProperty(Array.prototype,"rotate",n(function(t){t|=0;var e=new Array(this.length),i=e.length;t%=i,0>t&&(t+=i);for(var s=0,n=t;i>s;++s)e[n]=this[s],++n>=i&&(n=0);return e}).defaults("n=1").build()),n.defineProperty(Array.prototype,"sputter",n(function(t,e){for(var i=[],s=0,n=0,r=this.length;r>s&&e>n;)i[n++]=this[s],_()<t&&(s+=1);return i}).defaults("probability=0.25,maxlen=100").build()),n.defineProperty(Array.prototype,"clipExtend",function(t){if(t=Math.max(0,0|t),this.length<t){for(var e=new Array(t),i=0,s=this.length;s>i;++i)e[i]=this[i];for(var n=e[i-1];t>i;++i)e[i]=n;return e}return this.slice(0,t)}),n.defineProperty(Array.prototype,"wrapExtend",function(t){if(t=Math.max(0,0|t),this.length<t){for(var e=new Array(t),i=0;t>i;++i)e[i]=this[i%this.length];return e}return this.slice(0,t)}),n.defineProperty(Array.prototype,"foldExtend",function(t){if(t=Math.max(0,0|t),this.length<t){for(var e=new Array(t),i=0;t>i;++i)e[i]=this[m(i,this.length)];return e}return this.slice(0,t)}),n.defineProperty(Array.prototype,"resamp0",function(t){for(var e=(this.length-1)/(t-1),i=new Array(t),s=0;t>s;++s)i[s]=this[Math.round(s*e)];return i}),n.defineProperty(Array.prototype,"resamp1",function(t){for(var e=(this.length-1)/(t-1),i=new Array(t),s=0;t>s;++s)i[s]=this.blendAt(s*e);return i}),n.defineProperty(Array.prototype,"scramble",function(){var t,e,i,s,n,r=this.slice();for(i=r.length,t=0,s=i;i-1>t;++t,--s)e=t+d(s),n=r[t],r[t]=r[e],r[e]=n;return r}),n.defineProperty(Array.prototype,"choose",function(){return this[d(this.length)]}),i.exports={}}),n("cc/lang/fn",function(t,e,i){var s=t("./cc"),n=t("./utils"),r=t("../common/ops"),a=[].slice,u=function(){function t(t){this.func=t,this.def=null,this.multi=0}t.prototype.defaults=function(t){return this.def=t,this},t.prototype.multiCall=function(t){return this.multi=void 0===t?1/0:t,this},t.prototype.build=function(){var t=this.func,s=[],r=[];this.def&&this.def.split(",").forEach(function(t){t=t.trim().split("="),s.push(t[0].trim()),r.push(2===t.length?"Infinity"===t[1]?1/0:JSON.parse(t[1]):void 0)});var u=t,o=this.multi;return 1/0===o?u=this.def?function(){var o=a.call(arguments);return o=i(s,r,a.call(arguments)),e(o)?n.flop(o).map(function(t){return u.apply(this,t)},this):t.apply(this,o)}:function(){var i=a.call(arguments);return e(i)?n.flop(i).map(function(t){return u.apply(this,t)},this):t.apply(this,i)}:o>0?u=this.def?function(){var h=a.call(arguments);h=i(s,r,a.call(arguments));var c=a.call(h,0,o);if(e(c)){var p=a.call(h,o);return n.flop(c).map(function(t){return u.apply(this,t.concat(p))},this)}return t.apply(this,h)}:function(){var i=a.call(arguments,0,o);if(e(i)){var s=a.call(arguments,o);return n.flop(i).map(function(t){return u.apply(this,t.concat(s))},this)}return t.apply(this,arguments)}:0>o?u=this.def?function(){var h=a.call(arguments);h=i(s,r,a.call(arguments));var c=a.call(h,o);if(e(c)){var p=a.call(h,0,o);return n.flop(c).map(function(t){return u.apply(this,p.concat(t))},this)}return t.apply(this,h)}:function(){var i=a.call(arguments,o);if(e(i)){var s=a.call(arguments,0,o);return n.flop(i).map(function(t){return u.apply(this,s.concat(t))},this)}return t.apply(this,arguments)}:this.def&&(u=function(){return t.apply(this,i(s,r,a.call(arguments)))}),u};var e=function(t){for(var e=0,i=t.length;i>e;++e)if(Array.isArray(t[e]))return!0;return!1},i=function(t,e,i){var s,r=e.slice();n.isDict(i[i.length-1])&&(s=i.pop(),Object.keys(s).forEach(function(e){var i=t.indexOf(e);-1!==i&&(r[i]=s[e])}));for(var a=0,u=Math.min(i.length,r.length);u>a;++a)r[a]=i[a];return s&&t.length<=r.length&&n.isDict(e[e.length-1])&&r.splice(r.length-1,1,s),r};return function(e){return new t(e)}}();u.defineProperty=function(t,e,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:i})},u.defineBinaryProperty=function(t,e,i){var n;n=r.ALIASES.hasOwnProperty(e)?r.ALIASES[e]:e,Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:function(t){return Array.isArray(t)?t.map(function(t){return this[e](t)},this):s.instanceOfUGen(t)?s.createBinaryOpUGen(n,this,t):i.call(this,t)}})},u.defineArityProperty=function(t,e,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:function(){var t=a.call(arguments);return t.some(s.instanceOfUGen)?i.apply(s.global.DC(0,this),t):i.apply(this,t)}})},i.exports=u}),n("cc/lang/utils",function(t,e,i){var s=t("./cc"),n=function(t){return!(!t||t.constructor!==Object)},r=function(t){if(Array.isArray(t))return t.reduce(function(t,e){return Math.max(t,r(e))},0);if(t)switch(t.rate){case 0:case 1:case 2:case 3:return t.rate}return 0},a=function(t){switch(t){case 0:return"scalar";case 1:return"control";case 2:return"audio";case 3:return"demand"}return"unknown"},u=function(t){return t=+t,isNaN(t)&&(t=0),t},o=function(t){return null===t?"null":void 0===t?"undefined":t.asString?t.asString():t.toString()},h=function(t){return null===t||void 0===t?t=[]:Array.isArray(t)||(t=[t]),t},c=function(t){return null===t||void 0===t?0:"function"==typeof t.asUGenInput?t.asUGenInput():s.instanceOfUGen(t)?t:Array.isArray(t)?t.map(c):(t=+t,isNaN(t)&&(t=0),t)},p=function(t){var e=t.reduce(function(t,e){return Math.max(t,Array.isArray(e)?e.length:1)},0),i=new Array(e),s=t.length;if(s)for(var n=0;e>n;++n)for(var r=i[n]=new Array(s),a=0;s>a;++a)r[a]=Array.isArray(t[a])?t[a][n%t[a].length]:t[a];return i},l=function(t,e){if(1>=e)return p(t);for(var i=v(t,e),s=new Array(i),n=0;i>n;++n)s[n]=w(t,e,n);return s},f=function(){var t=function(e,i){var s,n;for(s=0,n=e.length;n>s;++s)Array.isArray(e[s])?i=t(e[s],i):i.push(e[s]);return i};return function(e){return t(e,[])}}(),_=function(){var t=function(e,i){for(var s=0,n=e.length;n>s;++s)Array.isArray(e[s])?i=t(e[s],i):i.push(e[s]);return i};return function(e){return t(e,[])}}(),d=function(t,e){for(var i=[],s=[],n=0,r=t.length;r>n;++n)s.push(t[n]),s.length>=e&&(i.push(s),s=[]);return s.length&&i.push(s),i},m=function(t,e){for(var i,s=new Array(e),n=t.length,r=0;e>r;++r)i=t[r%n],s[r]=i[(r/n|0)%i.length];return s},y=function(t,e,i){return 0>=e?1>=i?[t]:[y(t,e,i-1)]:t.map(function(t){return y(t,e-1,i)})},g=function(t,e,i){return Array.isArray(t)?0>=e?t.length>1?t:1>=i?t[0]||[]:g(t[0],e,i-1):t.map(function(t){return g(t,e-1,1)}):t},v=function(t,e){var i=0;if(0===e)return t.length;for(var s=0,n=t.length;n>s;++s){var r,a=t[s];r=Array.isArray(a)?v(a,e-1):1,r>i&&(i=r)}return i},b=function(t,e){if(e<t.length)return t.slice(0,e);for(var i=new Array(e),s=0;e>s;++s)i[s]=t[s%t.length];return i},w=function(t,e,i){return 0===e?t[i%t.length]:t.map(function(t){return Array.isArray(t)?w(t,e-1,i):t})},k=function(t,e){for(var i=new Array(t),s=0;t>s;++s)i[s]=e;return i},N=function(t){var e=t.data;e instanceof Uint8Array?s.lang.sendToServer(e):s.lang.recvFromClient(e)};i.exports={isDict:n,asRate:r,asRateString:a,asNumber:u,asString:o,asArray:h,asUGenInput:c,flop:p,flopDeep:l,flat:f,flatten:_,clump:d,lace:m,bubble:y,unbubble:g,maxSizeAtDepth:v,wrapExtend:b,wrapAtDepth:w,filledArray:k,lang_onmessage:N}}),n("cc/common/ops",function(t,e,i){var s={},n=[];"neg not isNil notNil bitNot abs asFloat asInt ceil floor frac sign squared cubed sqrt exp reciprocal midicps cpsmidi midiratio ratiomidi dbamp ampdb octcps cpsoct log log2 log10 sin cos tan asin acos atan sinh cosh tanh rand rand2 linrand bilinrand sum3rand distort softclip coin digitvalue silence thru rectWindow hanWindow welWindow triWindow ramp scurve numunaryselectors num tilde pi to_i half twice".split(" ").forEach(function(t,e){s[t]=e,n[e]=t});var r={},a=[];"+ - * / / % eq ne lt gt le ge min max bitAnd bitOr bitXor lcm gcd round roundUp trunc atan2 hypot hypotApx pow leftShift rightShift unsignedRightShift fill ring1 ring2 ring3 ring4 difsqr sumsqr sqrsum sqrdif absdif thresh amclip scaleneg clip2 excess fold2 wrap2 firstarg randrange exprandrange numbinaryselectors roundDown".split(" ").forEach(function(t,e){r[t]=e,a[e]=t});var u={madd:"mul=1,add=0",range:"lo=0,hi=1",exprange:"lo=0.01,hi=1",curverange:"lo=0.01,hi=1,curve=-4",unipolar:"mul=1",bipolar:"mul=1",clip:"lo=1,hi=1",fold:"lo=1,hi=1",wrap:"lo=1,hi=1",blend:"that=0,blendFrac=0.5",lag:"t1=0.1,t2",lag2:"t1=0.1,t2",lag3:"t1=0.1,t2",lagud:"lagTimeU=0.1,lagTimeD=0.1",lag2ud:"lagTimeU=0.1,lagTimeD=0.1",lag3ud:"lagTimeU=0.1,lagTimeD=0.1",varlag:"time=0.1,curvature=0,warp=5,start=0",slew:"up=1,down=1",linlin:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',linexp:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',explin:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',expexp:'inMin=0,inMax=1,outMin=1,outMax=2,clip="minmax"',lincurve:'inMin=0,inMax=1,outMin=0,outMax=1,curve=-4,clip="minmax"',curvelin:'inMin=0,inMax=1,outMin=0,outMax=1,curve=-4,clip="minmax"',bilin:'inCenter=0.5,inMin=0,inMax=1,outCenter=0.5,outMin=0,outMax=1,clip="minmax"',rrand:"num=1",exprand:"num=1"},o={copy:"",clone:"deep=false",dup:"n=2,deep=false",value:"",valueArray:"","do":"",wait:"",asUGenInput:""},h={__plus__:"num",__minus__:"neg",__add__:"+",__sub__:"-",__mul__:"*",__div__:"/",__mod__:"%"};i.exports={UNARY_OPS:s,UNARY_OPS_MAP:n,BINARY_OPS:r,BINARY_OPS_MAP:a,ARITY_OPS:u,ALIASES:h,COMMONS:o}}),n("cc/lang/boolean",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/ops"),a=[].slice;n.defineProperty(Boolean.prototype,"copy",function(){return this}),n.defineProperty(Boolean.prototype,"clone",n(function(){return this}).defaults(r.COMMONS.clone).build()),n.defineProperty(Boolean.prototype,"dup",n(function(t){for(var e=new Array(0|t),i=0,s=e.length;s>i;++i)e[i]=this;return e}).defaults(r.COMMONS.dup).build()),n.defineProperty(Boolean.prototype,"value",function(){return this}),n.defineProperty(Boolean.prototype,"valueArray",function(){return this}),n.defineProperty(Boolean.prototype,"do",function(t){if(this){if(s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler)return s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsOnce(this)),this;t(this,0)}return this}),n.defineProperty(Boolean.prototype,"wait",function(){var t=this;return t&&s.currentTask&&s.currentTask.__wait__(s.createTaskWaitTokenBoolean(t)),this}),n.defineProperty(Boolean.prototype,"asUGenInput",function(){return this?1:0}),n.defineProperty(Boolean.prototype,"asString",function(){return this?"true":"false"}),["__plus__","__minus__"].concat(Object.keys(r.UNARY_OPS)).forEach(function(t){n.defineProperty(Boolean.prototype,t,function(){return(this?1:0)[t]()})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(r.BINARY_OPS)).forEach(function(t){n.defineProperty(Boolean.prototype,t,function(e){return(this?1:0)[t](e)})}),Object.keys(r.ARITY_OPS).forEach(function(t){n.defineProperty(Boolean.prototype,t,n(function(){var e=a.call(arguments);return 0[t].apply(this?1:0,e)}).defaults(r.ARITY_OPS[t]).multiCall().build())}),i.exports={}}),n("cc/lang/buffer",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("./utils"),a=t("../common/extend"),u=[].slice,o=function(){function t(t,i){this.klassName="Buffer",this.bufnum=e++,this.frames=0|t,this.channels=0|i,this.sampleRate=s.lang.sampleRate,this.path=null,s.lang.pushToTimeline(["/b_new",this.bufnum,this.frames,this.channels])}var e=0;a(t,s.Object),t.prototype.free=function(){return s.lang.pushToTimeline(["/b_free",this.bufnum]),this},t.prototype.zero=function(){return s.lang.pushToTimeline(["/b_zero",this.bufnum]),this},t.prototype.set=function(){var t=u.call(arguments);return t.length&&s.lang.pushToTimeline(["/b_set",this.bufnum,t]),this},t.prototype.setn=t.prototype.set,t.prototype.get=function(t,e){if(t=0|t,"function"==typeof e){var i=s.lang.setCallback(e);s.lang.pushToTimeline(["/b_get",this.bufnum,t,i])}return this},t.prototype.getn=function(t,e,i){if(t=0|t,e=0|e,"function"==typeof i){var n=s.lang.setCallback(i);s.lang.pushToTimeline(["/b_getn",this.bufnum,t,e,n])}return this},t.prototype.normalize=function(t,e){return s.lang.pushToTimeline(["/b_gen",this.bufnum,"normalize",e?2:0,r.asNumber(t)]),this},t.prototype.fill=function(){return s.lang.pushToTimeline(["/b_fill",this.bufnum,u.call(arguments)]),this},t.prototype.copyData=n(function(t,e,i,n){return t=0|t.bufnum,s.lang.pushToTimeline(["/b_gen",this.bufnum,"copy",0,t,e,i,n]),this}).defaults("buf=0,dstStartAt=0,srcStartAt=0,numSamples=-1").build();var i=function(t,e,i){return(t?1:0)+(e?2:0)+(i?4:0)};return t.prototype.sine1=n(function(t,e,n,a){t=r.asArray(t);var u=i(e,n,a);return s.lang.pushToTimeline(["/b_gen",this.bufnum,"sine1",u].concat(t)),this}).defaults("amps=[],normalize=true,asWavetable=true,clearFirst=true").build(),t.prototype.sine2=n(function(t,e,n,a,u){t=r.asArray(t),e=r.asArray(e);var o=i(n,a,u),h=2*Math.max(t.length,e.length);return s.lang.pushToTimeline(["/b_gen",this.bufnum,"sine2",o].concat(r.lace([t,e],h))),this}).defaults("freqs=[],amps=[],normalize=true,asWavetable=true,clearFirst=true").build(),t.prototype.sine3=n(function(t,e,n,a,u,o){t=r.asArray(t),e=r.asArray(e),n=r.asArray(n);var h=i(a,u,o),c=3*Math.max(t.length,e.length,n.length);return s.lang.pushToTimeline(["/b_gen",this.bufnum,"sine3",h].concat(r.lace([t,e,n],c))),this}).defaults("freqs=[],amps=[],phases=[],normalize=true,asWavetable=true,clearFirst=true").build(),t.prototype.cheby=n(function(t,e,n,a){t=r.asArray(t);var u=i(e,n,a);return s.lang.pushToTimeline(["/b_gen",this.bufnum,"cheby",u].concat(t)),this}).defaults("amplitudes=[],normalize=true,asWavetable=true,clearFirst=true").build(),t.prototype.asUGenInput=function(){return this.bufnum},t.prototype.asString=function(){return"Buffer("+this.bufnum+", "+this.frames+", "+this.channels+", "+this.sampleRate+", "+this.path+")"},t}(),h=function(t,e){var i=new Uint8Array(16+4*e.samples.length),n=new Uint16Array(i.buffer),r=new Uint32Array(i.buffer),a=new Float32Array(i.buffer);n[0]=1,n[1]=t.bufnum,n[3]=e.channels,r[2]=e.sampleRate,r[3]=e.frames,a.set(e.samples,4),s.lang.sendToServer(i)};s.global.Buffer=n(function(t,e,i){Array.isArray(t)&&(t=new Float32Array(t)),t instanceof Float32Array&&(i={sampleRate:s.lang.sampleRate,channels:1,frames:t.length,samples:t},t=i.frames,e=i.channels);var n=new o(t,e);return i&&h(n,i),n}).defaults("numFrames=0,numChannels=1,source").build(),s.global.Buffer["new"]=s.global.Buffer,s.global.Buffer.read=n(function(t,e,i){if("string"!=typeof t)throw new TypeError("Buffer.Read: path should be a string.");var n=new o;return s.lang.requestBuffer(t,function(s){var r=(s[7]<<8)+s[6],a=(s[11]<<24)+(s[10]<<16)+(s[9]<<8)+s[8],u=(s[15]<<24)+(s[14]<<16)+(s[13]<<8)+s[12],o=new Float32Array(s.buffer,16),c={sampleRate:a,channels:r,frames:u,samples:o};n.sampleRate=c.sampleRate,n.path=t,o=c.samples,e=Math.max(0,Math.min(0|e,c.frames)),i=Math.max(-1,Math.min(0|i,c.frames-e));var p=c.channels;0===e?-1!==i&&(c.samples=new Float32Array(o.buffer,16,i*p),n.frames=i,c.frames=i):(-1===i?(c.samples=new Float32Array(o.buffer,16+e*p*4),n.frames=c.samples.length/p):(c.samples=new Float32Array(o.buffer,16+e*p*4,i*p),n.frames=i),c.frames=n.frames),h(n,c)}),n}).defaults("path,startFrame=0,numFrames=-1").build(),s.instanceOfBuffer=function(t){return t instanceof o},i.exports={Buffer:o}}),n("cc/lang/builtin",function(t,e,i){var s=t("./cc"),n=t("../common/pack").pack,r=[].slice;s.global.console={},s.global.console.log=function(){s.lang&&s.lang.sendToClient(["/console/log",r.call(arguments).map(n)])};var a=[];s.global.setInterval=function(t,e){var i=setInterval(t,e);return a.push(i),i},s.global.setTimeout=function(t,e){var i=setTimeout(t,e);return a.push(i),i},s.global.clearInterval=function(t){clearInterval(t);var e=a.indexOf(t);-1!==e&&a.splice(e,1)},s.global.clearTimeout=function(t){clearTimeout(t);var e=a.indexOf(t);-1!==e&&a.splice(e,1)},s.resetBuiltin=function(){a.splice(0).forEach(function(t){clearInterval(t),clearTimeout(t)})},i.exports={}}),n("cc/lang/bus",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/extend"),a=t("./utils"),u={audio:2,control:0},o=function(){function t(t,e,i){this.rate=t,this.index=e,this.numChannels=i}return r(t,s.Object),t.prototype.asUGenInput=function(){return this.index},t.prototype.asString=function(){return"Bus("+a.asRateString(this.rate)+", "+this.index+", "+this.numChannels+")"},t}();s.global.Bus=function(){return s.global.Bus.control(1)},s.global.Bus["new"]=s.global.Bus,s.global.Bus.control=n(function(t){var e=u.control;if("number"==typeof t){if(128<u.control+t)throw new Error("Bus: failed to get a control bus allocated.");u.control+=t}else t=0;return new o(1,e,t)}).defaults("numChannels=1").build(),s.global.Bus.audio=n(function(t){var e=u.audio;if("number"==typeof t){if(16<u.audio+t)throw new Error("Bus: failed to get an audio bus allocated.");u.audio+=t}else t=0;return new o(2,e,t)}).defaults("numChannels=1").build(),s.instanceOfBus=function(t){return t instanceof o},s.resetBus=function(){u.audio=2,u.control=0},i.exports={Bus:o}}),n("cc/lang/date",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/ops"),a=[].slice;n.defineProperty(Date.prototype,"copy",function(){return new Date(+this)}),n.defineProperty(Date.prototype,"clone",n(function(){return new Date(+this)}).defaults(r.COMMONS.clone).build()),n.defineProperty(Date.prototype,"dup",n(function(t){for(var e=new Array(0|t),i=0,s=e.length;s>i;++i)e[i]=this;return e}).defaults(r.COMMONS.dup).build()),n.defineProperty(Date.prototype,"value",function(){return this}),n.defineProperty(Date.prototype,"valueArray",function(){return this}),n.defineProperty(Date.prototype,"do",function(t){var e=Date.now()>+this;if(e){if(s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler)return s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsOnce(this)),this;t(this,0)}return this}),n.defineProperty(Date.prototype,"wait",function(){var t=Date.now()>+this;return t&&s.currentTask&&s.currentTask.__wait__(s.createTaskWaitTokenDate(this)),this}),n.defineProperty(Date.prototype,"asUGenInput",function(){throw new Error("Date can't cast to a UGen.")}),n.defineProperty(Date.prototype,"asString",function(){return this.toString()
}),["__plus__","__minus__"].concat(Object.keys(r.UNARY_OPS)).forEach(function(t){n.defineProperty(Date.prototype,t,function(){return(+this)[t]()})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(r.BINARY_OPS)).forEach(function(t){n.defineProperty(Date.prototype,t,function(e){return(+this)[t](e)})}),Object.keys(r.ARITY_OPS).forEach(function(t){n.defineProperty(Date.prototype,t,n(function(){var e=a.call(arguments);return 0[t].apply(+this,e)}).defaults(r.ARITY_OPS[t]).multiCall().build())}),i.exports={}}),n("cc/lang/env",function(t,e,i){var s=t("./cc"),n=t("../common/extend"),r=t("./fn"),a=t("./utils"),u={step:0,lin:1,linear:1,exp:2,exponential:2,sin:3,sine:3,wel:4,welch:4,sqr:6,squared:6,cub:7,cubed:7},o=function(t){return"number"==typeof t?5:u[t]||0},h=function(t){return"number"==typeof t?t:0},c=function(){function t(t,e,i,s,n,r){this._levels=t,this._times=a.wrapExtend(e,t.length-1),this._curve=i||"lin",this._releaseNode=s,this._loopNode=n,this._offset=r,this._array=null}return n(t,s.Object),t.prototype.ar=r(function(t,e,i,n,r){return s.global.EnvGen(2,this,e,n,r,i,t)}).defaults("doneAction=0,gate=1,timeScale=1,mul=1,add=0").multiCall().build(),t.prototype.kr=r(function(t,e,i,n,r){return s.global.EnvGen(1,this,e,n,r,i,t)}).defaults("doneAction=0,gate=1,timeScale=1,mul=1,add=0").multiCall().build(),t.prototype.asMultichannelArray=function(){return this._array||(this._array=this.asArray()),this._array},t.prototype.asArray=function(){var t,e=this._levels,i=this._times,s=this._curve,n=this._times.length;Array.isArray(s)||(s=[s]);var r,u="number"==typeof this._releaseNode?this._releaseNode:-99,c="number"==typeof this._loopNode?this._loopNode:-99;t=[e[0],n,u,c];for(var p=0;n>p;++p)r=p%s.length,t.push(e[p+1],i[p],o(s[r]),h(s[r]));return a.flop(t)},t}();s.global.Env=r(function(t,e,i,s,n,r){return Array.isArray(t)||(t=[0,1,0]),Array.isArray(e)||(e=[1,1]),new c(t,e,i,s,n,r)}).defaults('levels=0,times=0,curve="lin",releaseNode,loopNode,offset=0').build(),s.global.Env["new"]=s.global.Env,s.global.Env.triangle=r(function(t,e){return t=t.__mul__(.5),new c([0,e,0],[t,t])}).defaults("dur=1,level=1").build(),s.global.Env.sine=r(function(t,e){return t=t.__mul__(.5),new c([0,e,0],[t,t],"sine")}).defaults("dur=1,level=1").build(),s.global.Env.perc=r(function(t,e,i,s){return new c([0,i,0],[t,e],s)}).defaults("attackTime=0.01,releaseTime=1,level=1,curve=-4").build(),s.global.Env.linen=r(function(t,e,i,s,n){return new c([0,s,s,0],[t,e,i],n)}).defaults('attackTime=0.01,sustainTime=1,releaseTime=1,level=1,curve="lin"').build(),s.global.Env.xyc=function(){throw"not implemented"},s.global.Env.pairs=function(){throw"not implemented"},s.global.Env.cutoff=r(function(t,e,i){var s=o(i),n=2===s?1e-5:0;return new c([e,n],[t],i,0)}).defaults('releaseTime=0.1,level=1,curve="lin"').build(),s.global.Env.dadsr=r(function(t,e,i,s,n,r,a,u){return new c([0,0,r,r.__mul__(s),0].__add__(u),[t,e,i,n],a,3)}).defaults("delayTime=0.1,attackTime=0.01,decayTime=0.3,sustainLevel=0.5,releaseTime=1,peakLevel=1,curve=-4,bias=0").build(),s.global.Env.adsr=r(function(t,e,i,s,n,r,a){return new c([0,n,n.__mul__(i),0].__add__(a),[t,e,s],r,2)}).defaults("attackTime=0.01,decayTime=0.3,sustainLevel=0.5,releaseTime=1,peakLevel=1,curve=-4,bias=0").build(),s.global.Env.asr=r(function(t,e,i,s){return new c([0,e,0],[t,i],s,1)}).defaults("attackTime=0.01,sustainLevel=1,releaseTime=1,curve=-4").build(),s.global.Env.circle=function(){throw"not implemented"},i.exports={}}),n("cc/lang/function",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/ops"),a=t("./utils"),u=[].slice,o=function(t){return t=t(),"number"!=typeof t||isNaN(t)?0:t};n.defineProperty(Function.prototype,"copy",function(){return this}),n.defineProperty(Function.prototype,"clone",n(function(){return this}).defaults(r.COMMONS.clone).build()),n.defineProperty(Function.prototype,"dup",n(function(t){t|=0;for(var e=new Array(t),i=0;t>i;++i)e[i]=this(i);return e}).defaults(r.COMMONS.dup).build()),n.defineProperty(Function.prototype,"value",function(){return this.apply(null,arguments)}),n.defineProperty(Function.prototype,"valueArray",function(t){return this.apply(null,a.asArray(t))}),n.defineProperty(Function.prototype,"do",function(t){return s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler?(s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsOnce(!0)),this):(t(this,0),this)}),n.defineProperty(Function.prototype,"wait",function(){return s.currentTask&&s.currentTask.__wait__(s.createTaskWaitTokenFunction(this)),this}),n.defineProperty(Function.prototype,"asUGenInput",function(){return a.asUGenInput(this())}),n.defineProperty(Function.prototype,"asString",function(){return"Function"}),["__plus__","__minus__"].concat(Object.keys(r.UNARY_OPS)).forEach(function(t){n.defineProperty(Function.prototype,t,function(){return o(this)[t]()}),/^[a-z]/.test(t)&&!s.global.hasOwnProperty(t)&&(s.global[t]=function(e){return"function"==typeof e[t]?e[t]():e})}),["__sub__","__div__","__mod__"].concat(Object.keys(r.BINARY_OPS)).forEach(function(t){n.defineProperty(Function.prototype,t,function(e){return o(this)[t](e)}),/^[a-z]/.test(t)&&!s.global.hasOwnProperty(t)&&(s.global[t]=function(e,i){return"function"==typeof e[t]?e[t](i):e})}),n.defineProperty(Function.prototype,"__add__",function(t){return this.toString()+t}),n.defineProperty(Function.prototype,"__mul__",function(t){if("function"==typeof t){var e=this,i=t;return function(){return e.call(null,i.apply(null,arguments))}}return 0}),Object.keys(r.ARITY_OPS).forEach(function(t){n.defineProperty(Function.prototype,t,n(function(){var e=u.call(arguments);return 0[t].apply(o(this),e)}).defaults(r.ARITY_OPS[t]).multiCall().build()),/^[a-z]/.test(t)&&!s.global.hasOwnProperty(t)&&(s.global[t]=function(e){return"function"==typeof e[t]?e[t].apply(e,u.call(arguments,1)):e})}),n.defineProperty(Function.prototype,"play",function(){var t=this;return s.global.SynthDef(function(){s.global.Out(2,0,t())},[]).play()}),i.exports={}}),n("cc/lang/message",function(t,e,i){var s=t("./cc"),n=t("../common/emitter"),r=[].slice;s.global.Message={klassName:"Message"},n.mixin(s.global.Message),s.global.Message.send=function(){return s.lang.sendToClient(["/send",r.call(arguments)]),s.global.Message},s.resetMessage=function(){s.global.Message.off()},i.exports={}}),n("cc/lang/mix",function(t,e,i){var s=t("./cc"),n=t("./utils"),r=n.asRate,a=function(t){Array.isArray(t)||(t=[t]);var e=n.clump(t,4),i=e.map(function(t){switch(t.length){case 4:return s.createSum4(t[0],t[1],t[2],t[3]);case 3:return s.createSum3(t[0],t[1],t[2]);case 2:return s.createBinaryOpUGen("+",t[0],t[1]);case 1:return t[0]}});switch(i.length){case 4:return s.createSum4(i[0],i[1],i[2],i[3]);case 3:return s.createSum3(i[0],i[1],i[2]);case 2:return s.createBinaryOpUGen("+",i[0],i[1]);case 1:return i[0];default:return a(i)}};s.global.Mix=function(t){return a(t)||[]},s.global.Mix["new"]=s.global.Mix,s.global.Mix.fill=function(t,e){t=0|t;for(var i=new Array(t),s=0;t>s;++s)i[s]=e(s);return a(i)},s.global.Mix.ar=function(t){if(Array.isArray(t)){var e=s.global.Mix(t);switch(r(e)){case 2:return e;case 1:return e.map(function(t){return s.global.K2A.ar(t)});case 0:return e.map(function(t){return s.global.DC.ar(t)})}}throw"Mix.ar: bad arguments"},s.global.Mix.kr=function(t){if(Array.isArray(t)){var e=s.global.Mix(t),i=r(e);switch(2===i&&(e=e.map(function(t){return 2===t.rate?s.global.A2K.kr(t):t}),i=r(e)),i){case 1:return e;case 0:return e.map(function(t){return s.global.DC.ar(t)})}}throw"Mix.kr: bad arguments"},s.global.Mix.arFill=function(t,e){t=0|Math.max(0,t);for(var i=new Array(t),n=0;t>n;++n)i[n]=e(n);return s.global.Mix.ar(i)},s.global.Mix.krFill=function(t,e){t=0|Math.max(0,t);for(var i=new Array(t),n=0;t>n;++n)i[n]=e(n);return s.global.Mix.kr(i)},i.exports={}}),n("cc/lang/node",function(t,e,i){var s=t("./cc"),n=t("./utils"),r=t("../common/extend"),a={},u=function(){function t(){this.klassName="Node",this.nodeId=e++,this._blocking=!0,a[this.nodeId]=this}var e=0;return r(t,s.Object),t.prototype.play=function(){return s.lang.pushToTimeline(["/n_run",this.nodeId,!0]),this},t.prototype.pause=function(){return s.lang.pushToTimeline(["/n_run",this.nodeId,!1]),this},t.prototype.stop=function(){return s.lang.pushToTimeline(["/n_free",this.nodeId]),this._blocking=!1,this},t.prototype.free=t.prototype.stop,t.prototype.set=function(t){var e=c(t,this.params);return e.length&&s.lang.pushToTimeline(["/n_set",this.nodeId,e]),this},t.prototype.release=function(t){t=-1-n.asNumber(t);var e=c({gate:t},this.params);return e.length&&s.lang.pushToTimeline(["/n_set",this.nodeId,e]),this},t.prototype.performWait=function(){return this._blocking},t.prototype.asString=function(){return this.klassName+"("+this.nodeId+")"},t}(),o=function(){function t(t,e){u.call(this),this.klassName="Group",t instanceof u&&s.lang.pushToTimeline(["/g_new",this.nodeId,e,t.nodeId])}return r(t,u),t}(),h=function(){function t(t,e,i,n){if(u.call(this),this.klassName="Synth",t instanceof u&&s.instanceOfSynthDef(i)){this.params=i.specs.params;var r=this.nodeId,a=c(n,this.params);s.lang.pushToTimeline(["/s_new",r,e,t.nodeId,i._defId,a])}}return r(t,u),t}(),c=function(t,e){var i=[];return n.isDict(t)&&e&&Object.keys(t).forEach(function(s){var n=t[s],r=e.names.indexOf(s);if(-1!==r){var a=e.length[r];r=e.indices[r],Array.isArray(n)?n.forEach(function(t,e){a>e&&("number"!=typeof t||isNaN(t)||i.push(r+e,t))}):"number"!=typeof n||isNaN(n)||i.push(r,n)}}),i},p=function(t){var e,i,n;return s.instanceOfSynthDef(t[0])?(e=s.lang.rootNode,i=t[0],n=t[1]||{}):s.instanceOfSynthDef(t[1])?(e=t[0],i=t[1],n=t[2]||{}):(e=s.lang.rootNode,i=null,n={}),[e,i,n]};s.global.Group=function(){var t,e=0,i=0;return t=s.instanceOfNode(arguments[i])?arguments[i++]:s.lang.rootNode,"string"==typeof arguments[i]?e={addToHead:0,addToTail:1,addBefore:2,addAfter:3,replace:4}[arguments[i++]]||0:"number"==typeof arguments[i]&&0<=arguments[i]&&arguments[i]<=4&&(e=arguments[i++]),new o(t,e)},s.global.Group["new"]=s.global.Group,s.global.Group.after=function(t){return new o(t||s.lang.rootNode,3)},s.global.Group.before=function(t){return new o(t||s.lang.rootNode,2)},s.global.Group.head=function(t){return new o(t||s.lang.rootNode,0)},s.global.Group.tail=function(t){return new o(t||s.lang.rootNode,1)},s.global.Group.replace=function(t){return new o(t,4)},s.global.Synth=function(t){var e,i,r=0,a=1;return e=n.isDict(arguments[a])?arguments[a++]:{},i=s.instanceOfNode(arguments[a])?arguments[a++]:s.lang.rootNode,"string"==typeof arguments[a]?r={addToHead:0,addToTail:1,addBefore:2,addAfter:3,replace:4}[arguments[a++]]||0:"number"==typeof arguments[a]&&0<=arguments[a]&&arguments[a]<=4&&(r=arguments[a++]),new h(i,r,t,e)},s.global.Synth["new"]=s.global.Synth,s.global.Synth.after=function(){var t=p(arguments);return new h(t[0],3,t[1],t[2])},s.global.Synth.before=function(){var t=p(arguments);return new h(t[0],2,t[1],t[2])},s.global.Synth.head=function(){var t=p(arguments);return new h(t[0],0,t[1],t[2])},s.global.Synth.tail=function(){var t=p(arguments);return new h(t[0],1,t[1],t[2])},s.global.Synth.replace=function(t,e,i){return new h(t,4,e,i)},s.createLangRootNode=function(){return new o},s.instanceOfNode=function(t){return t instanceof u},s.instanceOfGroup=function(t){return t instanceof o},s.instanceOfSynth=function(t){return t instanceof h},s.getNode=function(t){return a[t]},s.resetNode=function(){a={}},i.exports={Node:u,Group:o,Synth:h,args2controls:c}}),n("cc/lang/number",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/ops"),a=t("./utils"),u=function(){return s.lang.random.next()};n.defineProperty(Number.prototype,"copy",function(){return this}),n.defineProperty(Number.prototype,"clone",n(function(){return this}).defaults(r.COMMONS.clone).build()),n.defineProperty(Number.prototype,"dup",n(function(t){for(var e=new Array(0|t),i=0,s=e.length;s>i;++i)e[i]=this;return e}).defaults(r.COMMONS.dup).build()),n.defineProperty(Number.prototype,"value",function(){return this}),n.defineProperty(Number.prototype,"valueArray",function(){return this}),n.defineProperty(Number.prototype,"do",function(t){var e,i=this;if(s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler)return i>0&&s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsNumber(0,i-1,1)),this;for(e=0;i>e;++e)t(e,e);return this}),n.defineProperty(Number.prototype,"forBy",function(t,e,i){var n=0,r=this;if(t=a.asNumber(t),e=a.asNumber(e),s.instanceOfSyncBlock(i)&&s.currentSyncBlockHandler)return s.currentSyncBlockHandler.__sync__(i,s.createTaskArgumentsNumber(r,t,e)),this;if(0>e)for(n=0;r>=t;n++)i(r,n),r+=e;else if(e>0)for(n=0;t>=r;n++)i(r,n),r+=e;return this}),n.defineProperty(Number.prototype,"forSeries",function(t,e,i){return this.forBy(e,a.asNumber(t)-this,i)}),n.defineProperty(Number.prototype,"wait",function(){var t=this;return t>=0&&s.currentTask&&s.currentTask.__wait__(t),this}),n.defineProperty(Number.prototype,"asUGenInput",function(){return this}),n.defineProperty(Number.prototype,"asString",function(){return this.toString()}),n.defineProperty(Number.prototype,"__plus__",function(){return+this}),n.defineProperty(Number.prototype,"__minus__",function(){return-this}),n.defineProperty(Number.prototype,"neg",function(){return-this}),n.defineProperty(Number.prototype,"not",function(){return 0===this?1:0}),n.defineProperty(Number.prototype,"isNil",function(){return 0}),n.defineProperty(Number.prototype,"notNil",function(){return 1}),n.defineProperty(Number.prototype,"bitNot",function(){return~this}),n.defineProperty(Number.prototype,"abs",function(){return Math.abs(this)}),n.defineProperty(Number.prototype,"asFloat",function(){return+this}),n.defineProperty(Number.prototype,"asInt",function(){return 0|this}),n.defineProperty(Number.prototype,"ceil",function(){return Math.ceil(this)}),n.defineProperty(Number.prototype,"floor",function(){return Math.floor(this)}),n.defineProperty(Number.prototype,"frac",function(){return 0>this?1+(this-(0|this)):this-(0|this)}),n.defineProperty(Number.prototype,"sign",function(){return 0===this?0:this>0?1:-1}),n.defineProperty(Number.prototype,"squared",function(){return this*this}),n.defineProperty(Number.prototype,"cubed",function(){return this*this*this}),n.defineProperty(Number.prototype,"sqrt",function(){return Math.sqrt(Math.abs(this))}),n.defineProperty(Number.prototype,"exp",function(){return Math.exp(this)}),n.defineProperty(Number.prototype,"reciprocal",function(){return 1/this}),n.defineProperty(Number.prototype,"midicps",function(){return 440*Math.pow(2,1*(this-69)/12)}),n.defineProperty(Number.prototype,"cpsmidi",function(){return Math.log(1*Math.abs(this)/440)*Math.LOG2E*12+69}),n.defineProperty(Number.prototype,"midiratio",function(){return Math.pow(2,1*this/12)}),n.defineProperty(Number.prototype,"ratiomidi",function(){return Math.log(Math.abs(this))*Math.LOG2E*12}),n.defineProperty(Number.prototype,"dbamp",function(){return Math.pow(10,.05*this)}),n.defineProperty(Number.prototype,"ampdb",function(){return Math.log(Math.abs(this))*Math.LOG10E*20}),n.defineProperty(Number.prototype,"octcps",function(){return 440*Math.pow(2,this-4.75)}),n.defineProperty(Number.prototype,"cpsoct",function(){return Math.log(1*Math.abs(this)/440)*Math.LOG2E+4.75}),n.defineProperty(Number.prototype,"log",function(){return Math.log(Math.abs(this))}),n.defineProperty(Number.prototype,"log2",function(){return Math.log(Math.abs(this))*Math.LOG2E}),n.defineProperty(Number.prototype,"log10",function(){return Math.log(Math.abs(this))*Math.LOG10E}),n.defineProperty(Number.prototype,"sin",function(){return Math.sin(this)}),n.defineProperty(Number.prototype,"cos",function(){return Math.cos(this)}),n.defineProperty(Number.prototype,"tan",function(){return Math.tan(this)}),n.defineProperty(Number.prototype,"asin",function(){return Math.asin(Math.max(-1,Math.min(this,1)))}),n.defineProperty(Number.prototype,"acos",function(){return Math.acos(Math.max(-1,Math.min(this,1)))}),n.defineProperty(Number.prototype,"atan",function(){return Math.atan(this)}),n.defineProperty(Number.prototype,"sinh",function(){return.5*(Math.pow(Math.E,this)-Math.pow(Math.E,-this))}),n.defineProperty(Number.prototype,"cosh",function(){return.5*(Math.pow(Math.E,this)+Math.pow(Math.E,-this))}),n.defineProperty(Number.prototype,"tanh",function(){return this.sinh()/this.cosh()}),n.defineProperty(Number.prototype,"rand",function(){return u()*this}),n.defineProperty(Number.prototype,"rand2",function(){return(2*u()-1)*this}),n.defineProperty(Number.prototype,"linrand",function(){return Math.min(u(),u())*this}),n.defineProperty(Number.prototype,"bilinrand",function(){return(u()-u())*this}),n.defineProperty(Number.prototype,"sum3rand",function(){return.666666667*(u()+u()+u()-1.5)*this}),n.defineProperty(Number.prototype,"distort",function(){return this/(1+Math.abs(this))}),n.defineProperty(Number.prototype,"softclip",function(){var t=Math.abs(this);return.5>=t?this:(t-.25)/this}),n.defineProperty(Number.prototype,"coin",function(){return u()<this}),n.defineProperty(Number.prototype,"digitvalue",function(){return 0}),n.defineProperty(Number.prototype,"silence",function(){return 0}),n.defineProperty(Number.prototype,"thru",function(){return 0}),n.defineProperty(Number.prototype,"rectWindow",function(){return 0}),n.defineProperty(Number.prototype,"hanWindow",function(){return 0}),n.defineProperty(Number.prototype,"welWindow",function(){return 0}),n.defineProperty(Number.prototype,"triWindow",function(){return 0}),n.defineProperty(Number.prototype,"ramp",function(){return 0}),n.defineProperty(Number.prototype,"scurve",function(){return 0}),n.defineProperty(Number.prototype,"numunaryselectors",function(){return 0}),n.defineProperty(Number.prototype,"num",function(){return+this}),n.defineProperty(Number.prototype,"tilde",function(){return~this}),n.defineProperty(Number.prototype,"pi",function(){return this*Math.PI}),n.defineProperty(Number.prototype,"to_i",function(){return 0|this}),n.defineProperty(Number.prototype,"half",function(){return.5*this}),n.defineProperty(Number.prototype,"twice",function(){return 2*this}),n.defineBinaryProperty(Number.prototype,"__add__",function(t){return this+t}),n.defineBinaryProperty(Number.prototype,"__sub__",function(t){return this-t}),n.defineBinaryProperty(Number.prototype,"__mul__",function(t){return this*t}),n.defineBinaryProperty(Number.prototype,"__div__",function(t){return 0===this&&0===t?0:this/t}),n.defineBinaryProperty(Number.prototype,"__mod__",function(t){return 0===t?0:this%t}),n.defineBinaryProperty(Number.prototype,"eq",function(t){return this===t?1:0}),n.defineBinaryProperty(Number.prototype,"ne",function(t){return this!==t?1:0}),n.defineBinaryProperty(Number.prototype,"lt",function(t){return t>this?1:0}),n.defineBinaryProperty(Number.prototype,"gt",function(t){return this>t?1:0}),n.defineBinaryProperty(Number.prototype,"le",function(t){return t>=this?1:0}),n.defineBinaryProperty(Number.prototype,"ge",function(t){return this>=t?1:0}),n.defineBinaryProperty(Number.prototype,"bitAnd",function(t){return this&t}),n.defineBinaryProperty(Number.prototype,"bitOr",function(t){return this|t}),n.defineBinaryProperty(Number.prototype,"bitXor",function(t){return this^t}),n.defineBinaryProperty(Number.prototype,"min",function(t){return Math.min(this,t)}),n.defineBinaryProperty(Number.prototype,"max",function(t){return Math.max(this,t)});var o=function(t,e,i){for(t=0|t,e=0|e;0!==e;)i=t%e,t=e,e=i;return Math.abs(t)};n.defineBinaryProperty(Number.prototype,"lcm",function(t){return 0===this&&0===t?0:Math.abs(this*t)/o(this,t)}),n.defineBinaryProperty(Number.prototype,"gcd",function(t){return o(this,t)}),n.defineBinaryProperty(Number.prototype,"round",function(t){return 0===t?this:Math.round(this/t)*t}),n.defineBinaryProperty(Number.prototype,"roundUp",function(t){return 0===t?this:Math.ceil(this/t)*t}),n.defineBinaryProperty(Number.prototype,"roundDown",function(t){return 0===t?this:Math.floor(this/t)*t}),n.defineBinaryProperty(Number.prototype,"trunc",function(t){return 0===t?this:Math.floor(this/t)*t}),n.defineBinaryProperty(Number.prototype,"atan2",function(t){return Math.atan2(this,t)}),n.defineBinaryProperty(Number.prototype,"hypot",function(t){return Math.sqrt(this*this+t*t)}),n.defineBinaryProperty(Number.prototype,"hypotApx",function(t){var e=Math.abs(this),i=Math.abs(t),s=Math.min(e,i);return e+i-(Math.sqrt(2)-1)*s}),n.defineBinaryProperty(Number.prototype,"pow",function(t){return Math.pow(Math.abs(this),t)}),n.defineBinaryProperty(Number.prototype,"leftShift",function(t){return 0>t?(0|this)>>(0|-t):(0|this)<<(0|t)}),n.defineBinaryProperty(Number.prototype,"rightShift",function(t){return 0>t?(0|this)<<(0|-t):(0|this)>>(0|t)}),n.defineBinaryProperty(Number.prototype,"unsignedRightShift",function(t){return 0>t?(0|this)<<(0|-t):(0|this)>>(0|t)}),n.defineBinaryProperty(Number.prototype,"fill",function(){return 0}),n.defineBinaryProperty(Number.prototype,"ring1",function(t){return this*t+this}),n.defineBinaryProperty(Number.prototype,"ring2",function(t){return this*t+this+t}),n.defineBinaryProperty(Number.prototype,"ring3",function(t){return this*this*t}),n.defineBinaryProperty(Number.prototype,"ring4",function(t){return this*this*t-this*t*t}),n.defineBinaryProperty(Number.prototype,"difsqr",function(t){return this*this-t*t}),n.defineBinaryProperty(Number.prototype,"sumsqr",function(t){return this*this+t*t}),n.defineBinaryProperty(Number.prototype,"sqrsum",function(t){return(this+t)*(this+t)}),n.defineBinaryProperty(Number.prototype,"sqrdif",function(t){return(this-t)*(this-t)}),n.defineBinaryProperty(Number.prototype,"absdif",function(t){return Math.abs(this-t)}),n.defineBinaryProperty(Number.prototype,"thresh",function(t){return t>this?0:this}),n.defineBinaryProperty(Number.prototype,"amclip",function(t){return.5*this*(t+Math.abs(t))}),n.defineBinaryProperty(Number.prototype,"scaleneg",function(t){return t=.5*t+.5,(Math.abs(this)-this)*t+this}),n.defineBinaryProperty(Number.prototype,"clip2",function(t){return Math.max(-t,Math.min(this,t))}),n.defineBinaryProperty(Number.prototype,"excess",function(t){return this-Math.max(-t,Math.min(this,t))}),n.defineBinaryProperty(Number.prototype,"fold2",function(t){var e,i,s,n,r=this;if(e=r+t,r>=t){if(r=t+t-r,r>=-t)return r}else{if(!(-t>r))return r;if(r=-t-t-r,t>r)return r}return t===-t?-t:(s=t+t,n=s+s,i=e-n*Math.floor(e/n),i>=s&&(i=n-i),i-t)}),n.defineBinaryProperty(Number.prototype,"wrap2",function(t){var e,i=this;if(i>=t){if(e=t+t,i-=e,t>i)return i}else{if(!(-t>i))return i;if(e=t+t,i+=e,i>=-t)return i}return t===-t?-t:i-e*Math.floor((i+t)/e)}),n.defineBinaryProperty(Number.prototype,"firstarg",function(){return 0}),n.defineBinaryProperty(Number.prototype,"randrange",function(){return 0}),n.defineBinaryProperty(Number.prototype,"exprandrange",function(){return 0}),n.defineBinaryProperty(Number.prototype,"numbinaryselectors",function(){return 0}),n.defineProperty(Number.prototype,"madd",n(function(t,e){return s.createMulAdd(this,t,e)}).defaults(r.ARITY_OPS.madd).build()),n.defineArityProperty(Number.prototype,"range",n(function(t,e){return this.linlin(0,1,t,e)}).defaults(r.ARITY_OPS.range).build()),n.defineArityProperty(Number.prototype,"exprange",n(function(t,e){return this.linexp(0,1,t,e)}).defaults(r.ARITY_OPS.exprange).build()),n.defineArityProperty(Number.prototype,"curverange",n(function(t,e,i){return this.lincurve(0,1,t,e,i)}).defaults(r.ARITY_OPS.curverange).build()),n.defineArityProperty(Number.prototype,"unipolar",n(function(t){return this.__mul__(t)}).defaults(r.ARITY_OPS.unipolar).build()),n.defineArityProperty(Number.prototype,"bipolar",n(function(t){return(2*this-1).__mul__(t)}).defaults(r.ARITY_OPS.bipolar).build()),n.defineArityProperty(Number.prototype,"clip",n(function(t,e){return Math.max(t,Math.min(this,e))}).defaults(r.ARITY_OPS.clip).multiCall().build()),n.defineArityProperty(Number.prototype,"fold",n(function(t,e){var i,s,n,r=this;if(e===t)return t;if(r>=e){if(r=2*e-r,r>=t)return r}else{if(!(t>r))return r;if(r=2*t-r,e>r)return r}return s=e-t,n=2*s,i=r-t,i-=n*Math.floor(i/n),i>=s?n-i+t:i+t}).defaults(r.ARITY_OPS.fold).multiCall().build()),n.defineArityProperty(Number.prototype,"wrap",n(function(t,e){var i=this;if(e===t)return t;var s=e-t;if(i>=e){if(i-=s,e>i)return i}else{if(!(t>i))return i;if(i+=s,i>=t)return i}return i-s*Math.floor((i-t)/s)}).defaults(r.ARITY_OPS.wrap).multiCall().build()),n.defineArityProperty(Number.prototype,"blend",n(function(t,e){return this+e*(t-this)}).defaults(r.ARITY_OPS.wrap).multiCall().build()),n.defineProperty(Number.prototype,"lag",function(){return this}),n.defineProperty(Number.prototype,"lag2",function(){return this}),n.defineProperty(Number.prototype,"lag3",function(){return this}),n.defineProperty(Number.prototype,"lagud",function(){return this}),n.defineProperty(Number.prototype,"lag2ud",function(){return this}),n.defineProperty(Number.prototype,"lag3ud",function(){return this}),n.defineProperty(Number.prototype,"varlag",function(){return this}),n.defineProperty(Number.prototype,"slew",function(){return this}),n.defineArityProperty(Number.prototype,"linlin",n(function(t,e,i,s,n){switch(n){case"min":if(t>=this)return i;break;case"max":if(this>=e)return s;break;case"minmax":default:if(t>=this)return i;if(this>=e)return s}return this.__sub__(t).__div__(e.__sub__(t)).__mul__(s.__sub__(i)).__add__(i)}).defaults(r.ARITY_OPS.linlin).multiCall().build()),n.defineArityProperty(Number.prototype,"linexp",n(function(t,e,i,s,n){switch(n){case"min":if(t>=this)return i;break;case"max":if(this>=e)return s;break;case"minmax":default:if(t>=this)return i;if(this>=e)return s}return s.__div__(i).pow(this.__sub__(t).__div__(e.__sub__(t))).__mul__(i)}).defaults(r.ARITY_OPS.linexp).multiCall().build()),n.defineArityProperty(Number.prototype,"explin",n(function(t,e,i,s,n){switch(n){case"min":if(t>=this)return i;break;case"max":if(this>=e)return s;break;case"minmax":default:if(t>=this)return i;if(this>=e)return s}return this.__div__(t).log().__div__(e.__div__(t).log()).__mul__(s.__sub__(i)).__add__(i)}).defaults(r.ARITY_OPS.explin).multiCall().build()),n.defineArityProperty(Number.prototype,"expexp",n(function(t,e,i,s,n){switch(n){case"min":if(t>=this)return i;break;case"max":if(this>=e)return s;break;case"minmax":default:if(t>=this)return i;if(this>=e)return s}return s.__div__(i).pow(this.__div__(t).log().__div__(e.__div__(t).log())).__mul__(i)}).defaults(r.ARITY_OPS.expexp).multiCall().build()),n.defineArityProperty(Number.prototype,"lincurve",n(function(t,e,i,s,n,r){switch(r){case"min":if(t>=this)return i;break;case"max":if(this>=e)return s;break;case"minmax":default:if(t>=this)return i;if(this>=e)return s}if(Math.abs(n)<.001)return this.linlin(t,e,i,s,r);var a=n.exp(),u=s.__sub__(i).__div__(1..__sub__(a)),o=i.__add__(u),h=this.__sub__(t).__div__(e.__sub__(t));return o.__sub__(u.__mul__(a.pow(h)))}).defaults(r.ARITY_OPS.lincurve).multiCall().build()),n.defineArityProperty(Number.prototype,"curvelin",n(function(t,e,i,s,n,r){switch(r){case"min":if(t>=this)return i;break;case"max":if(this>=e)return s;break;case"minmax":default:if(t>=this)return i;if(this>=e)return s}if(Math.abs(n)<.001)return this.linlin(t,e,i,s,r);var a=n.exp(),u=s.__sub__(i).__div__(1..__sub__(a)),o=i.__add__(u),h=this.__sub__(t).__div__(e.__sub__(t));return o.__sub__(h).__div__(u).log().__div__(n)}).defaults(r.ARITY_OPS.curvelin).multiCall().build()),n.defineArityProperty(Number.prototype,"bilin",n(function(t,e,i,s,n,r,a){switch(a){case"min":if(e>=this)return n;break;case"max":if(this>=i)return r;break;case"minmax":default:if(e>=this)return n;if(this>=i)return r}return this>=t?this.linlin(t,i,s,r):this.linlin(e,t,n,s)}).defaults(r.ARITY_OPS.bilin).multiCall().build()),n.defineArityProperty(Number.prototype,"rrand",n(function(t){var e=this,i=t;return e+u()*(i-e)}).defaults(r.ARITY_OPS.rrand).multiCall().build()),n.defineArityProperty(Number.prototype,"exprand",n(function(t){var e=this,i=t;return 0===e?0:e*Math.exp(Math.log(i/e)*u())}).defaults(r.ARITY_OPS.exprand).multiCall().build());var h={"":[4,7],major:[4,7],minor:[3,7],major7:[4,7,11],dom7:[4,7,10],minor7:[3,7,10],aug:[4,8],dim:[3,6],dim7:[3,6,9],1:[],5:[7],"+5":[4,8],"m+5":[3,8],sus2:[2,7],sus4:[5,7],6:[4,7,9],m6:[3,7,9],"7sus2":[2,7,10],"7sus4":[5,7,10],"7-5":[4,6,10],"m7-5":[3,6,10],"7+5":[4,8,10],"m7+5":[3,8,10],9:[4,7,10,14],m9:[3,7,10,14],"m7+9":[3,7,10,14],maj9:[4,7,11,14],"9sus4":[5,7,10,14],"6*9":[4,7,9,14],"m6*9":[3,9,7,14],"7-9":[4,7,10,13],"m7-9":[3,7,10,13],"7-10":[4,7,10,15],"9+5":[10,13],"m9+5":[10,14],"7+5-9":[4,8,10,13],"m7+5-9":[3,8,10,13],11:[4,7,10,14,17],m11:[3,7,10,14,17],maj11:[4,7,11,14,17],"11+":[4,7,10,14,18],"m11+":[3,7,10,14,18],13:[4,7,10,14,17,21],m13:[3,7,10,14,17,21]};h.M=h.major,h.m=h.minor,h[7]=h.dom7,h.M7=h.major7,h.m7=h.minor7,h.augmented=h.aug,h.a=h.aug,h.diminished=h.dim,h.i=h.dim,h.diminished7=h.dim7,h.i7=h.dim7;var c=function(t,e,i,s){var n,r,a=h[e]||[],u=[t];for(n=0,r=a.length;r>n;++n)u.push(t+a[n]);if(i>=0)for(i=Math.max(0,Math.min(+i,u.length-1));i--;)u.push(u.shift()+12);else for(i=Math.max(0,Math.min(-i,u.length-1));i--;)u.unshift(u.pop()-12);if(s>=0)if(s<u.length)u=u.slice(0,s);else for(s-=u.length,n=0,r=s;r>n;++n)u.push(u[n]+12);return u};n.defineProperty(Number.prototype,"midichord",n(function(t,e,i){return c(this,t,e,i)}).defaults('name="",inversion=0,length=-1').multiCall().build()),n.defineProperty(Number.prototype,"chord",n(function(t,e,i){return s.deprecate.chord||(s.deprecate.chord=!0,s.global.console.log("Number#chord is now called `Number#midichord`")),c(this,t,e,i)}).defaults('name="",inversion=0,length=-1').multiCall().build()),n.defineProperty(Number.prototype,"cpschord",n(function(t,e,i){var s=this;return c(0,t,e,i).map(function(t){return s*Math.pow(2,1*t/12)})}).defaults('name="",inversion=0,length=-1').multiCall().build()),n.defineProperty(Number.prototype,"chordcps",n(function(t,e,i){var n=this;return s.deprecate.chordcps||(s.deprecate.chordcps=!0,s.global.console.log("Number#chordcps is now called `Number#cpschord`")),c(0,t,e,i).map(function(t){return n*Math.pow(2,1*t/12)})}).defaults('name="",inversion=0,length=-1').multiCall().build()),n.defineProperty(Number.prototype,"ratiochord",n(function(t,e,i){var s=Math.pow(2,1*this/12);return c(0,t,e,i).map(function(t){return s*Math.pow(2,1*t/12)})}).defaults('name="",inversion=0,length=-1').multiCall().build()),n.defineProperty(Number.prototype,"chordratio",n(function(t,e,i){var n=Math.pow(2,1*this/12);return s.deprecate.chordratio||(s.deprecate.chordratio=!0,s.global.console.log("Number#chordratio is now called `Number#ratiochord`")),c(0,t,e,i).map(function(t){return n*Math.pow(2,1*t/12)})}).defaults('name="",inversion=0,length=-1').multiCall().build()),function(){var t={C:0,D:2,E:4,F:5,G:7,A:9,B:11};Object.keys(t).forEach(function(e){for(var i=t[e],n=0;9>=n;++n)s.global[e+n]=i+12*(n+1)})}(),i.exports={}}),n("cc/lang/object",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/ops");n.defineProperty(s.Object.prototype,"clone",n(function(){return this}).defaults(r.COMMONS.clone).build()),n.defineProperty(s.Object.prototype,"dup",n(function(t,e){for(var i=new Array(0|t),s=0,n=i.length;n>s;++s)i[s]=this.clone(e);return i}).defaults(r.COMMONS.dup).build()),n.defineProperty(s.Object.prototype,"value",function(){return this}),n.defineProperty(s.Object.prototype,"valueArray",function(){return this}),n.defineProperty(s.Object.prototype,"do",function(t){return s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler?(s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsOnce(this)),this):(t(this,0),this)}),n.defineProperty(s.Object.prototype,"asUGenInput",function(){throw new Error(this.klassName+" can't cast to a UGen.")}),n.defineProperty(s.Object.prototype,"asString",function(){return this.klassName}),i.exports={}}),n("cc/lang/pattern",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/extend"),a=t("../common/ops"),u=t("./utils"),o=function(t){return null!==t&&void 0!==t},h=function(t){return t instanceof p?t.next():t
},c=function(t){return t instanceof p?t:new v(u.asArray(t),1,0)},p=function(){function t(){this.klassName="Pattern",this._finished=!1}return r(t,s.Object),t.prototype.clone=function(){return this},t.prototype.next=function(){return null},t.prototype.nextN=function(t,e){for(var i=new Array(t),s=0;t>s;++s)i[s]=this.next(e);return i},t.prototype.reset=function(){return this},t.prototype.performWait=function(){return!this._finished},t.prototype.concat=function(t){return new v([this,t.clone()],1)},t.prototype["do"]=function(t){if(s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler)return s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsPattern(this)),this;var e=0,i=!0;do i=this.next(),o(i)&&t.apply(null,[i,e++]);while(i);return this},["__plus__","__minus__"].concat(Object.keys(a.UNARY_OPS)).forEach(function(e){/^[a-z_][a-zA-Z0-9_]*$/.test(e)&&(t.prototype[e]=function(){return new l(this,e)})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(a.BINARY_OPS)).forEach(function(e){/^[a-z_][a-zA-Z0-9_]*$/.test(e)&&(t.prototype[e]=function(t){return new f(this,e,t)})}),t}(),l=function(){function t(t,e){if(!Number.prototype.hasOwnProperty(e))throw new TypeError("Puop: operator '"+e+"' not supported");p.call(this),this.klassName="Puop",this._pattern=t,this._selector=e}return r(t,p),t.prototype.clone=function(){return new t(this._pattern.clone(),this._selector)},t.prototype.next=function(){if(!this._finished){var t=this._pattern.next();if(o(t))return t[this._selector].call(t);this._finished=!0}return null},t}(),f=function(){function t(t,e,i){if(!Number.prototype.hasOwnProperty(e))throw new TypeError("Pbop: operator '"+e+"' not supported");p.call(this),this.klassName="Pbop",this._pattern=t,this._selector=e,this._b=i}return r(t,p),t.prototype.clone=function(){return new t(this._pattern.clone(),this._selector)},t.prototype.next=function(){if(!this._finished){var t=this._pattern.next();if(o(t))return t[this._selector].call(t,this._b);this._finished=!0}return null},t}(),_=function(){function t(t,e,i){p.call(this),this.klassName="Pgeom",this._start=u.asNumber(t),this._grow=u.asNumber(e),this._length=u.asNumber(i),this._pos=0,this._value=this._start}return r(t,p),t.prototype.clone=function(){return new t(this._start,this._grow,this._length)},t.prototype.next=function(){if(this._pos<this._length){var t=this._value;return this._value*=this._grow,this._pos+=1,t}return this._pos=1/0,this._finished=!0,null},t.prototype.reset=function(){return this._pos=0,this._value=this._start,this._finished=!1,this},t}(),d=function(){function t(t,e,i){p.call(this),this.klassName="Pseries",this._start=u.asNumber(t),this._step=u.asNumber(e),this._length=u.asNumber(i),this._pos=0,this._value=this._start}return r(t,p),t.prototype.clone=function(){return new t(this._start,this._start,this._length)},t.prototype.next=function(){if(this._pos<this._length){var t=this._value;return this._value+=this._step,this._pos+=1,t}return this._pos=1/0,this._finished=!0,null},t.prototype.reset=function(){return this._pos=0,this._value=this._start,this._finished=!1,this},t}(),m=function(){function t(t,e,i){p.call(this),this.klassName="Pwhite",this._lo=u.asNumber(t),this._hi=u.asNumber(e),this._length=u.asNumber(i),this._pos=0}return r(t,p),t.prototype.clone=function(){return new t(this._lo,this._hi,this._length)},t.prototype.next=function(){return this._pos<this._length?(this._pos+=1,Math.random()*(this._hi-this._lo)+this._lo):(this._pos=1/0,this._finished=!0,null)},t}(),y=function(){function t(t,e,i){p.call(this),this.klassName="ListPattern",this.list=u.asArray(t),this.repeats=u.asNumber(e),this.offset=u.asNumber(i),this._pos=0,this._posMax=this.repeats,this._list=this.list}return r(t,p),t.prototype.clone=function(){return new this.constructor(this.list,this.repeats,this.offset)},t.prototype.next=function(){if(this._pos<this._posMax){var t=this._calcIndex(),e=this._list[t],i=h(e);return o(i)?(e instanceof p||(this._pos+=1),i):(e instanceof p&&e.reset(),this._pos+=1,this.next())}return this._pos=1/0,this._finished=!0,null},t.prototype.reset=function(){this._pos=0,this._finished=!1;for(var t=this.list,e=0,i=t.length;i>e;++e)t[e]instanceof p&&t[e].reset();return this},t}(),g=function(){function t(t,e,i){y.call(this,t,e,i),this.klassName="Pser"}return r(t,y),t.prototype._calcIndex=function(){return(this._pos+this.offset)%this.list.length},t}(),v=function(){function t(t,e,i){g.call(this,t,e,i),this.klassName="Pseq",this._posMax=this.repeats*this.list.length}return r(t,g),t}(),b=function(){function t(t,i){v.call(this,t,i,0),this.klassName="Pshuf",this._list=this.list.slice().sort(e)}r(t,v);var e=function(){return Math.random()-.5};return t}(),w=function(){function t(t,e){y.call(this,t,e,0),this.klassName="Prand"}return r(t,y),t.prototype._calcIndex=function(){return this.list.length*Math.random()|0},t}(),k=function(){function t(t,e){p.call(this),this._pattern=c(t),this._repeats=u.asNumber(e),this._i=0}return r(t,p),t.prototype.clone=function(){return new t(this._pattern.clone(),this._repeats)},t.prototype.next=function(){if(!this._finished){var t=this._pattern.next();if(o(t))return t;if(this._i+=1,this._i!==this._repeats)return this._pattern.reset(),this.next();this._finished=!0}return null},t.prototype.reset=function(){return this._finished=!1,this._i=0,this._pattern.reset(),this},t}(),N=function(){function t(t,e){p.call(this),this.klassName="Pfin",this._count=u.asNumber(t),this._pattern=c(e),this._pos=0}return r(t,p),t.prototype.clone=function(){return new t(this._count,this._pattern.clone())},t.prototype.next=function(){if(this._pos<this._count){var t=this._pattern.next();if(o(t))return this._pos+=1,t;this._pos=1/0,this._finished=!0}return null},t.prototype.reset=function(){return this._finished=!1,this._pos=0,this._pattern.reset(),this},t}(),x=function(){function t(t,e){p.call(this),this.klassName="Pstutter",this._n=u.asNumber(t),this._pattern=c(e),this._i=t,this._val=null,0===this._n&&(this._finished=!0)}return r(t,p),t.prototype.clone=function(){return new t(this._n,this._p.clone())},t.prototype.next=function(){if(!this._finished){if(!(this._i>=this._n))return this._i+=1,this._val;var t=this._pattern.next();if(o(t))return this._val=t,this._i=1,t;this._finished=!0}return null},t.prototype.reset=function(){return this._i=this._n,this._pattern.reset(),0!==this._n&&(this._finished=!1),this},t}();s.global.Pgeom=n(function(t,e,i){return new _(t,e,i)}).defaults("start=0,grow=1,length=Infinity").build(),s.global.Pgeom["new"]=s.global.Pgeom,s.global.Pseries=n(function(t,e,i){return new d(t,e,i)}).defaults("start=0,step=1,length=Infinity").build(),s.global.Pseries["new"]=s.global.Pseries,s.global.Pwhite=n(function(t,e,i){return new m(t,e,i)}).defaults("lo=0,hi=1,length=Infinity").build(),s.global.Pwhite["new"]=s.global.Pwhite,s.global.Pser=n(function(t,e,i){return new g(t,e,i)}).defaults("list=[],repeats=1,offset=0").build(),s.global.Pser["new"]=s.global.Pser,s.global.Pseq=n(function(t,e,i){return new v(t,e,i)}).defaults("list,repeats=1,offset=0").build(),s.global.Pseq["new"]=s.global.Pseq,s.global.Pshuf=n(function(t,e){return new b(t,e)}).defaults("list=[],repeats=1").build(),s.global.Pshuf["new"]=s.global.Pshuf,s.global.Prand=n(function(t,e){return new w(t,e)}).defaults("list=[],repeats=1").build(),s.global.Prand["new"]=s.global.Prand,s.global.Pn=n(function(t,e){return new k(t,e)}).defaults("pattern=[],repeats=Infinity").build(),s.global.Pn["new"]=s.global.Pn,s.global.Pfin=n(function(t,e){return new N(t,e)}).defaults("count=1,pattern=[]").build(),s.global.Pfin["new"]=s.global.Pfin,s.global.Pstutter=n(function(t,e){return new x(t,e)}).defaults("n=1,pattern=[]").build(),s.global.Pstutter["new"]=s.global.Pstutter,i.exports={Pattern:p,Puop:l,Pbop:f,Pgeom:_,Pseries:d,Pwhite:m,ListPattern:y,Pser:g,Pseq:v,Pshuf:b,Prand:w,Pn:k,Pfin:N,Pstutter:x}}),n("cc/lang/ref",function(t,e,i){var s=t("./cc"),n=t("./utils"),r=function(){function t(t){this.klassName="Ref",this._value=t}return t.prototype.value=function(){return this._value},t.prototype.asUGenInput=function(){return this},t.prototype.dereference=t.prototype.value,t.prototype.multichannelExpandRef=function(e){var i=n.asArray(this._value);if(n.maxSizeAtDepth(i,e)<=1)return this;var s=n.flopDeep(i,e).map(function(e){return new t(e)});return n.unbubble(s,0,1)},t}();s.global.$=function(t){return new r(t)},s.instanceOfRef=function(t){return t instanceof r},i.exports={Ref:r}}),n("cc/lang/scale",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("../common/extend"),a=function(t){return t.map(function(t){return Math.log(t)*Math.LOG2E*12})},u=function(t){for(var e=new Array(t),i=0;t>=i;++i)e[i]=i;return e},o=function(){function t(t,e,i){this.klassName="Tuning",this._tuning=t,this._octaveRatio=e,this.name=i}return r(t,s.Object),t.prototype.semitones=function(){return this._tuning.slice()},t.prototype.cents=function(){return this._tuning.map(function(t){return 100*t})},t.prototype.ratios=function(){return this._tuning.map(function(t){return Math.pow(2,1*t/12)})},t.prototype.at=n(function(t){return this._tuning[t]}).multiCall().build(),t.prototype.wrapAt=n(function(t){return t%=this._tuning.length,0>t&&(t=this._tuning.length+t),this._tuning[t]}).multiCall().build(),t.prototype.octaveRatio=function(){return this._octaveRatio},t.prototype.size=function(){return this._tuning.length},t.prototype.stepsPerOctave=function(){return Math.log(this._octaveRatio)*Math.LOG2E*12},t.prototype.tuning=function(){return this._tuning},t.prototype.equals=function(e){return e instanceof t&&this._octaveRatio===e._octaveRatio&&this._tuning.every(function(t,i){return t===e._tuning[i]},this)},t.prototype.copy=function(){return new t(this._tuning.slice(0),this._octaveRatio,this.name)},t}(),h={et12:[[0,1,2,3,4,5,6,7,8,9,10,11],2,"ET12"],pythagorean:[a([1,256/243,9/8,32/27,81/64,4/3,729/512,1.5,128/81,27/16,16/9,243/128]),2,"Pythagorean"],just:[a([1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,1.8,15/8]),2,"Limit Just Intonation"],sept1:[a([1,16/15,9/8,1.2,5/4,4/3,1.4,1.5,1.6,5/3,1.8,15/8]),2,"Septimal Tritone Just Intonation"],sept2:[a([1,16/15,9/8,1.2,5/4,4/3,1.4,1.5,1.6,5/3,7/4,15/8]),2,"7-Limit Just Intonation"],mean4:[[0,.755,1.93,3.105,3.86,5.035,5.79,6.965,7.72,8.895,10.07,10.82],2,"Meantone, 1/4 Syntonic Comma"],mean5:[[0,.804,1.944,3.084,3.888,5.028,5.832,6.972,7.776,8.916,10.056,10.86],2,"Meantone, 1/5 Pythagorean Comma"],mean6:[[0,.86,1.96,3.06,3.92,5.02,5.88,6.98,7.84,8.94,10.04,10.9],2,"Meantone, 1/6 Pythagorean Comma"],kirnberger:[a([1,256/243,Math.sqrt(5)/2,32/27,5/4,4/3,45/32,Math.pow(5,.25),128/81,Math.pow(5,.75)/2,16/9,15/8]),2,"Kirnberger III"],werckmeister:[[0,.92,1.93,2.94,3.915,4.98,5.9,6.965,7.93,8.895,9.96,10.935],2,"Werckmeister III"],vallotti:[[0,.94135,1.9609,2.98045,3.9218,5.01955,5.9218,6.98045,7.9609,8.94135,10,10.90225],2,"Vallotti"],young:[[0,.9,1.96,2.94,3.92,4.98,5.88,6.98,7.92,8.94,9.96,10.9],2,"Young"],reinhard:[a([1,14/13,13/12,16/13,1.3,18/13,13/9,20/13,13/8,22/13,13/7,208/105]),2,"Mayumi Reinhard"],wcHarm:[a([1,17/16,9/8,19/16,5/4,21/16,11/8,1.5,13/8,27/16,7/4,15/8]),2,"Wendy Carlos Harmonic"],wcSJ:[a([1,17/16,9/8,1.2,5/4,4/3,11/8,1.5,13/8,5/3,7/4,15/8]),2,"Wendy Carlos Super Just"],lu:[a([1,2187/2048,9/8,19683/16384,81/64,177147/131072,729/612,1.5,6561/4096,27/16,59049/32768,243/128]),2,"Chinese Shi-er-lu scale"],et19:[u(18).map(function(t){return 12*t/19}),2,"ET19"],et22:[u(22).map(function(t){return 12*t/22}),2,"ET22"],et24:[u(24).map(function(t){return 12*t/24}),2,"ET24"],et31:[u(31).map(function(t){return 12*t/31}),2,"ET31"],et41:[u(41).map(function(t){return 12*t/41}),2,"ET41"],et53:[u(53).map(function(t){return 12*t/53}),2,"ET53"],johnston:[a([1,25/24,135/128,16/15,10/9,9/8,75/64,1.2,5/4,81/64,1.28,4/3,1.35,45/32,1.44,1.5,25/16,1.6,5/3,27/16,225/128,16/9,1.8,15/8,1.92]),2,"Ben Johnston"],partch:[a([1,81/80,33/32,1.05,16/15,12/11,1.1,10/9,9/8,8/7,7/6,32/27,1.2,11/9,5/4,14/11,9/7,21/16,4/3,1.35,11/8,1.4,10/7,16/11,40/27,1.5,32/21,14/9,11/7,1.6,18/11,5/3,27/16,12/7,7/4,16/9,1.8,20/11,11/6,15/8,40/21,64/33,160/81]),2,"Harry Partch"],catler:[a([1,33/32,16/15,9/8,8/7,7/6,1.2,128/105,16/13,5/4,21/16,4/3,11/8,45/32,16/11,1.5,1.6,13/8,5/3,27/16,7/4,16/9,24/13,15/8]),2,"Jon Catler"],chalmers:[a([1,1.05,16/15,9/8,7/6,1.2,5/4,21/16,4/3,1.4,35/24,1.5,1.575,1.6,5/3,7/4,1.8,28/15,63/32]),2,"John Chalmers"],harrison:[a([1,16/15,10/9,8/7,7/6,1.2,5/4,4/3,17/12,1.5,1.6,5/3,12/7,7/4,1.8,15/8]),2,"Lou Harrison"],sruti:[a([1,256/243,16/15,10/9,9/8,32/27,1.2,5/4,81/64,4/3,1.35,45/32,729/512,1.5,128/81,1.6,5/3,27/16,16/9,1.8,15/8,243/128]),2,"Sruti"],parret:[a([1,1.05,35/32,9/8,7/6,1.2,5/4,21/16,4/3,1.4,35/24,1.5,1.575,1.6,5/3,7/4,1.8,15/8,63/32]),2,"Wilfrid Perret"],michael_harrison:[a([1,28/27,135/128,16/15,243/224,9/8,8/7,7/6,32/27,1.2,135/112,5/4,81/64,9/7,21/16,4/3,112/81,45/32,64/45,81/56,1.5,32/21,14/9,128/81,1.6,224/135,5/3,27/16,12/7,7/4,16/9,15/8,243/128,27/14]),2,"Michael Harrison 24 tone 7-limit"],harmonic:[a(u(24).slice(1)),2,"Harmonic Series 24"],bp:[a(u(12).map(function(t){return 19.019550008654*t/13})),3,"Bohlen-Pierce"],wcAlpha:[u(14).map(function(t){return.78*t}),1.9656411970852,"Wendy Carlos Alpha"],wcBeta:[u(18).map(function(t){return.638*t}),2.0141437696805,"Wendy Carlos Beta"],wcGamma:[u(33).map(function(t){return.351*t}),1.9923898962606,"Wendy Carlos Gamma"]};s.global.Tuning=n(function(t,e,i){return Array.isArray(t)||(t=[0,1,2,3,4,5,6,7,8,9,10,11]),"number"!=typeof e&&(e=2),"string"!=typeof i&&(i="Unknown Tuning"),new o(t,e,i)}).defaults("tuning,octaveRatio,name").build(),s.global.Tuning["new"]=s.global.Tuning;var c={};Object.keys(h).forEach(function(t){var e=h[t];c[t]=new o(e[0],e[1],e[2]),s.global.Tuning[t]=c[t]}),s.global.Tuning.at=function(t){var e=c[t];return e?e.copy():c.et12.copy()},s.global.Tuning.choose=n(function(t){"number"!=typeof t&&(t=12);for(var e,i=[],s=Object.keys(c),n=0,r=s.length;r>n;++n)e=c[s[n]],e._tuning.length===t&&i.push(e);return e=i[Math.random()*i.length|0],e?e.copy():c.et12.copy()}).multiCall().build(),s.global.Tuning.et=function(t){for(var e=new Array(t),i=0;t>i;++i)e[i]=i*(12/t);return new o(e,2,"ET"+t)},s.global.Tuning.names=function(){return Object.keys(c).sort()};var p=function(){function t(t,e,i,s){this.klassName="Scale",this._degrees=t,this._pitchesPerOctave=e,this.name=s,this.tuning(i)}r(t,s.Object),t.prototype.tuning=function(t){if(0===arguments.length)return this._tuning;if("string"==typeof t&&(t=c[t]),!(t instanceof o))throw new TypeError("Scale: arguments[2] should be a tuning.");if(this._pitchesPerOctave!==t.size())throw new TypeError("Scale steps per octave "+this._pitchesPerOctave+" does not match tuning size.");return this._tuning=t,t},t.prototype.semitones=function(){return this._degrees.map(function(t){return this._tuning.wrapAt(t)},this)},t.prototype.cents=function(){return this.semitones().map(function(t){return 100*t})},t.prototype.ratios=function(){return this.semitones().map(function(t){return Math.pow(2,1*t/12)})},t.prototype.size=function(){return this._degrees.length},t.prototype.pitchesPerOctave=function(){return this._pitchesPerOctave},t.prototype.stepsPerOctave=function(){return Math.log(this.octaveRatio())*Math.LOG2E*12},t.prototype.at=n(function(t){return t%=this._degrees.length,0>t&&(t=this._degrees.length+t),this._tuning.at(this._degrees[t])}).multiCall().build(),t.prototype.wrapAt=n(function(t){return t%=this._degrees.length,0>t&&(t=this._degrees.length+t),this._tuning.wrapAt(this._degrees[t])}).multiCall().build(),t.prototype.degreeToFreq=n(function(t,i,s){return e(this,t,s)*i}).defaults("degree=0,rootFreq=0,octave=0").multiCall().build(),t.prototype.degreeToRatio=n(function(t,i){return e(this,t,i)}).defaults("degree=0,octave=0").multiCall().build(),t.prototype.degrees=function(){return this._degrees},t.prototype.octaveRatio=function(){return this._tuning.octaveRatio()},t.prototype.equals=function(e){return e instanceof t&&this._degrees.every(function(t,i){return t===e._degrees[i]})&&this._tuning.equals(e._tuning)},t.prototype.copy=function(){return new t(this._degrees.slice(),this._pitchesPerOctave,this._tuning.copy(),this.name)};var e=function(t,e,i){var s=t.ratios(),n=e%s.length;return i+=e/t._degrees.length|0,0>n&&(n=s.length+n,i-=Math.ceil(n/s.length)),s[n]*Math.pow(t.octaveRatio(),i)};return t}(),l=function(t){var e,i=t[0]||0;for(e=t.length;e--;)i<t[e]&&(i=t[e]);var s=[53,24,19,12];for(e=s.length;e--;)if(i<s[e])return s[e];return 128},f={major:[[0,2,4,5,7,9,11],12,0,"Major"],minor:[[0,2,3,5,7,8,10],12,0,"Natural Minor"],minorPentatonic:[[0,3,5,7,10],12,0,"Minor Pentatonic"],majorPentatonic:[[0,2,4,7,9],12,0,"Major Pentatonic"],ritusen:[[0,2,5,7,9],12,0,"Ritusen"],egyptian:[[0,2,5,7,10],12,0,"Egyptian"],kumoi:[[0,2,3,7,9],12,0,"Kumoi"],hirajoshi:[[0,2,3,7,8],12,0,"Hirajoshi"],iwato:[[0,1,5,6,10],12,0,"Iwato"],ryukyu:[[0,4,5,7,11],12,0,"Ryukyu"],chinese:[[0,4,6,7,11],12,0,"Chinese"],indian:[[0,4,5,7,10],12,0,"Indian"],pelog:[[0,1,3,7,8],12,0,"Pelog"],prometheus:[[0,2,4,6,11],12,0,"Prometheus"],scriabin:[[0,1,4,7,9],12,0,"Scriabin"],gong:[[0,2,4,7,9],12,0,"Gong"],shang:[[0,2,5,7,10],12,0,"Shang"],jiao:[[0,3,5,8,10],12,0,"Jiao"],zhi:[[0,2,5,7,9],12,0,"Zhi"],yu:[[0,3,5,7,10],12,0,"Yu"],whole:[[0,2,4,6,8,10],12,0,"Whole Tone"],augmented:[[0,3,4,7,8,11],12,0,"Augmented"],augmented2:[[0,1,4,5,8,9],12,0,"Augmented 2"],partch_o1:[[0,8,14,20,25,34],43,"partch","Partch Otonality 1"],partch_o2:[[0,7,13,18,27,35],43,"partch","Partch Otonality 2"],partch_o3:[[0,6,12,21,29,36],43,"partch","Partch Otonality 3"],partch_o4:[[0,5,15,23,30,37],43,"partch","Partch Otonality 4"],partch_o5:[[0,10,18,25,31,38],43,"partch","Partch Otonality 5"],partch_o6:[[0,9,16,22,28,33],43,"partch","Partch Otonality 6"],partch_u1:[[0,9,18,23,29,35],43,"partch","Partch Utonality 1"],partch_u2:[[0,8,16,25,30,36],43,"partch","Partch Utonality 2"],partch_u3:[[0,7,14,22,31,37],43,"partch","Partch Utonality 3"],partch_u4:[[0,6,13,20,28,38],43,"partch","Partch Utonality 4"],partch_u5:[[0,5,12,18,25,33],43,"partch","Partch Utonality 5"],partch_u6:[[0,10,15,21,27,34],43,"partch","Partch Utonality 6"],hexMajor7:[[0,2,4,7,9,11],12,0,"Hex Major 7"],hexDorian:[[0,2,3,5,7,10],12,0,"Hex Dorian"],hexPhrygian:[[0,1,3,5,8,10],12,0,"Hex Phrygian"],hexSus:[[0,2,5,7,9,10],12,0,"Hex Sus"],hexMajor6:[[0,2,4,5,7,9],12,0,"Hex Major 6"],hexAeolian:[[0,3,5,7,8,10],12,0,"Hex Aeolian"],ionian:[[0,2,4,5,7,9,11],12,0,"Ionian"],dorian:[[0,2,3,5,7,9,10],12,0,"Dorian"],phrygian:[[0,1,3,5,7,8,10],12,0,"Phrygian"],lydian:[[0,2,4,6,7,9,11],12,0,"Lydian"],mixolydian:[[0,2,4,5,7,9,10],12,0,"Mixolydian"],aeolian:[[0,2,3,5,7,8,10],12,0,"Aeolian"],locrian:[[0,1,3,5,6,8,10],12,0,"Locrian"],harmonicMinor:[[0,2,3,5,7,8,11],12,0,"Harmonic Minor"],harmonicMajor:[[0,2,4,5,7,8,11],12,0,"Harmonic Major"],melodicMinor:[[0,2,3,5,7,9,11],12,0,"Melodic Minor"],melodicMinorDesc:[[0,2,3,5,7,8,10],12,0,"Melodic Minor Descending"],melodicMajor:[[0,2,4,5,7,8,10],12,0,"Melodic Major"],bartok:[[0,2,4,5,7,8,10],12,0,"Bartok"],hindu:[[0,2,4,5,7,8,10],12,0,"Hindu"],todi:[[0,1,3,6,7,8,11],12,0,"Todi"],purvi:[[0,1,4,6,7,8,11],12,0,"Purvi"],marva:[[0,1,4,6,7,9,11],12,0,"Marva"],bhairav:[[0,1,4,5,7,8,11],12,0,"Bhairav"],ahirbhairav:[[0,1,4,5,7,9,10],12,0,"Ahirbhairav"],superLocrian:[[0,1,3,4,6,8,10],12,0,"Super Locrian"],romanianMinor:[[0,2,3,6,7,9,10],12,0,"Romanian Minor"],hungarianMinor:[[0,2,3,6,7,8,11],12,0,"Hungarian Minor"],neapolitanMinor:[[0,1,3,5,7,8,11],12,0,"Neapolitan Minor"],enigmatic:[[0,1,4,6,8,10,11],12,0,"Enigmatic"],spanish:[[0,1,4,5,7,8,10],12,0,"Spanish"],leadingWhole:[[0,2,4,6,8,10,11],12,0,"Leading Whole Tone"],lydianMinor:[[0,2,4,6,7,8,10],12,0,"Lydian Minor"],neapolitanMajor:[[0,1,3,5,7,9,11],12,0,"Neapolitan Major"],locrianMajor:[[0,2,4,5,6,8,10],12,0,"Locrian Major"],diminished:[[0,1,3,4,6,7,9,10],12,0,"Diminished"],diminished2:[[0,2,3,5,6,8,9,11],12,0,"Diminished 2"],chromatic:[[0,1,2,3,4,5,6,7,8,9,10,11],12,0,"Chromatic"],chromatic24:[u(23),24,0,"Chromatic 24"],ajam:[[0,4,8,10,14,18,22],24,0,"Ajam"],jiharkah:[[0,4,8,10,14,18,21],24,0,"Jiharkah"],shawqAfza:[[0,4,8,10,14,16,22],24,0,"Shawq Afza"],sikah:[[0,3,7,11,14,17,21],24,0,"Sikah"],sikahDesc:[[0,3,7,11,13,17,21],24,0,"Sikah Descending"],huzam:[[0,3,7,9,15,17,21],24,0,"Huzam"],iraq:[[0,3,7,10,13,17,21],24,0,"Iraq"],bastanikar:[[0,3,7,10,13,15,21],24,0,"Bastanikar"],mustar:[[0,5,7,11,13,17,21],24,0,"Mustar"],bayati:[[0,3,6,10,14,16,20],24,0,"Bayati"],karjighar:[[0,3,6,10,12,18,20],24,0,"Karjighar"],husseini:[[0,3,6,10,14,17,21],24,0,"Husseini"],nahawand:[[0,4,6,10,14,16,22],24,0,"Nahawand"],nahawandDesc:[[0,4,6,10,14,16,20],24,0,"Nahawand Descending"],farahfaza:[[0,4,6,10,14,16,20],24,0,"Farahfaza"],murassah:[[0,4,6,10,12,18,20],24,0,"Murassah"],ushaqMashri:[[0,4,6,10,14,17,21],24,0,"Ushaq Mashri"],rast:[[0,4,7,10,14,18,21],24,0,"Rast"],rastDesc:[[0,4,7,10,14,18,20],24,0,"Rast Descending"],suznak:[[0,4,7,10,14,16,22],24,0,"Suznak"],nairuz:[[0,4,7,10,14,17,20],24,0,"Nairuz"],yakah:[[0,4,7,10,14,18,21],24,0,"Yakah"],yakahDesc:[[0,4,7,10,14,18,20],24,0,"Yakah Descending"],mahur:[[0,4,7,10,14,18,22],24,0,"Mahur"],hijaz:[[0,2,8,10,14,17,20],24,0,"Hijaz"],hijazDesc:[[0,2,8,10,14,16,20],24,0,"Hijaz Descending"],zanjaran:[[0,2,8,10,14,16,22],24,0,"Zanjaran"],saba:[[0,3,6,8,12,16,20],24,0,"Saba"],zamzam:[[0,2,6,8,14,16,20],24,0,"Zamzam"],kurd:[[0,2,6,10,14,16,20],24,0,"Kurd"],kijazKarKurd:[[0,2,8,10,14,16,22],24,0,"Kijaz Kar Kurd"],nawaAthar:[[0,4,6,12,14,16,22],24,0,"Nawa Athar"],nikriz:[[0,4,6,12,14,18,20],24,0,"Nikriz"],atharKurd:[[0,2,6,12,14,16,22],24,0,"Athar Kurd"]};s.global.Scale=n(function(t,e,i,s){return Array.isArray(t)||(t=[0,2,4,5,7,9,11]),"number"!=typeof e&&(e=l(t)),"string"==typeof i&&(i=c[i]),i instanceof o||(i=c.et12),"string"!=typeof s&&(s="Unknown Scale"),new p(t,e,i,s)}).defaults("degrees,pitchesPerOctave,tuning,name").build(),s.global.Scale["new"]=s.global.Scale;var _={};Object.keys(f).forEach(function(t){var e=f[t];e[2]=e[2]?c[e[2]].copy():s.global.Tuning.et(e[1]),_[t]=new p(e[0],e[1],e[2],e[3]),s.global.Scale[t]=_[t]}),s.global.Scale.at=function(t,e){var i=_[t];return i=i?i.copy():_.major.copy(),e&&i.tuning(e),i},s.global.Scale.choose=n(function(t,e){"number"!=typeof t&&(t=7),"number"!=typeof e&&(e=12);for(var i,s=[],n=Object.keys(_),r=0,a=n.length;a>r;++r)i=_[n[r]],i._degrees.length===t&&i._pitchesPerOctave===e&&s.push(i);return i=s[Math.random()*s.length|0],i?i.copy():_.major.copy()}).multiCall().build(),s.global.Scale.names=function(){return Object.keys(_).sort()},i.exports={Scale:p,Tuning:o}}),n("cc/lang/string",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("./utils"),a=t("../common/ops"),u=t("../common/numericstring"),o=u.timevalue,h=u.notevalue,c=[].slice,p=function(t){return t=+t,isNaN(t)?0:t};n.defineProperty(String.prototype,"copy",function(){return this}),n.defineProperty(String.prototype,"clone",n(function(){return this}).defaults(a.COMMONS.clone).build()),n.defineProperty(String.prototype,"dup",n(function(t){for(var e=new Array(0|t),i=0,s=e.length;s>i;++i)e[i]=this;return e}).defaults(a.COMMONS.dup).build()),n.defineProperty(String.prototype,"value",function(){return this}),n.defineProperty(String.prototype,"valueArray",function(){return this}),n.defineProperty(String.prototype,"do",function(t){return s.instanceOfSyncBlock(t)&&s.currentSyncBlockHandler?(s.currentSyncBlockHandler.__sync__(t,s.createTaskArgumentsString(this)),this):(this.split("").forEach(t),this)}),n.defineProperty(String.prototype,"wait",function(){return this}),n.defineProperty(String.prototype,"asUGenInput",function(){throw new Error("String can't cast to a UGen.")}),n.defineProperty(String.prototype,"asString",function(){return this}),["__plus__","__minus__"].concat(Object.keys(a.UNARY_OPS)).forEach(function(t){n.defineProperty(String.prototype,t,function(){return p(this)[t]()})}),["__sub__"].concat(Object.keys(a.BINARY_OPS)).forEach(function(t){n.defineProperty(String.prototype,t,function(e){return p(this)[t](e)})}),n.defineProperty(String.prototype,"__add__",function(t){return t=t?t.asString?t.asString():t.toString():t,this+t});var l=function(){var t=function(e,i){if(1>i)return"";if(i%2)return t(e,i-1)+e;var s=t(e,i>>1);return s+s};return function(e,i){if(1/0===i)throw new RangeError;return t(e,0|i)}}();n.defineBinaryProperty(String.prototype,"__mul__",function(t){return"number"==typeof t?l(this,t):0}),n.defineBinaryProperty(String.prototype,"__div__",function(t){return"number"==typeof t?r.clump(this.split(""),Math.ceil(this.length/t)).map(function(t){return t.join("")}):0}),n.defineBinaryProperty(String.prototype,"__mod__",function(t){return"number"==typeof t?r.clump(this.split(""),Math.floor(t)).map(function(t){return t.join("")}):0}),Object.keys(a.ARITY_OPS).forEach(function(t){n.defineProperty(String.prototype,t,n(function(){var e=c.call(arguments);return 0[t].apply(p(this),e)}).defaults(a.ARITY_OPS[t]).multiCall().build())}),n.defineProperty(String.prototype,"time",function(){var t=o(this);return"string"==typeof t?0:t}),n.defineProperty(String.prototype,"note",function(){var t=h(this);return"string"==typeof t?0:t}),i.exports={}}),n("cc/lang/syncblock",function(t,e,i){var s=t("./cc"),n=function(t){var e=function(){return a.call(e),u.apply(e,arguments),e._result};return e._segments=t&&t.isSyncBlock?t._segments:"function"==typeof t?t():[],e._state=e._segments.length?1:2,e._pc=0,e._paused=!1,e._child=null,e._result=void 0,e.isSyncBlock=!0,e.clone=r,e.reset=a,e.perform=u,e.performWait=o,e.performWaitState=h,e},r=function(){return n(this)},a=function(){this._state=this._segments.length?1:2,this._pc=0,this._paused=!1,this._child=null,this._result=void 0},u=function(){var t,e=this._segments,i=this._pc,n=e.length;if(2!==this._state){if(this._child){if(this.perform.apply(this._child,arguments),1===this._child._state)return;this._child=null}for(s.currentSyncBlock=this,this._paused=!1;n>i&&(t=e[i++].apply(null,arguments),!this._paused);)if(t&&t.isSyncBlock){this._child=t;break}i>=n&&!this._paused&&(this._state=2,this._result=t),this._paused=!1,s.currentSyncBlock=null,this._pc=i}},o=function(){return 1===this._state},h=function(){return 1===this._state};s.global.syncblock=function(t){return n(t)},s.instanceOfSyncBlock=function(t){return t&&!!t.isSyncBlock},s.pauseSyncBlock=function(){s.currentSyncBlock&&(s.currentSyncBlock._paused=!0)},i.exports={}}),n("cc/lang/synthdef",function(t,e,i){var s=t("./cc"),n=t("./utils"),r=t("../common/extend"),a=[].push,u=0,o=function(){function t(t){this.klassName="SynthDef",this.name=t,this._sent=!1,this._defId=u++,this._children=[],this._args=[],this.specs={}}return r(t,s.Object),t.prototype.send=function(){return this._sent||(s.lang.pushToTimeline(["/s_def",this._defId,this.specs]),this._sent=!0),this},t.prototype.add=t.prototype.send,t.prototype.play=function(){this.send();var t=h.apply(null,arguments),e=t[0],i=t[1],n=t[2];switch(n){case"addToHead":return s.global.Synth(this,i,e,0);case"addToTail":return s.global.Synth(this,i,e,1);case"addBefore":return s.global.Synth(this,i,e,2);case"addAfter":return s.global.Synth(this,i,e,3);default:return s.global.Synth(this,i,e,0)}},t}(),h=function(){var t,e,i,r=0;return t=s.instanceOfNode(arguments[r])?arguments[r++]:s.lang.rootNode,n.isDict(arguments[r])&&(e=arguments[r++]),i="string"==typeof arguments[r]?arguments[r]:"addToHead",e&&1===arguments.length&&(s.instanceOfNode(e.target)&&(t=e.target,delete e.target),"string"==typeof e.addAction&&(i=e.addAction,delete e.addAction)),[t,e,i]},c=function(t,e,i,n,r,a){try{p(t),l(t,e,i,n,r),f(t,a),t.func=e}finally{s.setSynthDef(null)}},p=function(t){var e=t._children=[];s.setSynthDef(function(t){e.push(t)}),t._args=[]},l=function(t,e,i,s,n){var r=d(i,s,n.length);return a.apply(t._args,r),i=n.concat(A(r)),e.apply(null,i)},f=function(t){s.setSynthDef(null),t.specs=T(t.name,t._args,t._children)},_=function(t){return"Infinity"===t?1/0:"-Infinity"===t?-1/0:JSON.parse(t)},d=function(t,e,i){if(0===t.length)return[];var s=m(t),n=s.keys.slice(i),r=s.vals.slice(i).map(_);return g(r),N(n,r,e)},m=function(t){var e=[],i=[];if(t&&t.length)for(var s=0,n=t.length;n>s;s+=2)e.push(t[s+0]),i.push(t[s+1]);return{keys:e,vals:i}},y=function(t){return"number"==typeof t&&!isNaN(t)},g=function(t){for(var e=0,i=t.length;i>e;++e){var s=t[e];if(null!==s&&void 0!==s&&!(y(s)||Array.isArray(s)&&s.every(y)))throw"bad arguments:"+n.asString(s)}return!0},v=0,b=1,w=2,k=3,N=function(t,e,i){for(var s=[],r=0,a=t.length;a>r;++r){var u=t[r],o=e[r],h=i[r],c=u.substr(0,2);s[r]={index:r,name:u,value:o,lag:0},"ir"===h||"i_"===c?s[r].type=v:"tr"===h||"trig"===u||"t_"===c?s[r].type=b:"ar"===h||"a_"===c?s[r].type=k:(h=n.asNumber(h),s[r].type=w,s[r].lag=h)}return s},x=function(t){return t.value},A=function(t){var e,i,r,a,u=new Array(t.length),o=[],h=o[v]=[],c=o[b]=[],p=o[k]=[],l=o[w]=[];t.forEach(function(t){o[t.type].push(t)});var f=function(t,e){u[t.index]=a[e]};return h.length&&(e=h.map(x),a=s.createControl(0).init(n.flatten(e)),a=M(e,n.asArray(a)),h.forEach(f)),c.length&&(e=c.map(x),a=s.createTrigControl().init(n.flatten(e)),a=M(e,n.asArray(a)),c.forEach(f)),p.length&&(e=p.map(x),a=s.createAudioControl().init(n.flatten(e)),a=M(e,n.asArray(a)),p.forEach(f)),l.length&&(e=[],i=[],r=!1,l.forEach(function(t){e.push(t.value),n.asArray(t.value).forEach(function(){i.push(t.lag)}),0!==t.lag&&(r=!0)}),a=r?s.createLagControl().init(n.flatten(e),i):s.createControl(1).init(n.flatten(e)),a=M(e,n.asArray(a)),l.forEach(f)),u},M=function(t,e){for(var i=[],s=e.slice(),n=0,r=t.length;r>n;++n)i.push(Array.isArray(t[n])?s.splice(0,t[n].length):s.shift());return i},S=function(t,e){return t.type-e.type||t.index-e.index},R=function(t){return!("number"==typeof t||s.instanceOfOutputProxy(t))},P=function(t){return t.rate},T=function(t,e,i){var n=e.slice().sort(S),r={},u=0,o=r.values=[],h=r.names=[],c=r.indices=[],p=r.length=[];n.forEach(function(t){t.sortedIndex=u,Array.isArray(t.value)?(a.apply(o,t.value),t.length=t.value.length):(o.push(t.value),t.length=1),u+=t.length}),e.forEach(function(t){h.push(t.name),c.push(t.sortedIndex),p.push(t.length)});var l=[];i.forEach(function(t){t.inputs.forEach(function(t){"number"==typeof t&&-1===l.indexOf(t)&&l.push(t)})}),l.sort();var f=0;i.forEach(function(t){s.instanceOfControlUGen(t)&&(t.specialIndex=f,f+=t.channels.length)});var _=I(i).filter(R),d=r.values.length,m=_.map(function(t){var e=[];t.inputs.forEach(function(t){var i=_.indexOf(s.instanceOfOutputProxy(t)?t.inputs[0]:t),n=-1!==i?t.outputIndex:l.indexOf(t);e.push(i,n)});var i=[];t.channels?i=t.channels.map(P):1===t.numOutputs&&(i=[t.rate]);for(var n=0,r=i.length;r>n;++n)d+=2===i[n]?64:1;return[t.klassName,t.rate,0|t.specialIndex,e,i]});return{name:t,consts:l,params:r,defList:m,variants:{},heapSize:d}},I=function(){var t=function(e,i,s,n){if(n.indexOf(e)!==n.length-1)throw new Error("UGen graph contains recursion.");s.push(e);var r=i.indexOf(e);-1!==r&&i.splice(r,1),i.unshift(e),e.inputs&&e.inputs.forEach(function(e){n.push(e),t(e,i,s,n),n.pop()})};return function(e){var i,n=[];return e.slice().forEach(function(r){s.instanceOfOut(r)&&(n.push(r),i=[r],r.inputs.forEach(function(s){i.push(s),t(s,e,n,i),i.pop()}))}),e=e.filter(function(t){return-1!==n.indexOf(t)})}}();s.global.SynthDef=function(){var t,e,i,s,r,a,u=0;if(t="string"==typeof arguments[u]?arguments[u++]:"synth","function"!=typeof arguments[u])throw new Error("SynthDef requires build function");e=arguments[u++],i=n.asArray(arguments[u++]),s=n.asArray(arguments[u++]),r=n.asArray(arguments[u++]),a={};var h=new o(t,e,i,s,r,a);return c(h,e,i,s,r,a),h},s.global.SynthDef["new"]=s.global.SynthDef,s.instanceOfSynthDef=function(t){return t instanceof o},i.exports={SynthDef:o,build:c,initBuild:p,buildUGenGraph:l,finishBuild:f,args2keyValues:m,args2controls:d,checkValidArgs:g,keyValueRates2args:N,controls2args:A,asJSON:T,reshape:M,topoSort:I}}),n("cc/lang/task",function(t,e,i){var s=t("./cc"),n=t("../common/extend"),r=function(t){return null===t||void 0===t?null:t.valueOf()},a=function(){function t(){this.klassName="TaskManager",this.tasks=[],this.counterIncr=0
}return t.prototype.start=function(t){this.counterIncr=Math.max(1,t)},t.prototype.stop=function(){this.counterIncr=0},t.prototype.reset=function(){this.tasks.splice(0)},t.prototype.append=function(t){var e=this.tasks.indexOf(t);-1===e&&this.tasks.push(t)},t.prototype.remove=function(t){var e=this.tasks.indexOf(t);-1!==e&&this.tasks.splice(e,1)},t.prototype.process=function(){var t=this.counterIncr;if(t){for(var e=this.tasks,i=0;i<e.length;++i)e[i].performWait(t);this.tasks=e.filter(function(t){return 1===t._state})}},t}(),u=function(){function t(t,e){this.klassName="Task",s.instanceOfSyncBlock(t)?(this._func=t,this._state=0):(this._func=null,this._state=2),this._iter=e,this._wait=null,this._args=r(e),this._remain=0}return n(t,s.Object),t.prototype.start=function(){return this.reset(),s.taskManager&&s.taskManager.append(this),this._state=1,this},t.prototype.resume=function(){return s.taskManager&&s.taskManager.append(this),this._state=1,this},t.prototype.pause=function(){return s.taskManager&&s.taskManager.remove(this),this._state=0,this},t.prototype.stop=function(){return s.taskManager&&s.taskManager.remove(this),this._state=0,this},t.prototype.reset=function(){return this._func?(this._func.reset(),this._state=0):this._state=2,this._iter&&this._iter.reset(),this._wait=null,this._args=r(this._iter),this},t.prototype.wait=function(){return s.currentTask&&s.currentTask!==this&&s.currentTask.__wait__(this),this},t.prototype.__sync__=function(e,i){return this.__wait__(new t(e,i))},t.prototype.__wait__=function(e){if(this._wait)throw new Error("Task#append: wait already exists???");return"number"==typeof e&&(e+=this._remain),this._remain=0,this._wait=s.createTaskWaitToken(e),e instanceof t&&(e._state=1),s.pauseSyncBlock(),this},t.prototype.performWait=function(t){var e=s.currentSyncBlockHandler,i=s.currentTask,n=this._func,r=this._iter;for(s.currentSyncBlockHandler=this,s.currentTask=this;;){if(this._wait){if(this._wait.performWait(t))break;this._remain=this._wait.remain||0,this._wait=null}if(t=0,n.perform.apply(n,this._args),!this._wait&&!n.performWaitState()){if(!r||(this._args=r.next(),!r.performWaitState())){this._state=2;break}n.reset()}}return s.currentSyncBlockHandler=e,s.currentTask=i,1===this._state},t.prototype.performWaitState=function(){return 1===this._state},t}(),o=function(){function t(){this.klassName="TaskArguments",this._args=[0,0],this._state=1}return t.prototype.next=function(){return 2===this._state?null:(this._state=2,this._args)},t.prototype.reset=function(){return this._state=1,this},t.prototype.valueOf=function(){return this._args},t.prototype.performWait=function(){return 1===this._state},t.prototype.performWaitState=function(){return 1===this._state},t}(),h=function(){function t(t,e,i){o.call(this),this.klassName="TaskArgumentsNumber",this.start=t,this.end=e,this.step=i,this.index=0,this.reset()}return n(t,o),t.prototype.next=function(){if(2===this._state)return null;var t=this._args[0]+this.step;return this.step>=0?t<=this.end?(this._args[0]=t,this._args[1]=++this.index):this._state=2:t>=this.end?(this._args[0]=t,this._args[1]=++this.index):this._state=2,2===this._state?null:this._args},o.prototype.reset=function(){return this.index=0,this._args=[this.start,this.index],this._state=1,this},t}(),c=function(){function t(t,e){o.call(this),this.klassName="TaskArgumentsArray",this.list=t,this.reversed=e,this.reset()}return n(t,o),t.prototype.next=function(){return 2===this._state?null:(this.reversed?(this.index-=1,0<=this.index?this._args=[this.list[this.index],this.index]:this._state=2):(this.index+=1,this.index<this.list.length?this._args=[this.list[this.index],this.index]:this._state=2),2===this._state?null:this._args)},t.prototype.reset=function(){return this.index=this.reversed?Math.max(0,this.list.length-1):0,this._args=[this.list[this.index],this.index],this._state=1,this},t}(),p=function(){function t(t){o.call(this),this.klassName="TaskArgumentsFunction",this.func=t,this.index=0,this.reset()}return n(t,o),t.prototype.next=function(){if(2===this._state)return null;var t=this.func();return t||0===t?(this._args[0]=t,this._args[1]=++this.index):this._state=2,2===this._state?null:this._args},t.prototype.reset=function(){return this._state=1,this.uninitialized=!0,this},t.prototype.valueOf=function(){return this.index=0,this.uninitialized&&(this.uninitialized=!1,this._args=[this.func(),this.index]),this._args},t}(),l=function(){function t(t){o.call(this),this.klassName="TaskArgumentsPattern",this.pattern=t,this.reset()}return n(t,o),t.prototype.next=function(){if(2===this._state)return null;var t=this.pattern.next();return null!==t&&void 0!==t?this._args=[t,this.index++]:this._state=2,2===this._state?null:this._args},t.prototype.reset=function(){return this.index=0,this._args=[this.pattern.reset().next(),this.index++],this._state=1,this},t}(),f=function(){function t(){this.klassName="TaskWaitToken",this._state=1}return t.prototype.performWait=function(){return 1===this._state},t.prototype.performWaitState=function(){return 1===this._state},t}(),_=function(){function t(t){f.call(this),this.klassName="TaskWaitTokenNumber",this.token=1e3*t}return n(t,f),t.prototype.performWait=function(t){return 1===this._state&&(this.token-=t,this.token<=0&&(this._state=2,this.remain=.001*this.token)),1===this._state},t}(),d=function(){function t(t){f.call(this),this.klassName="TaskWaitTokenLogicAND",this.token=t.map(s.createTaskWaitToken)}return n(t,f),t.prototype.performWait=function(t){return 1===this._state&&(this.token=this.token.filter(function(e){return e.performWait(t)}),0===this.token.length&&(this._state=2)),1===this._state},t}(),m=function(){function t(t){f.call(this),this.klassName="TaskWaitTokenLogicOR",this.token=t.map(s.createTaskWaitToken)}return n(t,f),t.prototype.performWait=function(t){if(1===this._state)for(var e=this.token,i=0,s=e.length;s>i;++i)if(!e[i].performWait(t)){this._state=2,this.token.splice(0);break}return 1===this._state},t}(),y=function(){function t(t){f.call(this),this.klassName="TaskWaitTokenFunction",this.token=t}return n(t,f),t.prototype.performWait=function(){if(1===this._state){var t=this.token();t&&(this._state=2)}return 1===this._state},t}(),g=function(){function t(t){f.call(this),this.klassName="TaskWaitTokenBoolean",this.token=t,this._state=t?1:2}return n(t,f),t}(),v=function(){function t(t){f.call(this),this.klassName="TaskWaitTokenDate",this.token=+t}return n(t,f),t.prototype.performWait=function(){return 1===this._state&&Date.now()>this.token&&(this._state=2),1===this._state},t}();s.global.Task=function(t){return new u(t)},s.createTaskManager=function(){return s.taskManager=new a,s.taskManager},s.instanceOfTaskManager=function(t){return t instanceof a},s.createTask=function(t,e){return new u(t,e)},s.instanceOfTask=function(t){return t instanceof u},s.instanceOfTaskArguments=function(t){return t instanceof o},s.createTaskArgumentsNumber=function(t,e,i){return new h(t,e,i)},s.createTaskArgumentsArray=function(t,e){return new c(t,!!e)},s.createTaskArgumentsOnce=function(t){return new c([t])},s.createTaskArgumentsPattern=function(t){return new l(t)},s.createTaskWaitToken=function(t,e){if(t&&"function"==typeof t.performWait)return t;switch(typeof t){case"number":return new _(t);case"function":return new y(t);case"boolean":return new g(t)}return Array.isArray(t)?s.createTaskWaitTokenArray(t,e):t instanceof Date?new v(t):new g(!1)},s.instanceOfTaskWaitToken=function(t){return t instanceof f},s.createTaskWaitTokenNumber=function(t){return new _(t)},s.createTaskWaitTokenArray=function(t,e){return"or"===e?new m(t):new d(t)},s.createTaskWaitTokenFunction=function(t){return new y(t)},s.createTaskWaitTokenBoolean=function(t){return new g(t)},s.createTaskWaitTokenDate=function(t){return new v(t)},i.exports={TaskManager:a,Task:u,TaskArguments:o,TaskArgumentsNumber:h,TaskArgumentsArray:c,TaskArgumentsFunction:p,TaskWaitToken:f,TaskWaitTokenNumber:_,TaskWaitTokenLogicAND:d,TaskWaitTokenLogicOR:m,TaskWaitTokenFunction:y,TaskWaitTokenBoolean:g,TaskWaitTokenDate:v}}),n("cc/lang/ugen",function(t,e,i){var s=t("./cc"),n=t("./fn"),r=t("./utils"),a=t("../common/extend"),u=t("../common/ops"),o=[].slice,h=null,c={},p=function(t){return function(e){return Array.isArray(e)?e[t%e.length]:e}},l=function(t){return["scalar","control","audio","demand"][t]||"scalar"};s.ugen.checkNInputs=function(t){if(2===this.rate)for(var e=0;t>e;++e)if(2!==this.inputs[e].rate){var i=r.asString(this.inputs[e])+" "+l(this.inputs[e].rate);throw new Error("input["+e+"] is not AUDIO rate: "+i)}},s.ugen.checkSameRateAsFirstInput=function(){if(this.rate!==this.inputs[0].rate){var t=r.asString(this.inputs[0])+" "+l(this.inputs[0].rate);throw new Error("first input is not "+l(this.rate)+" rate: "+t)}};var f=function(){function t(t,e){e=e||{},this.klassName=t,this.rate=2,this.signalRange=e.signalRange||2,this.specialIndex=0,this.outputIndex=0,this.numInputs=0,this.numOutputs=1,this.inputs=[]}return a(t,s.Object),t.multiNew=function(){return this.multiNewList(o.call(arguments))},t.multiNewList=function(e){var i,s,n=this,a=0;for(e=r.asUGenInput(e),i=0,s=e.length;s>i;++i)Array.isArray(e[i])&&a<e[i].length&&(a=e[i].length);if(0===a)return t.prototype.init.apply(new n(c.name,c),e);var u=new Array(a);for(i=0;a>i;++i)u[i]=this.multiNewList(e.map(p(i)));return u},t.prototype.init=function(t){return this.rate=t,h&&h(this),this.inputs=o.call(arguments,1),this.numInputs=this.inputs.length,this},t.prototype.copy=function(){return this},t.prototype.clone=n(function(){return this}).defaults(u.COMMONS.clone).build(),t.prototype.dup=n(function(t){for(var e=new Array(0|t),i=0,s=e.length;s>i;++i)e[i]=this;return e}).defaults(u.COMMONS.dup).build(),t.prototype["do"]=function(){return this},t.prototype.wait=function(){return this},t.prototype.asUGenInput=function(){return this},t.prototype.asString=function(){return this.klassName},["__plus__","__minus__"].concat(Object.keys(u.UNARY_OPS)).forEach(function(e){var i;i=u.ALIASES.hasOwnProperty(e)?u.ALIASES[e]:e,/^[a-z_][a-zA-Z0-9_]*$/.test(e)&&(t.prototype[e]=function(){return s.createUnaryOpUGen(i,this)})}),["__add__","__sub__","__mul__","__div__","__mod__"].concat(Object.keys(u.BINARY_OPS)).forEach(function(e){var i;i=u.ALIASES.hasOwnProperty(e)?u.ALIASES[e]:e,/^[a-z_][a-zA-Z0-9_]*$/.test(e)&&n.defineBinaryProperty(t.prototype,e,function(t){return s.createBinaryOpUGen(i,this,t)})}),t.prototype.madd=n(function(t,e){return s.createMulAdd(this,t,e)}).defaults(u.ARITY_OPS.madd).build(),t.prototype.range=n(function(t,e){var i,n;return 2===this.signalRange?(i=e.__sub__(t).__mul__(.5),n=i.__add__(t)):(i=e.__sub__(t),n=t),s.createMulAdd(this,i,n)}).defaults(u.ARITY_OPS.range).build(),t.prototype.exprange=n(function(t,e){return 2===this.signalRange?this.linexp(-1,1,t,e):this.linexp(0,1,t,e)}).defaults(u.ARITY_OPS.exprange).multiCall().build(),t.prototype.curverange=n(function(t,e,i){return 2===this.signalRange?this.lincurve(-1,1,t,e,i):this.lincurve(0,1,t,e,i)}).defaults(u.ARITY_OPS.curverange).multiCall().build(),t.prototype.unipolar=n(function(t){return this.range(0,t)}).defaults(u.ARITY_OPS.unipolar).multiCall().build(),t.prototype.bipolar=n(function(t){return this.range(t.neg(),t)}).defaults(u.ARITY_OPS.bipolar).multiCall().build(),t.prototype.clip=n(function(t,e){return s.global.Clip(this.rate,this,t,e)}).defaults(u.ARITY_OPS.clip).multiCall().build(),t.prototype.fold=n(function(t,e){return s.global.Fold(this.rate,this,t,e)}).defaults(u.ARITY_OPS.fold).multiCall().build(),t.prototype.wrap=n(function(t,e){return s.global.Wrap(this.rate,this,t,e)}).defaults(u.ARITY_OPS.wrap).multiCall().build(),t.prototype.blend=n(function(t,e){var i=e.linlin(0,1,-1,1);return 2===this.rate?s.global.XFade2(2,this,t,i):2===t.rate?s.global.XFade2(2,t,this,i.neg()):s.global.LinXFade2(this.rate,this,t,i)}).defaults(u.ARITY_OPS.blend).multiCall().build(),t.prototype.lag=n(function(t,e){return"undefined"==typeof e?s.global.Lag(this.rate,this,t):s.global.LagUD(this.rate,this,t,e)}).defaults(u.ARITY_OPS.lag).multiCall().build(),t.prototype.lag2=n(function(t,e){return"undefined"==typeof e?s.global.Lag2(this.rate,this,t):s.global.Lag2UD(this.rate,this,t,e)}).defaults(u.ARITY_OPS.lag2).multiCall().build(),t.prototype.lag3=n(function(t,e){return"undefined"==typeof e?s.global.Lag3(this.rate,this,t):s.global.Lag3UD(this.rate,this,t,e)}).defaults(u.ARITY_OPS.lag3).multiCall().build(),t.prototype.lagud=n(function(t,e){return s.global.LagUD(this.rate,this,t,e)}).defaults(u.ARITY_OPS.lagud).multiCall().build(),t.prototype.lag2ud=n(function(t,e){return s.global.Lag2UD(this.rate,this,t,e)}).defaults(u.ARITY_OPS.lag2ud).multiCall().build(),t.prototype.lag3ud=n(function(t,e){return s.global.Lag3UD(this.rate,this,t,e)}).defaults(u.ARITY_OPS.lag3ud).multiCall().build(),t.prototype.varlag=n(function(t,e,i,n){return s.global.VarLag(this.rate,this,t,e,i,n)}).defaults(u.ARITY_OPS.varlag).multiCall().build(),t.prototype.slew=n(function(t,e){return s.global.Slew(this.rate,this,t,e)}).defaults(u.ARITY_OPS.slew).multiCall().build(),t.prototype.prune=function(t,e,i){switch(i){case"minmax":return this.clip(t,e);case"min":return this.max(t);case"max":return this.min(e)}return this},t.prototype.linlin=n(function(t,e,i,n,r){return s.global.LinLin(this.rate,this.prune(t,e,r),t,e,i,n)}).defaults(u.ARITY_OPS.linlin).multiCall().build(),t.prototype.linexp=n(function(t,e,i,n,r){return s.global.LinExp(this.rate,this.prune(t,e,r),t,e,i,n)}).defaults(u.ARITY_OPS.linexp).multiCall().build(),t.prototype.explin=n(function(t,e,i,n,r){return s.global.ExpLin(this.rate,this.prune(t,e,r),t,e,i,n)}).defaults(u.ARITY_OPS.explin).multiCall().build(),t.prototype.expexp=n(function(t,e,i,n,r){return s.global.ExpExp(this.rate,this.prune(t,e,r),t,e,i,n)}).defaults(u.ARITY_OPS.expexp).multiCall().build(),t.prototype.lincurve=n(function(t,e,i,s,n,r){if("number"==typeof n&&Math.abs(n)<.25)return this.linlin(t,e,i,s,r);var a=n.exp(),u=s.__sub__(i).__div__(1..__sub__(a)),o=i.__add__(u),h=this.prune(t,e,r).__sub__(t).__div__(e.__sub__(t));return o.__sub__(u.__mul__(a.pow(h)))}).defaults(u.ARITY_OPS.lincurve).multiCall().build(),t.prototype.curvelin=n(function(t,e,i,s,n,r){if("number"==typeof n&&Math.abs(n)<.25)return this.linlin(t,e,i,s,r);var a=n.exp(),u=s.__sub__(i).__div__(1..__sub__(a)),o=i.__add__(u),h=this.prune(t,e,r).__sub__(t).__div__(e.__sub__(t));return o.__sub__(h).__div__(u).log().__div__(n)}).defaults(u.ARITY_OPS.curvelin).multiCall().build(),t.prototype.bilin=n(function(t,e,i,n,r,a,u){return s.global.Select(this.rate,this.lt(t),[this.linlin(t,i,n,a,u),this.linlin(e,t,r,n,u)])}).defaults(u.ARITY_OPS.bilin).build(),t.prototype.rrand=n(function(){return 0}).defaults(u.ARITY_OPS.rrand).build(),t.prototype.exprand=n(function(){return 0}).defaults(u.ARITY_OPS.exprand).build(),t}(),_=function(){function t(t){f.call(this,t||"MultiOutUGen"),this.channels=null}return a(t,f),t.prototype.initOutputs=function(t,e){for(var i=new Array(t),s=0;t>s;++s)i[s]=new d(e,this,s);return this.channels=i,this.numOutputs=i.length,1===t?i[0]:i},t}(),d=function(){function t(t,e,i){f.call(this,"OutputProxy"),this.init(t),this.inputs=[e],this.numOutputs=1,this.outputIndex=i}return a(t,f),t.prototype.clone=n(function(){return this}).defaults(u.COMMONS.clone).build(),t}(),m=function(){function t(){s.UGen.call(this,"Out")}return a(t,f),t}(),y=function(t,e){return Array.isArray(t)?t.map(function(t){return y(t,e)}):t instanceof f&&(e.checkInputs&&e.checkInputs.call(t),e.init)?e.init.apply(t,t.inputs):t},g=function(t,e){var i,r=e.Klass||f,a={checkInputs:e.checkInputs,signalRange:e.signalRange||2,init:e.init};e.$new?(i=function(){return s.global[t]["new"].apply(null,o.call(arguments))},s.global[t]=i):(i=function(e){"number"==typeof e&&(e=["ir","kr","ar"][e]);var i=s.global[t][e];return i?i.apply(null,o.call(arguments,1)):new f(t)},s.global[t]=i,s.global[t]["new"]=i),Object.keys(e).forEach(function(s){if("$"===s.charAt(0)){var u=e[s].defaults,h=e[s].ctor;i[s.substr(1)]=n(function(){var e=o.call(arguments);c.name=t,c.signalRange=a.signalRange;var i=h.apply(r,e);return c={},y(i,a)}).defaults(u).build()}})};s.createUGen=function(){return new f},s.instanceOfUGen=function(t){return t instanceof f},s.instanceOfMultiOutUGen=function(t){return t instanceof _},s.createOutputProxy=function(t,e,i){return new d(t,e,i)},s.instanceOfOutputProxy=function(t){return t instanceof d},s.instanceOfOut=function(t){return t instanceof m},s.setSynthDef=function(t){if(t&&null!==h)throw new Error("nested Synth.def");h=t},s.UGen=f,s.MultiOutUGen=_,s.Out=m,s.ugen.register=g,i.exports={UGen:f,MultiOutUGen:_,OutputProxy:d}}),n("cc/lang/basic_ugen",function(t,e,i){var s=t("./cc"),n=t("../common/extend"),r=t("../common/ops"),a=t("./fn"),u=t("./utils"),o=u.asRate,h=function(){function t(t,e){s.MultiOutUGen.call(this,e||"Control"),this.rate=t,this.values=null}return n(t,s.MultiOutUGen),t.prototype.init=function(t){return s.UGen.prototype.init.apply(this,[this.rate]),this.values=t.slice(),this.initOutputs(this.values.length,this.rate)},t}(),c=function(){function t(){h.call(this,2,"AudioControl")}return n(t,h),t}(),p=function(){function t(){h.call(this,1,"TrigControl")}return n(t,h),t}(),l=function(){function t(){h.call(this,1,"LagControl")}return n(t,h),t.prototype.init=function(t,e){return s.UGen.prototype.init.apply(this,[this.rate].concat(e)),this.values=t,this.initOutputs(t.length,this.rate)},t}(),f=function(){function t(){s.UGen.call(this,"UnaryOpUGen")}return n(t,s.UGen),t.prototype.init=function(t,e){var i=r.UNARY_OPS[t];if("undefined"==typeof i)throw new Error("UnaryOpUGen: unknown operator '"+t+"'");return e=u.asUGenInput(e),s.UGen.prototype.init.call(this,o(e)),this.selector=t,this.specialIndex=i,this.inputs=[e],this.numInputs=1,this},t}(),_=function(){function t(){s.UGen.call(this,"BinaryOpUGen")}return n(t,s.UGen),t.prototype.init=function(e,i,n){if(i=u.asUGenInput(i),n=u.asUGenInput(n),"number"==typeof i&&"number"==typeof n)switch(e){case"+":return u.asUGenInput(i+n);case"-":return u.asUGenInput(i-n);case"*":return u.asUGenInput(i*n);case"/":return u.asUGenInput(i/n);case"%":return u.asUGenInput(i%n)}if("-"===e&&"number"==typeof n&&(e="+",n=-n),"/"===e&&"number"==typeof n&&(e="*",n=1/n),"*"===e)return 0===i||0===n?0:1===i?n:1===n?i:m(i,n);if("+"===e){if(0===i)return n;if(0===n)return i;if(i instanceof t){if("*"===i.selector)return s.createMulAdd(i.inputs[0],i.inputs[1],n)}else if(i instanceof y)return"number"==typeof i.inputs[2]&&"number"==typeof n?i.inputs[2]+n===0?s.createBinaryOpUGen("*!",i.inputs[0],i.inputs[1]):(i.inputs[2]+=n,i):(n=s.createBinaryOpUGen("+",i.inputs[2],n),i=s.createBinaryOpUGen("*!",i.inputs[0],i.inputs[1]),s.createBinaryOpUGen("+",i,n));return d(i,n)}"+!"===e?e="+":"*!"===e&&(e="*");var a=r.BINARY_OPS[e];if("undefined"==typeof a)throw new Error("BinaryOpUGen: unknown operator '"+e+"'");return s.UGen.prototype.init.call(this,o([i,n])),this.selector=e,this.specialIndex=a,this.inputs=[i,n],this.numInputs=2,this},t}(),d=function(){var t=function(e){if("number"==typeof e)return e;var i=e.inputs;return e instanceof _&&"+"===e.selector?[t(i[0]),t(i[1])]:e instanceof g?[t(i[0]),t(i[1]),t(i[2])]:e instanceof v?[t(i[0]),t(i[1]),t(i[2]),t(i[3])]:e},e=function(t){switch(t=t.map(function(t){switch(t.length){case 4:return s.createSum4(t[0],t[1],t[2],t[3]);case 3:return s.createSum3(t[0],t[1],t[2]);case 2:return s.createBinaryOpUGen("+!",t[0],t[1]);case 1:return t[0]}}),t.length){case 4:return s.createSum4(t[0],t[1],t[2],t[3]);case 3:return s.createSum3(t[0],t[1],t[2]);case 2:return s.createBinaryOpUGen("+!",t[0],t[1]);case 1:return t[0];default:return e(u.clump(t,4))}};return function(i,n){var r=u.flatten([t(i),t(n)]),a=0;if(r=r.filter(function(t){return"number"==typeof t?(a+=t,!1):!0}),0!==a&&r.push(a),r=u.clump(r,4),1===r.length&&2===r[0].length)return s.createBinaryOpUGen("+!",r[0][0],r[0][1]);var o=e(r);return o}}(),m=function(){var t=function(e){if("number"==typeof e)return e;var i=e.inputs;return e instanceof _&&"*"===e.selector?[t(i[0]),t(i[1])]:e},e=function(t){switch(t=t.map(function(t){return 2===t.length?s.createBinaryOpUGen("*!",t[0],t[1]):t[0]}),t.length){case 2:return s.createBinaryOpUGen("*!",t[0],t[1]);case 1:return t[0];default:return e(u.clump(t,2))}};return function(i,n){var r=u.flatten([t(i),t(n)]),a=1;return r=r.filter(function(t){return"number"==typeof t?(a*=t,!1):!0}),1!==a&&r.push(a),r=u.clump(r,2),1===r.length&&2===r[0].length?s.createBinaryOpUGen("*!",r[0][0],r[0][1]):e(r)}}(),y=function(){function t(){s.UGen.call(this,"MulAdd")}return n(t,s.UGen),t.prototype.init=function(t,e,i){var n,r,a,h,c;return o(t)<o(e)&&(n=t,t=e,e=n),t=u.asUGenInput(t),e=u.asUGenInput(e),i=u.asUGenInput(i),0===e?i:("number"==typeof t&&"number"==typeof e&&(t*=e,e=1),r=-1===e,a=1===e,h=0===i,a&&h?t:r&&h?s.createBinaryOpUGen("*",t,-1):h?s.createBinaryOpUGen("*",t,e):r?s.createBinaryOpUGen("-",i,t):a?s.createBinaryOpUGen("+",t,i):(c=o([t,e,i]),s.UGen.prototype.init.apply(this,[c,t,e,i])))},t}(),g=function(){function t(){s.UGen.call(this,"Sum3")}return n(t,s.UGen),t.prototype.init=function(t,e,i){if(0===t)return s.createBinaryOpUGen("+",e,i);if(0===e)return s.createBinaryOpUGen("+",t,i);if(0===i)return s.createBinaryOpUGen("+",t,e);var n=o([t,e,i]),r=[t,e,i].sort(function(t,e){return o(e)-o(t)});return s.UGen.prototype.init.apply(this,[n].concat(r))},t}(),v=function(){function t(){s.UGen.call(this,"Sum4")}return n(t,s.UGen),t.prototype.init=function(t,e,i,n){if(0===t)return s.createSum3(e,i,n);if(0===e)return s.createSum3(t,i,n);if(0===i)return s.createSum3(t,e,n);if(0===n)return s.createSum3(t,e,i);var r=o([t,e,i,n]),a=[t,e,i,n].sort(function(t,e){return o(e)-o(t)});return s.UGen.prototype.init.apply(this,[r].concat(a))},t}();s.ugen.specs.Out={Klass:s.Out,$ar:{defaults:"bus=0,channelsArray=0",ctor:function(t,e){return this.multiNewList([2,t].concat(e)),0}},$kr:{defaults:"bus=0,channelsArray=0",ctor:function(t,e){return this.multiNewList([1,t].concat(e)),0}}};var b=function(){function t(){s.UGen.call(this,"ReplaceOut")}return n(t,s.Out),t}();s.ugen.specs.ReplaceOut={Klass:b,$ar:{defaults:"bus=0,channelsArray=0",ctor:function(t,e){return this.multiNewList([2,t].concat(e)),0}},$kr:{defaults:"bus=0,channelsArray=0",ctor:function(t,e){return this.multiNewList([1,t].concat(e)),0}}},s.createControl=function(t){return new h(t)},s.createAudioControl=function(){return new c},s.createTrigControl=function(){return new p},s.createLagControl=function(){return new l},s.instanceOfControlUGen=function(t){return t instanceof h},s.createUnaryOpUGen=a(function(t,e){return(new f).init(t,e)}).multiCall().build(),s.createBinaryOpUGen=a(function(t,e,i){return(new _).init(t,e,i)}).multiCall().build(),s.createMulAdd=a(function(t,e,i){return(new y).init(t,e,i)}).multiCall().build(),s.createSum3=a(function(t,e,i){return(new g).init(t,e,i)}).multiCall().build(),s.createSum4=a(function(t,e,i,s){return(new v).init(t,e,i,s)}).multiCall().build(),i.exports={Control:h,UnaryOpUGen:f,BinaryOpUGen:_,MulAdd:y,Sum3:g,Sum4:v}}),n("cc/plugins/installer",function(t,e,i){t("./bufio"),t("./debug"),t("./decay"),t("./delay"),t("./demand"),t("./env"),t("./filter"),t("./info"),t("./inout"),t("./line"),t("./noise"),t("./osc"),t("./pan"),t("./random"),t("./range"),t("./reverb"),t("./trig"),t("./ui"),i.exports={}}),n("cc/plugins/bufio",function(t,e,i){var s=t("../cc"),n=t("./utils"),r=n.cubicinterp,a=[].slice,u=function(t,e,i,s){if(e>=i){if(!s)return t.done=!0,i;if(e-=i,i>e)return e}else{if(!(0>e))return e;if(!s)return t.done=!0,0;if(e+=i,e>=0)return e}return e-i*Math.floor(e/i)},o=function(t,e,i){var s=0|t,n=s-1,r=s+1,a=r+1;return 0===s?n=i?e:s:a>e&&(r>e?i?(r=0,a=1):r=a=e:a=i?0:e),[n,s,r,a]},h=function(t){var e=t.world.buffers[0|t.inputs[0][0]];if(e){var i=e.samples;if(i.length)return t._frames=e.frames,t._channels=e.channels,t._sampleRate=e.sampleRate,t._samples=i,!0}return!1},c=function(t){return Array.isArray(t)?t:[t]};s.ugen.specs.PlayBuf={Klass:s.MultiOutUGen,$ar:{defaults:"numChannels=0,bufnum=0,rate=1,trigger=1,startPos=0,loop=0,doneAction=0",ctor:function(t,e,i,s,n,r,a){if("number"!=typeof t)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(2,t,e,i,s,n,r,a)}},$kr:{defaults:"numChannels=0,bufnum,rate=1,trigger=1,startPos=0,loop=0,doneAction=0",ctor:function(t,e,i,s,n,r,a){if("number"!=typeof t)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(1,t,e,i,s,n,r,a)}},init:function(t){return this.inputs=a.call(arguments,1),this.initOutputs(t,this.rate)}},s.unit.specs.PlayBuf=function(){var t=function(){switch(this.numOutputs){case 1:this.process=e;break;case 2:this.process=i;break;default:this.process=s}this._samples=null,this._channels=0,this._frames=0,this._phase=this.inputs[3][0],this._trig=0},e=function(t){if(h(this)){var e,i,s,n,a,c,p=this.outputs[0],l=this._phase,f=this.inputs[1][0],_=this.inputs[2][0],d=this.inputs[4][0],m=this._samples,y=this._frames,g=y-1;_>0&&this._trig<=0&&(this.done=!1,l=this.inputs[3][0]),this._trig=_;for(var v=0;t>v;++v)l=u(this,l,g,d),e=o(l,g,d),i=l-(0|l),s=m[e[0]],n=m[e[1]],a=m[e[2]],c=m[e[3]],p[v]=r(i,s,n,a,c),l+=f;this.done&&this.doneAction(0|this.inputs[5][0]),this._phase=l}},i=function(t){if(h(this)){var e,i,s,n,a,c,p=this.outputs[0],l=this.outputs[1],f=this._phase,_=this.inputs[1][0],d=this.inputs[2][0],m=this.inputs[4][0],y=this._samples,g=this._frames,v=g-1;d>0&&this._trig<=0&&(this.done=!1,f=this.inputs[3][0]),this._trig=d;for(var b=0;t>b;++b)f=u(this,f,v,m),e=o(f,v,m),i=f-(0|f),s=y[2*e[0]],n=y[2*e[1]],a=y[2*e[2]],c=y[2*e[3]],p[b]=r(i,s,n,a,c),s=y[2*e[0]+1],n=y[2*e[1]+1],a=y[2*e[2]+1],c=y[2*e[3]+1],l[b]=r(i,s,n,a,c),f+=_;this.done&&this.doneAction(0|this.inputs[5][0]),this._phase=f}},s=function(t){if(h(this)){var e,i,s,n,a,c,p=this.outputs,l=this._phase,f=this.inputs[1][0],_=this.inputs[2][0],d=this.inputs[4][0],m=this._samples,y=this._channels,g=this._frames,v=g-1;_>0&&this._trig<=0&&(this.done=!1,l=this.inputs[3][0]),this._trig=_;for(var b=0;t>b;++b){l=u(this,l,v,d),e=o(l,v,d),i=l-(0|l);for(var w=0,k=p.length;k>w;++w)s=m[e[0]*y+w],n=m[e[1]*y+w],a=m[e[2]*y+w],c=m[e[3]*y+w],p[w][b]=r(i,s,n,a,c);l+=f}this.done&&this.doneAction(0|this.inputs[5][0]),this._phase=l}};return t}(),s.ugen.specs.BufRd={Klass:s.MultiOutUGen,$ar:{defaults:"numChannels=0,bufnum=0,phase=0,loop=1,interpolation=2",ctor:function(t,e,i,s,n){if("number"!=typeof t)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(2,t,e,i,s,n)}},$kr:{defaults:"numChannels=0,bufnum=0,phase=0,loop=1,interpolation=2",ctor:function(t,e,i,s,n){if("number"!=typeof t)throw new TypeError("PlayBuf: numChannels should be an integer.");return this.multiNew(1,t,e,i,s,n)}},init:function(t){return this.inputs=a.call(arguments,1),this.initOutputs(t,this.rate)}};var p=function(t,e,i,s){return t[e[1]*i+s]},l=function(t,e,i,s,n){var r=t[e[1]*i+s],a=t[e[2]*i+s];return r+n*(a-r)},f=function(t,e,i,s,n){var a=t[e[0]*i+s],u=t[e[1]*i+s],o=t[e[2]*i+s],h=t[e[3]*i+s];return r(n,a,u,o,h)};s.unit.specs.BufRd=function(){var t=function(){switch(this.numOutputs){case 1:this.process=e;break;case 2:this.process=i;break;default:this.process=s}switch(0|this.inputs[3][0]){case 1:this._perform=p;break;case 4:this._perform=f;break;default:this._perform=l}this._samples=null,this._channels=0,this._frames=0},e=function(t){if(h(this))for(var e,i,s,n=this.outputs[0],r=this.inputs[1],a=this.inputs[2][0],c=this._samples,p=this._frames,l=this._perform,f=p-1,_=0;t>_;++_)e=u(this,r[_],f,a),i=o(e,f,a),s=e-(0|e),n[_]=l(c,i,1,0,s)},i=function(t){if(h(this))for(var e,i,s,n=this.outputs[0],r=this.outputs[1],a=this.inputs[1],c=this.inputs[2][0],p=this._samples,l=this._frames,f=this._perform,_=l-1,d=0;t>d;++d)e=u(this,a[d],_,c),i=o(e,_,c),s=e-(0|e),n[d]=f(p,i,2,0,s),r[d]=f(p,i,2,1,s)},s=function(t){if(h(this))for(var e,i,s,n=this.outputs,r=this.inputs[1],a=this.inputs[2][0],c=this._samples,p=this._frames,l=this._perform,f=p-1,_=0;t>_;++_){e=u(this,r[_],f,a),i=o(e,f,a),s=e-(0|e);for(var d=0,m=n.length;m>d;++d)n[d][_]=l(c,i,m,d,s)}};return t}(),s.ugen.specs.BufWr={$ar:{defaults:"inputArray=[],bufnum=0,phase=0,loop=1",ctor:function(t,e,i,s){return this.multiNewList([2,e,i,s].concat(c(t)))}},$kr:{defaults:"inputArray=[],bufnum=0,phase=0,loop=1",ctor:function(t,e,i,s){return this.multiNewList([1,e,i,s].concat(c(t)))}},checkNInputs:function(){if(2===this.rate&&2!==this.inputs[1].rate)throw new Error("phase input is not audio rate")}},s.unit.specs.BufWr=function(){var t=function(){switch(this.numInputs-3){case 1:this.process=e;break;case 2:this.process=i;break;default:this.process=s}},e=function(t){if(h(this)){var e,i,s=this.inputs[1],n=this.inputs[3],r=this.inputs[2][0],a=this._frames-(r?0:1),o=this._samples;for(i=0;t>i;++i)e=u(this,s[i],a,r),o[0|e]=n[i]}},i=function(t){if(h(this)){var e,i,s,n=this.inputs[1],r=this.inputs[3],a=this.inputs[4],o=this.inputs[2][0],c=this._frames-(o?0:1),p=this._samples;for(s=0;t>s;++s)e=u(this,n[s],c,o),i=e<<1,p[i]=r[s],p[i+1]=a[s]}},s=function(t){if(h(this)){var e,i,s,n,r=this.inputs[1],a=this.inputs,o=this.inputs[2][0],c=this._frames-(o?0:1),p=this._samples,l=this._channels;for(s=0;t>s;++s)for(e=u(this,r[s],c,o),i=(0|e)*l,n=0;l>n;++n)p[i+n]=a[n+3][s]}};return t}(),s.ugen.specs.RecordBuf={$ar:{defaults:"inputArray=[],bufnum=0,offset=0,recLevel=1,preLevel=0,run=1,loop=1,trigger=1,doneAction=0",ctor:function(t,e,i,s,n,r,a,u,o){return this.multiNewList([2,e,i,s,n,r,a,u,o].concat(c(t)))}},$kr:{defaults:"inputArray=[],bufnum=0,offset=0,recLevel=1,preLevel=0,run=1,loop=1,trigger=1,doneAction=0",ctor:function(t,e,i,s,n,r,a,u,o){return this.multiNewList([1,e,i,s,n,r,a,u,o].concat(c(t)))}}},s.unit.specs.RecordBuf=function(){var t=function(){switch(this.numInputs-8){case 1:this.process=i;break;case 2:this.process=s;break;default:this.process=n}this._writepos=this.inputs[1][0],this._recLevel=this.inputs[2][0],this._preLevel=this.inputs[3][0],this._prevtrig=0,this._preindex=0},e=function(t){return function(e){if(h(this)){var i,s,n,r=this._channels,a=this._frames,u=this._samples,o=this.inputs,c=this.inputs[2][0],p=this.inputs[3][0],l=this.inputs[4][0],f=0|this.inputs[5][0],_=this.inputs[6][0],d=this._writepos,m=(c-this._recLevel)*this.rate.slopeFactor,y=(p-this._preLevel)*this.rate.slopeFactor;for(c=this._recLevel,p=this._preLevel,i=this._prevpos,s=l>0?1:-1,_>0&&this._prevtrig&&(this.done=!1,d=this.inputs[1][0]*r|0),0>d?d=a-1:d>=a&&(d=0),n=0;e>n;++n)t(o,n,u,d,i,c,p,r),i=d,d+=s,d>=a?f?d=0:(d=a-1,this.done=!0):d>0&&(f?d=a-1:(d=0,this.done=!0)),c+=m,p+=y;this.done&&this.doneAction(0|this.inputs[7][0]),this._prevtrig=_,this._writepos=d,this._prevpos=i,this._recLevel=c,this._preLevel=p}}},i=e(function(t,e,i,s,n,r,a){i[s]=t[8][e]*r+i[n]*a}),s=e(function(t,e,i,s,n,r,a){i[2*s]=t[8][e]*r+i[2*n]*a,i[2*s+1]=t[9][e]*r+i[2*n+1]*a}),n=e(function(t,e,i,s,n,r,a,u){var o;for(o=0;u>o;++o)i[s*u+o]=t[8+o][e]+r*i[n*u+o]*a});return t}(),s.ugen.specs.BufSampleRate={$kr:{defaults:"bufnum=0",ctor:function(t){return this.multiNew(1,t)}},$ir:{defaults:"bufnum=0",ctor:function(t){return this.multiNew(0,t)}}},s.unit.specs.BufSampleRate=function(){var t=function(){this.process=e},e=function(){h(this)&&(this.outputs[0][0]=this._sampleRate)};return t}(),s.ugen.specs.BufRateScale=s.ugen.specs.BufSampleRate,s.unit.specs.BufRateScale=function(){var t=function(){this.process=e,this._sampleDur=s.server.rates[2].sampleDur},e=function(){h(this)&&(this.outputs[0][0]=this._sampleRate*this._sampleDur)};return t}(),s.ugen.specs.BufFrames=s.ugen.specs.BufSampleRate,s.unit.specs.BufFrames=function(){var t=function(){this.process=e},e=function(){h(this)&&(this.outputs[0][0]=this._frames)};return t}(),s.ugen.specs.BufSamples=s.ugen.specs.BufSampleRate,s.unit.specs.BufSamples=function(){var t=function(){this.process=e},e=function(){h(this)&&(this.outputs[0][0]=this._samples.length)};return t}(),s.ugen.specs.BufDur=s.ugen.specs.BufSampleRate,s.unit.specs.BufDur=function(){var t=function(){this.process=e,this._sampleDur=s.server.rates[2].sampleDur
},e=function(){h(this)&&(this.outputs[0][0]=this._frames*this._sampleDur)};return t}(),s.ugen.specs.BufChannels=s.ugen.specs.BufSampleRate,s.unit.specs.BufChannels=function(){var t=function(){this.process=e},e=function(){h(this)&&(this.outputs[0][0]=this._channels)};return t}(),i.exports={}}),n("cc/plugins/utils",function(t,e,i){var s=t("../lang/utils"),n=2*Math.PI,r=8192,a=r-1,u=new Float32Array([1e20])[0],o=new Float32Array(r+1),h=new Float32Array(r+1),c=new Float32Array(2*r);!function(){var t;for(t=0;r>t;++t){var e=Math.sin(n*(t/r));o[t]=e,h[t]=1/e}o[r]=o[0],h[0]=h[r>>1]=h[r]=u;var i=r,s=i>>1;for(t=1;8>=t;++t)h[t]=h[i-t]=h[s-t]=h[s+t]=u}(),function(){!function(t,e,i){var s,n,r,a;for(r=a=0;i-1>r;++r)s=t[r],n=t[r+1],e[a++]=2*s-n,e[a++]=n-s;s=t[i-1],n=t[0],e[a++]=2*s-n,e[a++]=n-s}(o,c,r)}();var p=function(t,e,i,s,n){var r=i,a=.5*(s-e),u=e-2.5*i+2*s-.5*n,o=.5*(n-e)+1.5*(i-s);return((o*t+u)*t+a)*t+r},l=function(t,e,i){if(i===e)return e;var s=i-e;if(t>=i){if(t-=s,i>t)return t}else{if(!(e>t))return t;if(t+=s,t>=e)return t}return t-s*Math.floor((t-e)/s)},f={kSineSize:r,kSineMask:a,kBadValue:u,gSine:o,gInvSine:h,gSineWavetable:c,cubicinterp:p,sc_wrap:l};Object.keys(s).forEach(function(t){f[t]=s[t]}),i.exports=f}),n("cc/plugins/debug",function(t,e,i){var s=t("../cc"),n={$ar:{defaults:"in=0",ctor:function(t){return this.multiNew(2,t)}},$kr:{defaults:"in=0",ctor:function(t){return this.multiNew(1,t)}}};s.ugen.specs.Debug=n,s.unit.specs.Debug=function(){var t=function(){this.process=e},e=function(){this.outputs[0].set(this.inputs[0]),s.global.console.log(this.outputs[0][0])};return t}(),s.ugen.specs.DebugNaN=n,s.unit.specs.DebugNaN=function(){var t=function(){this.process=e},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],n=!1,r=0;t>r;++r)e[r]=i[r],isNaN(i[r])&&(n=!0);n&&s.global.console.log("NaN")};return t}(),i.exports={}}),n("cc/plugins/decay",function(t,e,i){var s=t("../cc"),n=Math.log(.001);s.ugen.specs.Integrator={$ar:{defaults:"in=0,coef=1,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"in=0,coef=1,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Integrator=function(){var t=function(){this.process=e,this._b1=this.inputs[1][0],this._y1=0,this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this._b1,a=this._y1;if(r===n)for(e=0;t>e;++e)i[e]=a=s[e]+r*a;else{var u=(n-r)*this.rate.slopeFactor;for(e=0;t>e;++e)i[e]=a=s[e]+r*a,r+=u;this._b1=n}this._y1=a};return t}(),s.ugen.specs.Decay={$ar:{defaults:"in=0,decayTime=1,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"in=0,decayTime=1,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Decay=function(){var t=function(){this.process=e,this._decayTime=void 0,this._b1=0,this._y1=0,this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0],r=this.inputs[1][0],a=this._b1,u=this._y1;if(r===this._decayTime)for(e=0;t>e;++e)i[e]=u=s[e]+a*u;else{var o=0===r?0:Math.exp(n/(r*this.rate.sampleRate));this._decayTime=r;var h=(o-a)*this.rate.slopeFactor;for(e=0;t>e;++e)i[e]=u=s[e]+a*u,a+=h;this._b1=o}this._y1=u};return t}(),s.ugen.specs.Decay2={$ar:{defaults:"in=0,attackTime=0.01,decayTime=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,attackTime=0.01,decayTime=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Decay2=function(){var t=function(){this.process=e,this._attackTime=void 0,this._decayTime=void 0,this._b1a=0,this._b1b=0,this._y1a=0,this._y1b=0,this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0],r=this.inputs[1][0],a=this.inputs[2][0],u=this._b1a,o=this._b1b,h=this._y1a,c=this._y1b;if(r===this._attackTime&&a===this._decayTime)for(e=0;t>e;++e)h=s[e]+u*h,c=s[e]+o*c,i[e]=h-c;else{this._decayTime=a,this._attackTime=r;var p=0===a?0:Math.exp(n/(a*this.rate.sampleRate)),l=0===r?0:Math.exp(n/(r*this.rate.sampleRate)),f=(p-u)*this.rate.slopeFactor,_=(l-o)*this.rate.slopeFactor;for(e=0;t>e;++e)h=s[e]+u*h,c=s[e]+o*c,i[e]=h-c,u+=f,o+=_;u=p,o=l}this._y1a=h,this._y1b=c,this._b1a=u,this._b1b=o};return t}(),i.exports={}}),n("cc/plugins/delay",function(t,e,i){var s=t("../cc"),n=t("./utils"),r=Math.log(.001),a=n.cubicinterp;s.ugen.specs.Delay1={$ar:{defaults:"in=0,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(2,t).madd(e,i)}},$kr:{defaults:"in=0,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(1,t).madd(e,i)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Delay1=function(){var t=function(){this.process=1===this.bufLength?i:e,this._x1=0,i.call(this)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._x1,n=0;t>n;n+=8)e[n]=s,e[n+1]=i[n],e[n+2]=i[n+1],e[n+3]=i[n+2],e[n+4]=i[n+3],e[n+5]=i[n+4],e[n+6]=i[n+5],e[n+7]=i[n+6],s=i[n+7];this._x1=s},i=function(){this.outputs[0][0]=this._x1,this._x1=this.inputs[0][0]};return t}(),s.ugen.specs.Delay2=s.ugen.specs.Delay1,s.unit.specs.Delay2=function(){var t=function(){this.process=1===this.bufLength?i:e,this._x1=this._x2=0,i.call(this)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._x1,n=this._x2,r=0;t>r;r+=8)e[r]=s,e[r+1]=n,e[r+2]=i[r],e[r+3]=i[r+1],e[r+4]=i[r+2],e[r+5]=i[r+3],e[r+6]=i[r+4],e[r+7]=i[r+5],s=i[r+6],n=i[r+7];this._x1=s,this._x2=n},i=function(){this.outputs[0][0]=this._x1,this._x1=this._x2,this._x2=this.inputs[0][0]};return t}();var u=function(t,e,i){return Math.max(i,Math.min(e*t.rate.sampleRate,t._fdelaylen))},o=function(t,e){return 0===t||0===e?0:e>0?+Math.exp(r*t/+e):-Math.exp(r*t/-e)},h=function(t,e,i){return t[i&e]},c=function(t,e,i,s){var n=t[i&e],r=t[i-1&e];return n+s*(r-n)},p=function(t,e,i,s){var n=t[i+1&e],r=t[i&e],u=t[i-1&e],o=t[i-2&e];return a(s,n,r,u,o)};s.ugen.specs.DelayN={$ar:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.ugen.specs.DelayL=s.ugen.specs.DelayN,s.ugen.specs.DelayC=s.ugen.specs.DelayN;var l=function(t){t._maxdelaytime=t.inputs[1][0],t._delaytime=t.inputs[2][0],t._dlybuf=0;var e=Math.ceil(t._maxdelaytime*t.rate.sampleRate+1);e+=t.rate.bufLength,e=1<<Math.ceil(Math.log(e)*Math.LOG2E),t._fdelaylen=t._idelaylen=e,t._dlybuf=new Float32Array(e),t._mask=e-1,t._dsamp=u(t,t._delaytime,1),t._numoutput=0,t._iwrphase=0},f=function(t,e,i){var s,n,r,a=t.outputs[0],o=t.inputs[0],h=t.inputs[2][0],c=t._dlybuf,p=t._iwrphase,l=t._dsamp,f=t._mask;if(h===t._delaytime)for(s=l-(0|l),r=0;e>r;++r)c[p&f]=o[r],n=p-(0|l),a[r]=i(c,f,n,s),p+=1;else{var _=u(t,h,1),d=(_-l)*t.rate.slopeFactor;for(r=0;e>r;++r)c[p&f]=o[r],l+=d,s=l-(0|l),n=p-(0|l),a[r]=i(c,f,n,s),p+=1;t._dsamp=_,t._delaytime=h}p>c.length&&(p-=c.length),t._iwrphase=p};s.unit.specs.DelayN=function(){var t=function(){l(this),this.process=e},e=function(t){f(this,t,h)};return t}(),s.unit.specs.DelayL=function(){var t=function(){l(this),this.process=e},e=function(t){f(this,t,c)};return t}(),s.unit.specs.DelayC=function(){var t=function(){l(this),this.process=e},e=function(t){f(this,t,p)};return t}(),s.ugen.specs.CombN={$ar:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(2,t,e,i,s).madd(n,r)}},$kr:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(1,t,e,i,s).madd(n,r)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.ugen.specs.CombL=s.ugen.specs.CombN,s.ugen.specs.CombC=s.ugen.specs.CombN;var _=function(t){var e;t._maxdelaytime=t.inputs[1][0],t._delaytime=t.inputs[2][0],t._decaytime=t.inputs[3][0],e=Math.ceil(t._maxdelaytime*t.rate.sampleRate+1),e+=t.rate.bufLength,e=1<<Math.ceil(Math.log(e)*Math.LOG2E),t._fdelaylen=t._idelaylen=e,t._dlybuf=new Float32Array(e),t._mask=e-1,t._dsamp=u(t,t._delaytime,1),t._iwrphase=0,t._feedbk=o(t._delaytime,t._decaytime)},d=function(t,e,i){var s,n,r,a,h,c,p,l=t.outputs[0],f=t.inputs[0],_=t.inputs[2][0],d=t.inputs[3][0],m=t._dlybuf,y=t._iwrphase,g=t._dsamp,v=t._feedbk,b=t._mask,w=g-(0|g);if(_===t._delaytime)if(s=y-(0|g),d===t._decaytime)for(p=0;e>p;++p)n=i(m,b,s,w)||0,m[y&b]=f[p]+v*n||0,l[p]=n,s++,y++;else{for(r=o(_,d),a=(r-v)*t.rate.slopeFactor,p=0;e>p;++p)n=i(m,b,s,w)||0,m[y&b]=f[p]+v*n||0,l[p]=n,v+=a,s++,y++;t._feedbk=r,t._decaytime=d}else{for(h=u(t,_,1),c=(h-g)*t.rate.slopeFactor,r=o(_,d),a=(r-v)*t.rate.slopeFactor,p=0;e>p;++p)s=y-(0|g),n=i(m,b,s,w)||0,m[y&b]=f[p]+v*n||0,l[p]=n,g+=c,v+=a,s++,y++;t._feedbk=v,t._dsamp=g,t._delaytime=_,t._decaytime=d}t._iwrphase=y};s.unit.specs.CombN=function(){var t=function(){_(this),this.process=e},e=function(t){d(this,t,h)};return t}(),s.unit.specs.CombL=function(){var t=function(){_(this),this.process=e},e=function(t){d(this,t,c)};return t}(),s.unit.specs.CombC=function(){var t=function(){_(this),this.process=e},e=function(t){d(this,t,p)};return t}(),s.ugen.specs.AllpassN={$ar:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(2,t,e,i,s).madd(n,r)}},$kr:{defaults:"in=0,maxdelaytime=0.2,delaytime=0.2,decaytime=1,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(1,t,e,i,s).madd(n,r)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.ugen.specs.AllpassL=s.ugen.specs.AllpassN,s.ugen.specs.AllpassC=s.ugen.specs.AllpassN;var m=_,y=function(t,e,i){var s,n,r,a,h,c,p,l,f,_=t.outputs[0],d=t.inputs[0],m=t.inputs[2][0],y=t.inputs[3][0],g=t._dlybuf,v=t._iwrphase,b=t._dsamp,w=t._feedbk,k=t._mask;if(m===t._delaytime)if(s=v-(0|b),n=b-(0|b),y===t._decaytime)for(f=0;e>f;++f)r=i(g,k,s,n)||0,a=r*w+d[f]||0,g[v&k]=a,_[f]=r-w*a,s++,v++;else{for(h=o(m,y),c=(h-w)*t.rate.slopeFactor,f=0;e>f;++f)r=i(g,k,s,n)||0,a=r*w+d[f]||0,g[v&k]=a,_[f]=r-w*a,w+=c,s++,v++;t._feedbk=h,t._decaytime=y}else{for(p=u(t,m,1),l=(p-b)*t.rate.slopeFactor,h=o(m,y),c=(h-w)*t.rate.slopeFactor,f=0;e>f;++f)s=v-(0|b),n=b-(0|b),r=i(g,k,s,n)||0,a=r*w+d[f]||0,g[v&k]=a,_[f]=r-w*a,b+=l,w+=c,s++,v++;t._feedbk=w,t._dsamp=b,t._delaytime=m,t._decaytime=y}t._iwrphase=v};s.unit.specs.AllpassN=function(){var t=function(){m(this),this.process=e},e=function(t){y(this,t,h)};return t}(),s.unit.specs.AllpassL=function(){var t=function(){m(this),this.process=e},e=function(t){y(this,t,c)};return t}(),s.unit.specs.AllpassC=function(){var t=function(){m(this),this.process=e},e=function(t){y(this,t,p)};return t}(),i.exports={}}),n("cc/plugins/demand",function(t,e,i){var s=t("../cc"),n=function(t,e){var i=t.fromUnits[e];return i&&3===i.calcRate},r=function(t,e){var i=t.fromUnits[e];return i&&3===i.calcRate&&i.process(1),t.inputs[e][0]},a=function(t,e,i){var s=t.fromUnits[e];if(!s)return t.inputs[e][0];switch(s.calcRate){case 2:return t.inputs[e][i-1];case 3:s.process(i);default:return t.inputs[e][0]}},u=function(t,e){var i=t.fromUnits[e];i&&3===i.calcRate&&i.process(0)};s.ugen.specs.Demand={Klass:s.MultiOutUGen,$ar:{defaults:"trig=0,reset=0,demandUGens=[]",ctor:function(t,e,i){return this.multiNewList([2,t,e].concat(i))}},$kr:{defaults:"trig=0,reset=0,demandUGens=[]",ctor:function(t,e,i){return this.multiNewList([1,t,e].concat(i))}},init:function(){return this.initOutputs(this.inputs.length-2,this.rate)},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Demand=function(){var t=function(){this.process=e,this._prevtrig=0,this._prevreset=0,this._prevout=new Float32Array(this.numOutputs)},e=function(t){for(var e,i,s,n,r,o=this.outputs,h=this.inputs,c=h[0],p=h[1],l=this._prevout,f=this._prevtrig,_=this._prevreset,d=this.numInputs,m=0;t>m;++m){if(e=c[m],i=p[m],i>0&&0>=_)for(n=2;d>n;++n)u(this,n);if(e>0&&0>=f)for(n=2,r=0;d>n;++n)s=a(this,n,m+1),isNaN(s)?(s=l[r],this.done=!0):l[r]=s,o[r][m]=s;else for(n=2,r=0;d>n;++n)o[r][m]=l[r];f=e,_=i}this._prevtrig=f,this._prevreset=_};return t}(),s.ugen.specs.Dgeom={$new:{defaults:"start=1,grow=2,length=Infinity",ctor:function(t,e,i){return this.multiNew(3,i,t,e)}}},s.unit.specs.Dgeom=function(){var t=function(){this.process=e,this._grow=0,this._value=0,this.process(0)},e=function(t){var e,i;if(t){if(e=a(this,2,t),isNaN(e)||(this._grow=e),this._repeats<0&&(i=a(this,0,t),this._repeats=Math.floor(i),this._value=a(this,1,t)),this._repeatCount>=this._repeats)return void(this.outputs[0][0]=0/0);this.outputs[0][0]=this._value,this._value*=this._grow,this._repeatCount++}else this._repeats=-1,this._repeatCount=0};return t}(),s.ugen.specs.Dseries={$new:{defaults:"start=1,step=1,length=Infinity",ctor:function(t,e,i){return this.multiNew(3,i,t,e)}}},s.unit.specs.Dseries=function(){var t=function(){this.process=e,this._step=0,this._value=0,this.process(0)},e=function(t){var e,i;if(t){if(e=a(this,2,t),isNaN(e)||(this._step=e),this._repeats<0&&(i=a(this,0,t),this._repeats=Math.floor(i),this._value=a(this,1,t)),this._repeatCount>=this._repeats)return void(this.outputs[0][0]=0/0);this.outputs[0][0]=this._value,this._value+=this._step,this._repeatCount++}else this._repeats=-1,this._repeatCount=0};return t}(),s.ugen.specs.Dwhite={$new:{defaults:"lo=0,hi=1,length=Infinity",ctor:function(t,e,i){return this.multiNew(3,i,t,e)}}},s.unit.specs.Dwhite=function(){var t=function(){this.process=e,this._lo=0,this._hi=0,this.process(0)},e=function(t){var e,i,s;if(t){if(this._repeats<0&&(s=a(this,0,t),this._repeats=Math.floor(s)),this._repeatCount>=this._repeats)return void(this.outputs[0][0]=0/0);this._repeatCount++,e=a(this,1,t),i=a(this,2,t),isNaN(e)||(this._lo=e),isNaN(i)||(this._hi=i),this.outputs[0][0]=Math.random()*(this._hi-this._lo)+this._lo}else this._repeats=-1,this._repeatCount=0};return t}(),s.ugen.specs.Diwhite={$new:{defaults:"lo=0,hi=127,length=Infinity",ctor:function(t,e,i){return this.multiNew(3,i,t,e)}}},s.unit.specs.Diwhite=function(){var t=function(){this.process=e,this._lo=0,this._hi=0,this.process(0)},e=function(t){var e,i,s;if(t){if(this._repeats<0&&(s=a(this,0,t),this._repeats=Math.floor(s)),this._repeatCount>=this._repeats)return void(this.outputs[0][0]=0/0);this._repeatCount++,e=a(this,1,t),i=a(this,2,t),isNaN(e)||(this._lo=Math.floor(e)),isNaN(i)||(this._hi=Math.floor(i)),this.outputs[0][0]=Math.floor(Math.random()*(this._hi-this._lo)+this._lo)}else this._repeats=-1,this._repeatCount=0};return t}();var o={$new:{defaults:"list=[],repeats=1",ctor:function(t,e){return this.multiNewList([3,e].concat(t))}}};s.ugen.specs.Dser=o,s.unit.specs.Dser=function(){var t=function(){this.process=e,this.process(0)},e=function(t){var e,i=this.outputs[0];if(t)for(this._repeats<0&&(e=a(this,0,t),this._repeats=isNaN(e)?0:Math.floor(e+.5));;){if(this._index>=this.numInputs&&(this._index=1),this._repeatCount>=this._repeats)return void(i[0]=0/0);if(!n(this,this._index))return i[0]=this.inputs[this._index][0],this._index++,this._repeatCount++,void(this._needToResetChild=!0);if(this._needToResetChild&&(this._needToResetChild=!1,u(this,this._index)),e=a(this,this._index,t),!isNaN(e))return void(i[0]=e);this._index++,this._repeatCount++,this._needToResetChild=!0}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return t}(),s.ugen.specs.Dseq=o,s.unit.specs.Dseq=function(){var t=function(){this.process=e,this.process(0)},e=function(t){var e,i,s=this.outputs[0];if(t)for(this._repeats<0&&(e=a(this,0,t),this._repeats=isNaN(e)?0:Math.floor(e+.5)),i=0;;){if(this._index>=this.numInputs&&(this._index=1,this._repeatCount++),this._repeatCount>=this._repeats)return s[0]=0/0,void(this._index=1);if(!n(this,this._index))return s[0]=a(this,this._index,t),this._index++,void(this._needToResetChild=!0);if(this._needToResetChild&&(this._needToResetChild=!1,u(this,this._index)),e=a(this,this._index,t),!isNaN(e))return void(s[0]=e);if(this._index++,this._needToResetChild=!0,i++>this.numInputs)return}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return t}(),s.ugen.specs.Dshuf=o,s.unit.specs.Dshuf=function(){var t=function(){this.process=i;for(var t=new Array(this.numInputs-1),s=0,n=t.length;n>s;++s)t[s]=s+1;this._indices=t.sort(e),this.process(0)},e=function(){return Math.random()-.5},i=function(t){var e,i,s=this.outputs[0];if(t)for(this._repeats<0&&(e=a(this,0,t),this._repeats=isNaN(e)?0:Math.floor(e+.5)),i=0;;){if(this._index>=this.numInputs-1&&(this._index=0,this._repeatCount++),this._repeatCount>=this._repeats)return s[0]=0/0,void(this._index=0);var r=this._indices[this._index];if(!n(this,r))return s[0]=a(this,r,t),this._index++,void(this._needToResetChild=!0);if(this._needToResetChild&&(this._needToResetChild=!1,u(this,r)),e=a(this,r,t),!isNaN(e))return void(s[0]=e);if(this._index++,this._needToResetChild=!0,i++>this.numInputs)return}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return t}(),s.ugen.specs.Drand=o,s.unit.specs.Drand=function(){var t=function(){this.process=e,this.process(0)},e=function(t){var e,i=this.outputs[0];if(t)for(this._repeats<0&&(e=a(this,0,t),this._repeats=isNaN(e)?0:Math.floor(e+.5));;){if(this._repeatCount>=this._repeats)return void(i[0]=0/0);if(!n(this,this._index))return i[0]=this.inputs[this._index][0],this._index=(Math.random()*(this.numInputs-1)|0)+1,this._repeatCount++,void(this._needToResetChild=!0);if(this._needToResetChild&&(this._needToResetChild=!1,u(this,this._index)),e=a(this,this._index,t),!isNaN(e))return void(i[0]=e);this._index=(Math.random()*(this.numInputs-1)|0)+1,this._repeatCount++,this._needToResetChild=!0}else this._repeats=-1,this._repeatCount=0,this._needToResetChild=!0,this._index=1};return t}(),s.ugen.specs.Duty={$ar:{defaults:"dur=1,reset=0,level=1,doneAction=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e,s,i)}},$kr:{defaults:"dur=1,reset=0,level=1,doneAction=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e,s,i)}}};var h=0,c=1,p=2,l=3;s.unit.specs.Duty=function(){var t=function(){2===this.inRates[c]?(this.process=e,this._prevreset=0):3===this.inRates[c]?(this.process=s,this._prevreset=r(this,c)*this.rate.sampleRate):(this.process=i,this._prevreset=0),this._count=r(this,h)*this.rate.sampleRate-1,this._prevout=r(this,l),this.outputs[0][0]=this._prevout},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[c],r=this._prevout,o=this._count,f=this._prevreset,_=this.rate.sampleRate,d=0;t>d;++d)e=n[d],e>0&&0>=f&&(u(this,l),u(this,h),o=0),0>=o?(o=a(this,h,d+1)*_+o,isNaN(o)&&this.doneAction(this.inputs[3][p]),i=a(this,l,d+1),isNaN(i)?(i=r,this.doneAction(this.inputs[3][p])):r=i,s[d]=i):(o--,s[d]=r);this._count=o,this._prevreset=f,this._prevout=r},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[c],r=this._prevout,o=this._count,f=this._prevreset,_=this.rate.sampleRate;e=n[0];for(var d=0;t>d;++d)e>0&&0>=f&&(u(this,l),u(this,h),o=0),0>=o?(o=a(this,h,d+1)*_+o,isNaN(o)&&this.doneAction(this.inputs[p][0]),i=a(this,l,d+1),isNaN(i)?(i=r,this.doneAction(this.inputs[p][0])):r=i,s[d]=i):(o--,s[d]=r);this._count=o,this._prevreset=f,this._prevout=r},s=function(t){for(var e,i=this.outputs[0],s=this._prevout,n=this._count,r=this._prevreset,o=this.rate.sampleRate,f=0;t>f;++f)0>=r?(u(this,l),u(this,h),n=0,r=a(this,c,f+1)*o+r):r--,0>=n&&(n=a(this,h,f+1)*o+n,isNaN(n)&&this.doneAction(this.inputs[p][0]),e=a(this,l,f+1),isNaN(e)?(e=s,this.doneAction(this.inputs[p][0])):s=e,i[f]=e),i[f]=s,n--;this._count=n,this._prevreset=r,this._prevout=s};return t}(),s.ugen.specs.TDuty={$ar:{defaults:"dur=1,reset=0,level=1,doneAction=0,gapFirst=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,s,i,n)}},$kr:{defaults:"dur=1,reset=0,level=1,doneAction=0,gapFirst=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,s,i,n)}}},s.unit.specs.TDuty=function(){var t=function(){2===this.inRates[c]?(this.process=e,this._prevreset=0):3===this.inRates[c]?(this.process=s,this._prevreset=r(this,c)*this.rate.sampleRate):(this.process=i,this._prevreset=0),this._count=this.inputs[4][0]?r(this,h)*this.rate.sampleRate:0,this.outputs[0][0]=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[c],r=this._count,o=this._prevreset,f=this.rate.sampleRate,_=0;t>_;++_)e=n[_],e>0&&0>=o&&(u(this,l),u(this,h),r=0),0>=r?(r=a(this,h,2)*f+r,isNaN(r)&&this.doneAction(this.inputs[p][0]),i=a(this,l,_+1),isNaN(i)&&(i=0),s[_]=i):s[_]=0,r--,o=e;this._count=r,this._prevreset=o},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[c],r=this._count,o=this._prevreset,f=this.rate.sampleRate;e=n[0];for(var _=0;t>_;++_)e>0&&0>=o&&(u(this,l),u(this,h),r=0),0>=r?(r=a(this,h,2)*f+r,isNaN(r)&&this.doneAction(this.inputs[p][0]),i=a(this,l,_+1),isNaN(i)&&(i=0),s[_]=i):s[_]=0,r--,o=e;this._count=r,this._prevreset=o},s=function(t){for(var e,i=this.outputs[0],s=this._count,n=this._prevreset,r=this.rate.sampleRate,o=0;t>o;++o)0>=n?(u(this,l),u(this,h),s=0,n=a(this,c,o+1)*r+n):n--,0>=s?(s=a(this,h,2)*r+s,isNaN(s)&&this.doneAction(this.inputs[p][0]),e=a(this,l,o+1),isNaN(e)&&(e=0),i[o]=e):i[o]=0,s--;this._count=s,this._prevreset=n};return t}(),i.exports={}}),n("cc/plugins/env",function(t,e,i){var s=t("../cc"),n=0,r=1,a=2,u=3,o=4,h=5,c=6,p=7,l=8,f=9,_=0,d=1,m=2,y=3,g=4,v=5,b=6,w=7,k=9999,N=function(t){return t.asMultichannelArray()};s.ugen.specs.EnvGen={$ar:{defaults:"envelope,gate=1,levelScale=1,levelBias=0,timeScale=1,doneAction=0",ctor:function(t,e,i,s,n,r){return t=N(t)[0],this.multiNewList([2,e,i,s,n,r].concat(t))}},$kr:{defaults:"envelope,gate=1,levelScale=1,levelBias=0,timeScale=1,doneAction=0",ctor:function(t,e,i,s,n,r){return t=N(t)[0],this.multiNewList([1,e,i,s,n,r].concat(t))}}},s.unit.specs.EnvGen=function(){var t=function(){this.process=2===this.calcRate?e:i,this._level=this.inputs[h][0]*this.inputs[r][0]+this.inputs[a][0],this._endLevel=this._level,this._counter=0,this._stage=1e9,this._prevGate=0,this._released=!1,this._releaseNode=0|this.inputs[p][0],this._a1=0,this._a2=0,this._b1=0,this._y1=0,this._y2=0,this._grow=0,this._shape=0,i.call(this,1)},e=function(t){var e,i,s,h,p,N,x,A,M,S,R,P,T,I,L,O,C,F,E=this.outputs[0],D=this.inputs[n][0],B=this._counter,U=this._level,q=this._prevGate,$=0,G=!0,W=0;0>=q&&D>0?(this._stage=-1,this._released=!1,this.done=!1,B=W,G=!1):-1>=D&&q>-1&&!this._released?(e=0|this.inputs[c][0],x=-D-1,B=Math.max(1,x*this.rate.sampleRate|0)+W,this._stage=e,this._shape=d,this._endLevel=this.inputs[this.numInputs-4][0]*this.inputs[r][0]+this.inputs[a][0],this._grow=(this._endLevel-U)/B,this._released=!0,G=!0):q>0&&0>=D&&this._releaseNode>=0&&!this._released&&(B=W,this._stage=this._releaseNode-1,this._released=!0,G=!1),this._prevGate=D;for(var j=t;j;){var Y=!1;if(0===B&&(e=0|this.inputs[c][0],this._stage+1>=e?(B=1/0,this._shape=0,U=this._endLevel,this.done=!0,i=0|this.inputs[o][0],this.doneAction(i)):this._stage+1!==this._releaseNode||this._released?(this._stage+=1,Y=!0):(s=0|this.inputs[l][0],s>=0&&e>s?(this._stage=s,Y=!0):(B=1/0,this._shape=k,U=this._endLevel))),Y){if(p=(this._stage<<2)+f,p+4>this.numInputs)return;switch(h=this.inputs,N=h[0+p][0]*this.inputs[r][0]+this.inputs[a][0],x=h[1+p][0]*this.inputs[u][0],A=0|h[2+p][0],M=h[3+p][0],this._endLevel=N,this._shape=A,B=Math.max(1,x*this.rate.sampleRate|0),1===B&&(this._shape=d),this._shape){case _:U=N;break;case d:this._grow=(N-U)/B;break;case m:Math.abs(U)<1e-6&&(U=1e-6),this._grow=Math.pow(N/U,1/B);break;case y:S=Math.PI/B,this._a2=.5*(N+U),this._b1=2*Math.cos(S),this._y1=.5*(N-U),this._y2=this._y1*Math.sin(.5*Math.PI-S),U=this._a2-this._y1;break;case g:S=.5*Math.PI/B,this._b1=2*Math.cos(S),N>=U?(this._a2=U,this._y1=0,this._y2=-Math.sin(S)*(N-U)):(this._a2=N,this._y1=U-N,this._y2=Math.cos(S)*(U-N)),U=this._a2+this._y1;break;case v:Math.abs(M)<.001?(this._shape=d,this._grow=(N-U)/B):(R=(N-U)/(1-Math.exp(M)),this._a2=U+R,this._b1=R,this._grow=Math.exp(M/B));break;case b:this._y1=Math.sqrt(U),this._y2=Math.sqrt(N),this._grow=(this._y2-this._y1)/B;break;case w:this._y1=Math.pow(U,.33333333),this._y2=Math.pow(N,.33333333),this._grow=(this._y2-this._y1)/B}}var z=Math.min(j,B);switch(C=this._grow,P=this._a2,T=this._b1,L=this._y1,O=this._y2,this._shape){case _:for(F=0;z>F;++F)E[$++]=U;break;case d:for(F=0;z>F;++F)E[$++]=U,U+=C;break;case m:for(F=0;z>F;++F)E[$++]=U,U*=C;break;case y:for(F=0;z>F;++F)E[$++]=U,I=T*L-O,U=P-I,O=L,L=I;break;case g:for(F=0;z>F;++F)E[$++]=U,I=T*L-O,U=P+I,O=L,L=I;break;case v:for(F=0;z>F;++F)E[$++]=U,T*=C,U=P-T;break;case b:for(F=0;z>F;++F)E[$++]=U,L+=C,U=L*L;break;case w:for(F=0;z>F;++F)E[$++]=U,L+=C,U=L*L*L;break;case k:for(F=0;z>F;++F)E[$++]=U}j-=z,B-=z}this._level=U,this._counter=B,this._a2=P,this._b1=T,this._y1=L,this._y2=O},i=function(){var t,e,i,s,h,p,N,x,A,M,S,R,P,T,I,L,O,C=this.outputs[0],F=this.inputs[n][0],E=this._counter,D=this._level,B=this._prevGate,U=!0,q=0;0>=B&&F>0?(this._stage=-1,this._released=!1,this.done=!1,E=q,U=!1):-1>=F&&B>-1&&!this._released?(t=0|this.inputs[c][0],N=-F-1,E=Math.max(1,N*this.rate.sampleRate|0)+q,this._stage=t,this._shape=d,this._endLevel=this.inputs[this.numInputs-4][0]*this.inputs[r][0]+this.inputs[a][0],this._grow=(this._endLevel-D)/E,this._released=!0,U=!0):B>0&&0>=F&&this._releaseNode>=0&&!this._released&&(E=q,this._stage=this._releaseNode-1,this._released=!0,U=!1),this._prevGate=F;var $=!1;if(0>=E&&(t=0|this.inputs[c][0],this._stage+1>=t?(E=1/0,this._shape=0,D=this._endLevel,this.done=!0,e=0|this.inputs[o][0],this.doneAction(e)):this._stage+1!==this._releaseNode||this._released?(this._stage+=1,$=!0):(i=0|this.inputs[l][0],i>=0&&t>i?(this._stage=i,$=!0):(E=1/0,this._shape=k,D=this._endLevel))),$){if(h=(this._stage<<2)+f,h+4>this.numInputs)return;switch(s=this.inputs,p=s[0+h][0]*this.inputs[r][0]+this.inputs[a][0],N=s[1+h][0]*this.inputs[u][0],x=0|s[2+h][0],A=s[3+h][0],this._endLevel=p,this._shape=x,E=Math.max(1,N*this.rate.sampleRate|0),1===E&&(this._shape=d),this._shape){case _:D=p;break;case d:this._grow=(p-D)/E;break;case m:Math.abs(D)<1e-6&&(D=1e-6),this._grow=Math.pow(p/D,1/E);break;case y:M=Math.PI/E,this._a2=.5*(p+D),this._b1=2*Math.cos(M),this._y1=.5*(p-D),this._y2=this._y1*Math.sin(.5*Math.PI-M),D=this._a2-this._y1;break;case g:M=.5*Math.PI/E,this._b1=2*Math.cos(M),p>=D?(this._a2=D,this._y1=0,this._y2=-Math.sin(M)*(p-D)):(this._a2=p,this._y1=D-p,this._y2=Math.cos(M)*(D-p)),D=this._a2+this._y1;break;case v:Math.abs(A)<.001?(this._shape=d,this._grow=(p-D)/E):(S=(p-D)/(1-Math.exp(A)),this._a2=D+S,this._b1=S,this._grow=Math.exp(A/E));break;case b:this._y1=Math.sqrt(D),this._y2=Math.sqrt(p),this._grow=(this._y2-this._y1)/E;break;case w:this._y1=Math.pow(D,.33333333),this._y2=Math.pow(p,.33333333),this._grow=(this._y2-this._y1)/E}}switch(O=this._grow,R=this._a2,P=this._b1,I=this._y1,L=this._y2,this._shape){case _:break;case d:D+=O;break;case m:D*=O;break;case y:T=P*I-L,D=R-T,L=I,I=T;break;case g:T=P*I-L,D=R+T,L=I,I=T;break;case v:P*=O,D=R-P;break;case b:I+=O,D=I*I;break;case w:I+=O,D=I*I*I;break;case k:}C[0]=D,this._level=D,this._counter=E-1,this._a2=R,this._b1=P,this._y1=I,this._y2=L};return t}(),s.ugen.specs.Linen={$kr:{defaults:"gate=1,attackTime=0.01,susLevel=1,releaseTime=1,doneAction=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i,s,n)}}},s.unit.specs.Linen=function(){var t=function(){this.process=e,this._level=0,this._stage=4,this._prevGate=0,this._slope=0,this._counter=0,this.process(1)},e=function(){var t,e,i,s,n=this.outputs[0],r=this.inputs[0][0];switch(this._prevGate<=0&&r>0&&(this.done=!1,this._stage=0,t=this.inputs[1][0],e=this.inputs[2][0],s=Math.max(1,t*this.rate.sampleRate|0),this._slope=(e-this._level)/s,this._counter=s),this._stage){case 0:case 2:n[0]=this._level,this._level+=this._slope,0===--this._counter&&this._stage++;break;case 1:n[0]=this._level,-1>=r?(this._stage=2,i=-r-1,s=Math.max(1,i*this.rate.sampleRate|0),this._slope=-this._level/s,this._counter=s):0>=r&&(this._stage=2,i=this.inputs[3][0],s=Math.max(1,i*this.rate.sampleRate|0),this._slope=-this._level/s,this._counter=s);break;case 3:n[0]=0,this.done=!0,this._stage++,this.doneAction(this.inputs[4][0]);break;case 4:n[0]=0}this._prevGate=r};return t}(),s.ugen.specs.Free={$kr:{defaults:"trig=0,id=0",ctor:function(t,e){return this.multiNew(1,t,e)}}},s.unit.specs.Free=function(){var t=function(){this.process=e,this._prevtrig=0,this.process(1)},e=function(){var t,e,i=this.inputs[0][0];i>0&&this._prevtrig<=0&&(t=0|this.inputs[1][0],t&&(e=this.world.nodes[t],e&&e.end())),this._prevtrig=i,this.outputs[0][0]=i};return t}(),s.ugen.specs.FreeSelf={$kr:{defaults:"in=0",ctor:function(t){return this.multiNew(1,t)}}},s.unit.specs.FreeSelf=function(){var t=function(){this.process=e,this._prevtrig=0,this.process(1)},e=function(){var t=this.inputs[0][0];t>0&&this._prevtrig<=0&&this.parent.end(),this._prevtrig=t,this.outputs[0][0]=t};return t}(),s.ugen.specs.FreeSelfWhenDone={$kr:{defaults:"src=0",ctor:function(t){return this.multiNew(1,t)}}},s.unit.specs.FreeSelfWhenDone=function(){var t=function(){this.process=e,this._src=this.fromUnits[0],this.process(1)},e=function(){var t=this._src;t&&t.done&&(this.parent.end(),this.process=i),this.outputs[0][0]=this.inputs[0][0]},i=function(){this.outputs[0][0]=0};return t}(),s.ugen.specs.Pause={$kr:{defaults:"gate=0,id=0",ctor:function(t,e){return this.multiNew(1,t,e)}}},s.unit.specs.Pause=function(){var t=function(){this.process=e,this._state=1,this.outputs[0][0]=this.inputs[0][0]},e=function(){var t,e,i=this.inputs[0][0],s=0===i?0:1;s!==this._state&&(this._state=s,t=0|this.inputs[1][0],t&&(e=this.world.nodes[t],e&&e.run(s))),this.outputs[0][0]=i};return t}(),s.ugen.specs.PauseSelf={$kr:{defaults:"in=0",ctor:function(t){return this.multiNew(1,t)}}},s.unit.specs.PauseSelf=function(){var t=function(){this.process=e,this._prevtrig=0,this.process(1)},e=function(){var t=this.inputs[0][0];t>0&&this._prevtrig<=0&&this.parent.run(0),this._prevtrig=t,this.outputs[0][0]=t};return t}(),s.ugen.specs.PauseSelfWhenDone={$kr:{defaults:"src=0",ctor:function(t){return this.multiNew(1,t)}}},s.unit.specs.PauseSelfWhenDone=function(){var t=function(){this.process=e,this._src=this.fromUnits[0],this.process(1)},e=function(){var t=this._src;t&&t.done&&(this.parent.run(0),this.process=i),this.outputs[0][0]=this.inputs[0][0]},i=function(){this.outputs[0][0]=0};return t}(),s.ugen.specs.Done={$kr:{defaults:"src=0",ctor:function(t){return this.multiNew(1,t)}}},s.unit.specs.Done=function(){var t=function(){this.process=e,this._src=this.fromUnits[0],this.process(1)},e=function(){var t=this._src;this.outputs[0][0]=t&&t.done?1:0};return t}(),i.exports={}}),n("cc/plugins/filter",function(t,e,i){var s=t("../cc"),n=Math.log(.001),r=Math.sqrt(2),a=function(t,e){var i=t.rate.filterLoops,s=t.rate.filterRemain;t.rate.filterLoops=0,t.rate.filterRemain=1,e.call(t,1),t.rate.filterLoops=i,t.rate.filterRemain=s};s.ugen.specs.Resonz={$ar:{defaults:"in=0,freq=440,bwr=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,freq=440,bwr=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Resonz=function(){var t=function(){this.process=e,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._rq=0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this._y1,u=this._y2,o=this._a0,h=this._b1,c=this._b2,p=this.rate,l=0;if(n!==this._freq||r!==this._rq){var f=n*p.radiansPerSample,_=f*r,d=1-.5*_,m=2*d,y=d*d,g=m*Math.cos(f)/(1+y),v=m*g,b=-y,w=.5*(1-y),k=p.filterSlope,N=(w-o)*k,x=(v-h)*k,A=(b-c)*k;for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-u),u=s[l]+h*t+c*a,i[l++]=o*(u-a),a=s[l]+h*u+c*t,i[l++]=o*(a-t),o+=N,h+=x,h+=A;this._freq=n,this._rq=r,this._a0=w,this._b1=v,this._b2=b}else for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-u),u=s[l]+h*t+c*a,i[l++]=o*(u-a),a=s[l]+h*u+c*t,i[l++]=o*(a-t);for(e=p.filterRemain;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-u),u=a,a=t;this._y1=a,this._y2=u};
return t}(),s.ugen.specs.OnePole={$ar:{defaults:"in=0,coef=0.5,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"in=0,coef=0.5,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.OnePole=function(){var t=function(){this.process=e,this._b1=this.inputs[1][0],this._y1=0,this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this._b1,a=this._y1,u=Math.max(-1,Math.min(this.inputs[1][0],1));if(r!==u){var o=(u-r)*this.rate.slopeFactor;if(r>0&&u>=0)for(i=0;t>i;++i)e=n[i],s[i]=a=e+r*(a-e),r+=o;else if(0>=r&&0>=u)for(i=0;t>i;++i)e=n[i],s[i]=a=e+r*(a+e),r+=o;else for(i=0;t>i;++i)e=n[i],s[i]=a=(1-Math.abs(r))*e+r*a,r+=o;this._b1=u}else if(r>=0)for(i=0;t>i;++i)e=n[i],s[i]=a=e+r*(a-e);else for(i=0;t>i;++i)e=n[i],s[i]=a=e+r*(a+e);this._y1=a};return t}(),s.ugen.specs.OneZero=s.ugen.specs.OnePole,s.unit.specs.OneZero=function(){var t=function(){this.process=e,this._b1=this.inputs[1][0],this._x1=this.inputs[0][0],this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this._b1,a=this._x1,u=Math.max(-1,Math.min(this.inputs[1][0],1));if(r!==u){var o=(u-r)*this.rate.slopeFactor;if(r>=0&&u>=0)for(i=0;t>i;++i)e=n[i],s[i]=e+r*(a-e),a=e,r+=o;else if(0>=r&&0>=u)for(i=0;t>i;++i)e=n[i],s[i]=e+r*(a+e),a=e,r+=o;else for(i=0;t>i;++i)e=n[i],s[i]=(1-Math.abs(r))*e+r*a,a=e,r+=o;this._b1=u}else if(r>=0)for(i=0;t>i;++i)e=n[i],s[i]=e+r*(a-e),a=e;else for(i=0;t>i;++i)e=n[i],s[i]=e+r*(a+e),a=e;this._x1=a};return t}(),s.ugen.specs.TwoPole={$ar:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.TwoPole=function(){var t=function(){this.process=e,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._reson=void 0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=Math.max(0,Math.min(this.inputs[2][0],1)),a=this._y1,u=this._y2,o=this._b1,h=this._b2,c=this.rate,p=0;if(n!==this._freq||r!==this._reson){var l=2*r*Math.cos(n*c.radiansPerSample),f=-(r*r),_=(l-o)*c.filterSlope,d=(f-h)*c.filterSlope;for(e=c.filterLoops;e--;)t=s[p]+o*a+h*u,i[p++]=t,u=s[p]+o*t+h*a,i[p++]=u,a=s[p]+o*u+h*t,i[p++]=a,o+=_,h+=d;this._freq=n,this._reson=r,this._b1=l,this._b2=f}else for(e=c.filterLoops;e--;)t=s[p]+o*a+h*u,i[p++]=t,u=s[p]+o*t+h*a,i[p++]=u,a=s[p]+o*u+h*t,i[p++]=a;for(e=c.filterRemain;e--;)t=s[p]+o*a+h*u,i[p++]=t,u=a,a=t;this._y1=a,this._y2=u};return t}(),s.ugen.specs.TwoZero=s.ugen.specs.TwoPole,s.unit.specs.TwoZero=function(){var t=function(){this.process=e,this._b1=0,this._b2=0,this._x1=0,this._x2=0,this._freq=void 0,this._reson=void 0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=Math.max(0,Math.min(this.inputs[2][0],1)),a=this._b1,u=this._b2,o=this._x1,h=this._x2,c=this.rate,p=0;if(n!==this._freq||r!==this._reson){var l=-2*r*Math.cos(n*c.radiansPerSample),f=r*r,_=(l-a)*c.filterSlope,d=(f-u)*c.filterSlope;for(e=c.filterLoops;e--;)t=s[p],i[p++]=t+a*o+u*h,h=s[p],i[p++]=h+a*t+u*o,o=s[p],i[p++]=o+a*h+u*t,a+=_,u+=d;this._freq=n,this._reson=r,this._b1=l,this._b2=f}else for(e=c.filterLoops;e--;)t=s[p],i[p++]=t+a*o+u*h,h=s[p],i[p++]=h+a*t+u*o,o=s[p],i[p++]=o+a*h+u*t;for(e=c.filterRemain;e--;)t=s[p],i[p++]=t+a*o+u*h,h=o,o=t;this._x1=o,this._x2=h};return t}(),s.ugen.specs.APF={$ar:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,freq=440,radius=0.8,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.APF=function(){var t=function(){this.process=e,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._x1=0,this._x2=0,this._freq=void 0,this._reson=void 0,a(this,e)},e=function(){var t,e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=Math.max(0,Math.min(this.inputs[2][0],1)),u=this._y1,o=this._y2,h=this._x1,c=this._x2,p=this._b1,l=this._b2,f=this.rate,_=0;if(r!==this._freq&&a!==this._reson){var d=2*a*Math.cos(r*f.radiansPerSample),m=-(a*a),y=(d-p)*f.filterSlope,g=(m-l)*f.filterSlope;for(i=f.filterLoops;i--;)t=n[_],s[_++]=e=t+p*(u-h)+l*(o-c),h=n[_],s[_++]=o=c+p*(e-t)+l*(o-h),c=n[_],s[_++]=u=h+p*(o-c)+l*(o-t),p+=y,l+=g;this._freq=r,this._reson=a,this._b1=d,this._b2=m}else for(i=f.filterLoops;i--;)t=n[_],s[_++]=e=t+p*(u-h)+l*(o-c),h=n[_],s[_++]=o=c+p*(e-t)+l*(o-h),c=n[_],s[_++]=u=h+p*(o-c)+l*(o-t);for(i=f.filterRemain;i--;)t=n[_],s[_++]=e=t+p*(u-h)+l*(o-c),o=u,u=e,c=h,h=t;this._y1=u,this._y2=o,this._x1=h,this._x2=c};return t}(),s.ugen.specs.LPF={$ar:{defaults:"in=0,freq=440,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"in=0,freq=440,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.LPF=function(){var t=function(){this.process=e,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=Math.max(.001,this.inputs[1][0]),a=this._y1,u=this._y2,o=this._a0,h=this._b1,c=this._b2,p=this.rate,l=0;if(n!==this._freq){var f=n*p.radiansPerSample*.5,_=1/Math.tan(f),d=_*_,m=_*r,y=1/(1+m+d),g=-2*(1-d)*y,v=-(1-m+d)*y,b=(y-o)*p.filterSlope,w=(g-h)*p.filterSlope,k=(v-c)*p.filterSlope;for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t+2*a+u),u=s[l]+h*t+c*a,i[l++]=o*(u+2*t+a),a=s[l]+h*u+c*t,i[l++]=o*(a+2*u+t),o+=b,h+=w,c+=k;this._freq=n,this._a0=y,this._b1=g,this._b2=v}else for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t+2*a+u),u=s[l]+h*t+c*a,i[l++]=o*(u+2*t+a),a=s[l]+h*u+c*t,i[l++]=o*(a+2*u+t);for(e=p.filterRemain;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t+2*a+u),u=a,a=t;this._y1=a,this._y2=u};return t}(),s.ugen.specs.HPF=s.ugen.specs.LPF,s.unit.specs.HPF=function(){var t=function(){this.process=e,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],a=this._y1,u=this._y2,o=this._a0,h=this._b1,c=this._b2,p=this.rate,l=0;if(n!==this._freq){var f=n*p.radiansPerSample*.5,_=Math.tan(f),d=_*_,m=_*r,y=1/(1+m+d),g=2*(1-d)*y,v=-(1-m+d)*y,b=(y-o)*p.filterSlope,w=(g-h)*p.filterSlope,k=(v-c)*p.filterSlope;for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-2*a+u),u=s[l]+h*t+c*a,i[l++]=o*(u-2*t+a),a=s[l]+h*u+c*t,i[l++]=o*(a-2*u+t),o+=b,h+=w,c+=k;this._freq=n,this._a0=y,this._b1=g,this._b2=v}else for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-2*a+u),u=s[l]+h*t+c*a,i[l++]=o*(u-2*t+a),a=s[l]+h*u+c*t,i[l++]=o*(a-2*u+t);for(e=p.filterRemain;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-2*a+u),u=a,a=t;this._y1=a,this._y2=u};return t}(),s.ugen.specs.BPF={$ar:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.BPF=function(){var t=function(){this.process=e,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._bw=void 0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this._y1,u=this._y2,o=this._a0,h=this._b1,c=this._b2,p=this.rate,l=0;if(n!==this._freq||r!==this._bw){var f=n*p.radiansPerSample,_=r*f*.5,d=_?1/Math.tan(_):0,m=2*Math.cos(f),y=1/(1+d),g=d*m*y,v=(1-d)*y,b=(y-o)*p.filterSlope,w=(g-h)*p.filterSlope,k=(v-c)*p.filterSlope;for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-u),u=s[l]+h*t+c*a,i[l++]=o*(u-a),a=s[l]+h*u+c*t,i[l++]=o*(a-t),o+=b,h+=w,c+=k;this._freq=n,this._bw=r,this._a0=y,this._b1=g,this._b2=v}else for(e=p.filterLoops;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-u),u=s[l]+h*t+c*a,i[l++]=o*(u-a),a=s[l]+h*u+c*t,i[l++]=o*(a-t);for(e=p.filterRemain;e--;)t=s[l]+h*a+c*u,i[l++]=o*(t-u),u=a,a=t;this._y1=a,this._y2=u};return t}(),s.ugen.specs.BRF=s.ugen.specs.BPF,s.unit.specs.BRF=function(){var t=function(){this.process=e,this._a0=0,this._a1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._bw=void 0,a(this,e)},e=function(){var t,e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.inputs[2][0],u=this._y1,o=this._y2,h=this._a0,c=this._a1,p=this._b2,l=this.rate,f=0;if(r!==this._freq||a!==this._bw){var _=r*l.radiansPerSample,d=a*_*.5,m=Math.tan(d),y=2*Math.cos(_),g=1/(1+m),v=-y*g,b=(1-m)*g,w=(g-h)*l.filterSlope,k=(v-c)*l.filterSlope,N=(b-p)*l.filterSlope;for(i=l.filterLoops;i--;)t=c*u,e=n[f]-t-p*o,s[f++]=h*(e+o)+t,t=c*e,o=n[f]-t-p*u,s[f++]=h*(o+u)+t,t=c*o,u=n[f]-t-p*e,s[f++]=h*(u+e)+t,h+=w,c+=k,p+=N;this._freq=r,this._bw=a,this._a0=g,this._a1=v,this._b2=b}else for(i=l.filterLoops;i--;)t=c*u,e=n[f]-t-p*o,s[f++]=h*(e+o)+t,t=c*e,o=n[f]-t-p*u,s[f++]=h*(o+u)+t,t=c*o,u=n[f]-t-p*e,s[f++]=h*(u+e)+t;for(i=l.filterRemain;i--;)t=c*u,e=n[f]-t-p*o,s[f++]=h*(e+o)+t,o=u,u=e;this._y1=u,this._y2=o};return t}(),s.ugen.specs.LeakDC={$ar:{defaults:"in=0,coef=0.995,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"in=0,coef=0.995,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.LeakDC=function(){var t=function(){this.process=1===this.bufLength?s:0===this.inRates[1]?i:e,this._b1=0,this._x1=this.inputs[0][0],this._y1=0,s.call(this,1)},e=function(t){var e,i,s,n=this.outputs[0],r=this.inputs[0],a=this._b1,u=this.inputs[1][0],o=this._y1,h=this._x1;if(a===u)for(s=0;t>s;++s)e=r[s],n[s]=o=e-h+a*o,h=e;else{for(i=(u-a)*this.rate.filterSlope,s=0;t>s;++s)e=r[s],n[s]=o=e-h+a*o,h=e,a+=i;this._b1=u}this._x1=h,this._y1=o},i=function(t){for(var e,i=this.outputs[0],s=this.inputs[0],n=this._b1,r=this._y1,a=this._x1,u=0;t>u;++u)e=s[u],i[u]=r=e-a+n*r,a=e;this._x1=a,this._y1=r},s=function(){var t=this._b1=this.inputs[1][0],e=this._y1,i=this._x1,s=this.inputs[0][0];this.outputs[0][0]=e=s-i+t*e,i=s,this._x1=i,this._y1=e};return t}(),s.ugen.specs.RLPF={$ar:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,freq=440,rq=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.RLPF=function(){var t=function(){this.process=e,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._reson=void 0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this._y1,u=this._y2,o=this._a0,h=this._b1,c=this._b2,p=this.rate,l=0;if(n!==this._freq||r!==this._reson){var f=Math.max(.001,r),_=n*p.radiansPerSample,d=Math.tan(_*f*.5),m=(1-d)/(1+d),y=Math.cos(_),g=(1+m)*y,v=-m,b=.25*(1+m-g),w=(b-o)*p.filterSlope,k=(g-h)*p.filterSlope,N=(v-c)*p.filterSlope;for(e=p.filterLoops;e--;)t=o*s[l]+h*a+c*u,i[l++]=t+2*a+u,u=o*s[l]+h*t+c*a,i[l++]=u+2*t+a,a=o*s[l]+h*u+c*t,i[l++]=a+2*u+t,o+=w,h+=k,c+=N;this._freq=n,this._reson=r,this._a0=b,this._b1=g,this._b2=v}else for(e=p.filterLoops;e--;)t=o*s[l]+h*a+c*u,i[l++]=t+2*a+u,u=o*s[l]+h*t+c*a,i[l++]=u+2*t+a,a=o*s[l]+h*u+c*t,i[l++]=a+2*u+t;for(e=p.filterRemain;e--;)t=o*s[l]+h*a+c*u,i[l++]=t+2*a+u,u=a,a=t;this._y1=a,this._y2=u};return t}(),s.ugen.specs.RHPF=s.ugen.specs.RLPF,s.unit.specs.RHPF=function(){var t=function(){this.process=e,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._reson=void 0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this._y1,u=this._y2,o=this._a0,h=this._b1,c=this._b2,p=this.rate,l=0;if(n!==this._freq||r!==this._reson){var f=Math.max(.001,r),_=n*p.radiansPerSample,d=Math.tan(_*f*.5),m=(1-d)/(1+d),y=Math.cos(_),g=(1+m)*y,v=-m,b=.25*(1+m+g),w=(b-o)*p.filterSlope,k=(g-h)*p.filterSlope,N=(v-c)*p.filterSlope;for(e=p.filterLoops;e--;)t=o*s[l]+h*a+c*u,i[l++]=t-2*a+u,u=o*s[l]+h*t+c*a,i[l++]=u-2*t+a,a=o*s[l]+h*u+c*t,i[l++]=a-2*u+t,o+=w,h+=k,c+=N;this._freq=n,this._reson=r,this._a0=b,this._b1=g,this._b2=v}else for(e=p.filterLoops;e--;)t=o*s[l]+h*a+c*u,i[l++]=t-2*a+u,u=o*s[l]+h*t+c*a,i[l++]=u-2*t+a,a=o*s[l]+h*u+c*t,i[l++]=a-2*u+t;for(e=p.filterRemain;e--;)t=o*s[l]+h*a+c*u,i[l++]=t-2*a+u,u=a,a=t;this._y1=a,this._y2=u};return t}(),s.ugen.specs.MidEQ={$ar:{defaults:"in=0,freq=440,rq=1,db=0,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(2,t,e,i,s).madd(n,r)}},$kr:{defaults:"in=0,freq=440,rq=1,db=0,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(1,t,e,i,s).madd(n,r)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.MidEQ=function(){var t=function(){this.process=e,this._a0=0,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=void 0,this._bw=void 0,this._db=void 0,a(this,e)},e=function(){var t,e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.inputs[2][0],u=this.inputs[3][0],o=this._y1,h=this._y2,c=this._a0,p=this._b1,l=this._b2,f=this.rate,_=0;if(r!==this._freq||a!==this._bw||u!==this._db){var d=Math.pow(10,.05*u)-1,m=r*f.radiansPerSample,y=a*m*.5,g=y?1/Math.tan(y):0,v=2*Math.cos(m),b=1/(1+g),w=g*v*b,k=(1-g)*b;b*=d;var N=(b-c)*f.filterSlope,x=(w-p)*f.filterSlope,A=(k-l)*f.filterSlope;for(i=f.filterLoops;i--;)e=n[_],t=e+p*o+l*h,s[_++]=e+c*(t-h),e=n[_],h=e+p*t+l*o,s[_++]=e+c*(h-o),e=n[_],o=e+p*h+l*t,s[_++]=e+c*(o-t),c+=N,p+=x,l+=A;this._freq=r,this._bw=a,this._db=u,this._a0=b,this._b1=w,this._b2=k}else for(i=f.filterLoops;i--;)e=n[_],t=e+p*o+l*h,s[_++]=e+c*(t-h),e=n[_],h=e+p*t+l*o,s[_++]=e+c*(h-o),e=n[_],o=e+p*h+l*t,s[_++]=e+c*(o-t);for(i=f.filterRemain;i--;)e=n[_],t=e+p*o+l*h,s[_++]=e+c*(t-h),h=o,o=t;this._y1=o,this._y2=h};return t}(),s.ugen.specs.LPZ1={$ar:{defaults:"in=0,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(2,t).madd(e,i)}},$kr:{defaults:"in=0,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(1,t).madd(e,i)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.LPZ1=function(){var t=function(){this.process=e,this._x1=this.inputs[0][0],this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this._x1,a=0;for(i=t>>3;i--;)e=n[a],s[a++]=.5*(e+r),r=n[a],s[a++]=.5*(r+e),e=n[a],s[a++]=.5*(e+r),r=n[a],s[a++]=.5*(r+e),e=n[a],s[a++]=.5*(e+r),r=n[a],s[a++]=.5*(r+e),e=n[a],s[a++]=.5*(e+r),r=n[a],s[a++]=.5*(r+e);for(i=3&t;i--;)e=n[a],s[a++]=.5*(e+r),r=e;this._x1=r};return t}(),s.ugen.specs.HPZ1=s.ugen.specs.LPZ1,s.unit.specs.HPZ1=function(){var t=function(){this.process=e,this._x1=this.inputs[0][0],this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this._x1,a=0;for(i=t>>3;i--;)e=n[a],s[a++]=.5*(e-r),r=n[a],s[a++]=.5*(r-e),e=n[a],s[a++]=.5*(e-r),r=n[a],s[a++]=.5*(r-e),e=n[a],s[a++]=.5*(e-r),r=n[a],s[a++]=.5*(r-e),e=n[a],s[a++]=.5*(e-r),r=n[a],s[a++]=.5*(r-e);for(i=3&t;i--;)e=n[a],s[a++]=.5*(e-r),r=e;this._x1=r};return t}(),s.ugen.specs.Slope=s.ugen.specs.LPZ1,s.unit.specs.Slope=function(){var t=function(){this.process=e,this._x1=this.inputs[0][0],this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this._x1,a=this.rate.sampleRate,u=0;for(i=t>>3;i--;)e=n[i],s[u++]=a*(e-r),r=n[i],s[u++]=a*(r-e),e=n[i],s[u++]=a*(e-r),r=n[i],s[u++]=a*(r-e),e=n[i],s[u++]=a*(e-r),r=n[i],s[u++]=a*(r-e),e=n[i],s[u++]=a*(e-r),r=n[i],s[u++]=a*(r-e);for(i=3&t;i--;)e=n[u],s[u++]=a*(e-r),r=e;this._x1=r};return t}(),s.ugen.specs.LPZ2=s.ugen.specs.LPZ1,s.unit.specs.LPZ2=function(){var t=function(){this.process=e,this._x1=this._x2=this.inputs[0][0],a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this._x1,r=this._x2,a=this.rate,u=0;for(e=a.filterLoops;e--;)t=s[u],i[u++]=.25*(t+2*n+r),r=s[u],i[u++]=.25*(r+2*t+n),n=s[u],i[u++]=.25*(n+2*r+t);for(e=a.filterRemain;e--;)t=s[u],i[u++]=.25*(t+2*n+r),r=n,n=t;this._x1=n,this._x2=r};return t}(),s.ugen.specs.HPZ2=s.ugen.specs.LPZ1,s.unit.specs.HPZ2=function(){var t=function(){this.process=e,this._x1=this._x2=this.inputs[0][0],a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this._x1,r=this._x2,a=this.rate,u=0;for(e=a.filterLoops;e--;)t=s[u],i[u++]=.25*(t-2*n+r),r=s[u],i[u++]=.25*(r-2*t+n),n=s[u],i[u++]=.25*(n-2*r+t);for(e=a.filterRemain;e--;)t=s[u],i[u++]=.25*(t-2*n+r),r=n,n=t;this._x1=n,this._x2=r};return t}(),s.ugen.specs.BPZ2=s.ugen.specs.LPZ1,s.unit.specs.BPZ2=function(){var t=function(){this.process=e,this._x1=this._x2=this.inputs[0][0],a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this._x1,r=this._x2,a=this.rate,u=0;for(e=a.filterLoops;e--;)t=s[u],i[u++]=.5*(t-r),r=s[u],i[u++]=.5*(r-n),n=s[u],i[u++]=.5*(n-t);for(e=a.filterRemain;e--;)t=s[u],i[u++]=.25*(t-r),r=n,n=t;this._x1=n,this._x2=r};return t}(),s.ugen.specs.BRZ2=s.ugen.specs.LPZ1,s.unit.specs.BRZ2=function(){var t=function(){this.process=e,this._x1=this._x2=this.inputs[0][0],a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this._x1,r=this._x2,a=this.rate,u=0;for(e=a.filterLoops;e--;)t=s[u],i[u++]=.5*(t+r),r=s[u],i[u++]=.5*(r+n),n=s[u],i[u++]=.5*(n+t);for(e=a.filterRemain;e--;)t=s[u],i[u++]=.25*(t+r),r=n,n=t;this._x1=n,this._x2=r};return t}(),s.ugen.specs.Changed={$ar:{defaults:"in=0,threshold=0",ctor:function(t,e){return s.global.HPZ1.ar(t).abs().gt(e)}},$kr:{defaults:"in=0,threshold=0",ctor:function(t,e){return s.global.HPZ1.kr(t).abs().gt(e)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.ugen.specs.Lag={$ar:{defaults:"in=0,lagTime=0.1,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"in=0,lagTime=0.1,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Lag=function(){var t=function(){this.process=1===this.rate.bufLength?i:e,this._lag=void 0,this._b1=0,this._y1=this.inputs[0][0],i.call(this,1)},e=function(t){var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1][0],u=this._y1,o=this._b1;if(a===this._lag)for(i=0;t>i;++i)e=r[i],s[i]=u=e+o*(u-e);else{this._b1=0===a?0:Math.exp(n/(a*this.rate.sampleRate));var h=(this._b1-o)*this.rate.slopeFactor;for(this._lag=a,i=0;t>i;++i)o+=h,e=r[i],s[i]=u=e+o*(u-e)}this._y1=u},i=function(){var t,e=this.outputs[0],i=this.inputs[1][0],s=this._y1,r=this._b1;i!==this._lag&&(this._b1=r=0===i?0:Math.exp(n/(i*this.rate.sampleRate)),this._lag=i),t=this.inputs[0][0],e[0]=s=t+r*(s-t),this._y1=s};return t}(),s.ugen.specs.Lag2=s.ugen.specs.Lag,s.unit.specs.Lag2=function(){var t=function(){this.process=0!==this.inRates[1]?e:1===this.rate.bufLength?s:i,this._lag=0/0,this._b1=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],e.call(this,1)},e=function(t){var e,i,s,r=this.outputs[0],a=this.inputs[0],u=this.inputs[1][0],o=this._y1a,h=this._y1b,c=this._b1;if(u===this._lag)for(s=0;t>s;++s)e=a[s],o=e+c*(o-e),h=o+c*(h-o),r[s]=h;else for(this._b1=0===u?0:Math.exp(n/(u*this.rate.sampleRate)),i=(this._b1-c)*this.rate.slopeFactor,this._lag=u,s=0;t>s;++s)c+=i,e=a[s],o=e+c*(o-e),h=o+c*(h-o),r[s]=h;this._y1a=o,this._y1b=h},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this._y1a,a=this._y1b,u=this._b1;for(i=0;t>i;++i)e=n[i],r=e+u*(r-e),a=r+u*(a-r),s[i]=a;this._y1a=r,this._y1b=a},s=function(){var t=this.outputs[0],e=this._y1a,i=this._y1b,s=this._b1,n=this.inputs[0][0];e=n+s*(e-n),i=e+s*(i-e),t[0]=i,this._y1a=e,this._y1b=i};return t}(),s.ugen.specs.Lag3=s.ugen.specs.Lag,s.unit.specs.Lag3=function(){var t=function(){this.process=0!==this.inRates[1]?e:1===this.rate.bufLength?i:e,this._lag=0/0,this._b1=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],this._y1c=this.inputs[0][0],e.call(this,1)},e=function(t){var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1][0],u=this._y1a,o=this._y1b,h=this._y1c,c=this._b1;if(a===this._lag)for(i=0;t>i;++i)e=r[i],u=e+c*(u-e),o=u+c*(o-u),h=o+c*(h-o),s[i]=h;else{this._b1=0===a?0:Math.exp(n/(a*this.rate.sampleRate));var p=(this._b1-c)*this.rate.slopeFactor;for(this._lag=a,i=0;t>i;++i)c+=p,e=r[i],u=e+c*(u-e),o=u+c*(o-u),h=o+c*(h-o),s[i]=h}this._y1a=u,this._y1b=o,this._y1c=h},i=function(){var t=this.outputs[0],e=this._y1a,i=this._y1b,s=this._y1c,n=this._b1,r=this.inputs[0][0];e=r+n*(e-r),i=e+n*(i-e),s=i+n*(s-i),t[0]=s,this._y1a=e,this._y1b=i,this._y1c=s};return t}(),s.ugen.specs.Ramp=s.ugen.specs.Lag,s.unit.specs.Ramp=function(){var t=function(){this.process=1===this.rate.bufLength?i:e,this._counter=1,this._level=this.inputs[0][0],this._slope=0,this.outputs[0][0]=this._level},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this._slope,u=this._level,o=this._counter,h=t,c=this.rate.sampleRate,p=0;h;){for(e=Math.min(h,o),i=0;e>i;++i)s[p++]=u,u+=a;o-=e,h-=e,0>=o&&(o=r*c|0,o=Math.max(1,o),a=(n[p-1]-u)/o)}this._level=u,this._slope=a,this._counter=o},i=function(){var t=this.outputs[0];if(t[0]=this._level,this._level+=this._slope,--this._counter<=0){var e=this.inputs[0][0],i=this.inputs[1][0],s=i*this.rate.sampleRate|0;this._counter=s=Math.max(1,s),this._slope=(e-this._level)/s}};return t}(),s.ugen.specs.LagUD={$ar:{defaults:"in=0,lagTimeU=0.1,lagTimeD=0.1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,lagTimeU=0.1,lagTimeD=0.1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.LagUD=function(){var t=function(){this.process=e,this._lagu=void 0,this._lagd=void 0,this._b1u=0,this._b1d=0,this._y1=this.inputs[0][0],this.process(1)},e=function(t){var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1][0],u=this.inputs[2][0],o=this._y1,h=this._b1u,c=this._b1d;if(a===this._lagu&&u===this._lagd)for(e=0;t>e;++e)i=r[e],s[e]=o=i>o?i+h*(o-i):i+c*(o-i);else{this._b1u=0===a?0:Math.exp(n/(a*this.rate.sampleRate));var p=(this._b1u-h)*this.rate.slopeFactor;this._lagu=a,this._b1d=0===u?0:Math.exp(n/(u*this.rate.sampleRate));var l=(this._b1d-c)*this.rate.slopeFactor;for(this._lagd=u,e=0;t>e;++e)h+=p,c+=l,i=r[e],s[e]=o=i>o?i+h*(o-i):i+c*(o-i)}this._y1=o};return t}(),s.ugen.specs.Lag2UD=s.ugen.specs.LagUD,s.unit.specs.Lag2UD=function(){var t=function(){this.process=e,this._lagu=0,this._lagd=0,this._b1u=0,this._b1d=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],this.process(1)},e=function(t){var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1][0],u=this.inputs[2][0],o=this._y1a,h=this._y1b,c=this._b1u,p=this._b1d;if(a===this._lagu&&u===this._lagd)for(e=0;t>e;++e)i=r[e],o=i>o?i+c*(o-i):i+p*(o-i),h=o>h?o+c*(h-o):o+p*(h-o),s[e]=h;else{this._b1u=0===a?0:Math.exp(n/(a*this.rate.sampleRate));var l=(this._b1u-c)*this.rate.slopeFactor;this._lagu=a,this._b1d=0===u?0:Math.exp(n/(u*this.rate.sampleRate));var f=(this._b1d-p)*this.rate.slopeFactor;for(this._lagd=u,e=0;t>e;++e)c+=l,p+=f,i=r[e],o=i>o?i+c*(o-i):i+p*(o-i),h=o>h?o+c*(h-o):o+p*(h-o),s[e]=h}this._y1a=o,this._y1b=h};return t}(),s.ugen.specs.Lag3UD=s.ugen.specs.LagUD,s.unit.specs.Lag3UD=function(){var t=function(){this.process=e,this._lagu=0,this._lagd=0,this._b1u=0,this._b1d=0,this._y1a=this.inputs[0][0],this._y1b=this.inputs[0][0],this._y1c=this.inputs[0][0],this.process(1)},e=function(t){var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1][0],u=this.inputs[2][0],o=this._y1a,h=this._y1b,c=this._y1c,p=this._b1u,l=this._b1d;if(a===this._lagu&&u===this._lagd)for(e=0;t>e;++e)i=r[e],o=i>o?i+p*(o-i):i+l*(o-i),h=o>h?o+p*(h-o):o+l*(h-o),c=o>h?h+p*(c-h):h+l*(c-h),s[e]=c;else{this._b1u=0===a?0:Math.exp(n/(a*this.rate.sampleRate));var f=(this._b1u-p)*this.rate.slopeFactor;this._lagu=a,this._b1d=0===u?0:Math.exp(n/(u*this.rate.sampleRate));var _=(this._b1d-l)*this.rate.slopeFactor;for(this._lagd=u,e=0;t>e;++e)p+=f,l+=_,i=r[e],o=i>o?i+p*(o-i):i+l*(o-i),h=o>h?o+p*(h-o):o+l*(h-o),c=o>h?h+p*(c-h):h+l*(c-h),s[e]=c}this._y1a=o,this._y1b=h,this._y1c=c};return t}(),s.ugen.specs.VarLag={$ar:{defaults:"in=0,time=0.1,curvature=0,warp=5,start=0,mul=1,add=0",ctor:function(t,e,i,s,n,r,a){return this.multiNew(2,t,e,i,s,n).madd(r,a)}},$kr:{defaults:"in=0,time=0.1,curvature=0,warp=5,start=0,mul=1,add=0",ctor:function(t,e,i,s,n,r,a){return this.multiNew(1,t,e,i,s,n).madd(r,a)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.VarLag=function(){var t=function(){this.process=1===this.bufLength?i:e;var t=this.inputs[1][0],s=Math.max(1,t*this.rate.sampleRate|0);this._level=this.inputs[2][0],this._counter=s,this._in=this.inputs[0][0],this._slope=(this._in-this._level)/s,this._lagTime=t,this.outputs[0][0]=this._level},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0][0],r=this.inputs[1][0],a=this._slope,u=this._level,o=this._counter;if(n!==this._in?(this._counter=o=Math.max(1,r*this.rate.sampleRate|0),this._slope=a=(n-this._in)/o,this._in=n,this._lagTime=r):r!==this._lagTime&&(i=r/this._lagTime,this._counter=o=Math.max(1,this._counter*i|0),this._slope=a=this._slope/i||0,this._lagTime=r),n=this._in,o>0)for(e=0;t>e;++e)s[e]=u,o>0?(u+=a,o-=1):u=n;else for(e=0;t>e;++e)s[e]=u;this._level=u,this._slope=a,this._counter=o},i=function(){var t,e=this.inputs[0][0],i=this.inputs[1][0],s=this._counter;e!==this._in?(this._counter=s=Math.max(1,i*this.rate.sampleRate|0),this._slope=(e-this._level)/s,this._in=e,this._lagTime=i):i!==this._lagTime&&(0!==s&&(t=i/this._lagTime,this._counter=s=Math.max(1,this._counter*t|0),this._slope=this._slope/t),this._lagTime=i),this.outputs[0][0]=this._level,this._counter>0?(this._level+=this._slope,this._counter-=1):this._level=this._in};return t}(),s.ugen.specs.Slew={$ar:{defaults:"in=0,up=1,dn=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,up=1,dn=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Slew=function(){var t=function(){this.process=e,this._level=this.inputs[0][0],this.process(1)},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0],n=this.rate.sampleDur,r=+this.inputs[1][0]*n,a=-this.inputs[2][0]*n,u=this._level,o=0;t>o;++o)e=s[o]-u,u+=Math.max(a,Math.min(e,r)),i[o]=u;this._level=u};return t}(),s.ugen.specs.FOS={$ar:{defaults:"in=0,a0=0,a1=0,b1=0,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(2,t,e,i,s).madd(n,r)}},$kr:{defaults:"in=0,a0=0,a1=0,b1=0,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(1,t,e,i,s).madd(n,r)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.FOS=function(){var t=function(){if(1===this.bufLength)this.process=i;else{var t=this.inRates;this.process=2===t[1]&&2===t[2]&&2===t[3]?e:s}this._y1=0,this._a0=0,this._a1=0,this._b1=0,i.call(this,1)},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1],r=this.inputs[2],a=this.inputs[3],u=this._y1,o=0;t>o;++o)e=s[o]+a[o]*u,i[o]=n[o]*e+r[o]*u||0,u=e;this._y1=u},i=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=this.inputs[2][0],s=this.inputs[3][0],n=this._y1,r=t+s*n;this.outputs[0][0]=e*r+i*n||0,n=r,this._y1=n},s=function(t){for(var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this.inputs[3][0],u=this.rate.filterSlope,o=this._y1,h=this._a0,c=this._a1,p=this._b1,l=(n-h)*u,f=(r-c)*u,_=(a-p)*u,d=0;t>d;++d)e=s[d]+p*o,i[d]=h*e+c*o||0,o=e,h+=l,c+=f,p+=_;this._y1=o,this._a0=h,this._a1=c,this._b1=p};return t}(),s.ugen.specs.SOS={$ar:{defaults:"in=0,a0=0,a1=0,a2=0,b1=0,b2=0,mul=1,add=0",ctor:function(t,e,i,s,n,r,a,u){return this.multiNew(2,t,e,i,s,n,r).madd(a,u)}},$kr:{defaults:"in=0,a0=0,a1=0,a2=0,b1=0,b2=0,mul=1,add=0",ctor:function(t,e,i,s,n,r,a,u){return this.multiNew(1,t,e,i,s,n,r).madd(a,u)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.SOS=function(){var t=function(){var t=this.inRates;this.process=1!==this.bufLength?2===t[1]&&2===t[2]&&2===t[3]&&2===t[4]&&2===t[5]?e:0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&0===t[5]?s:i:n,this._y1=0,this._y2=0,this._a0=this.inputs[1][0],this._a1=this.inputs[2][0],this._a2=this.inputs[3][0],this._b1=this.inputs[4][0],this._b2=this.inputs[5][0],n.call(this,1)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1],r=this.inputs[2],a=this.inputs[3],u=this.inputs[4],o=this.inputs[5],h=this._y1,c=this._y2,p=this.rate,l=0;for(e=p.filterLoops;e--;)t=s[l]+u[l]*h+o[l]*c,i[l]=n[l]*t+r[l]*h+a[l]*c,l++,c=s[l]+u[l]*t+o[l]*h,i[l]=n[l]*c+r[l]*t+a[l]*h,l++,h=s[l]+u[l]*c+o[l]*t,i[l]=n[l]*h+r[l]*c+a[l]*t,l++;for(e=p.filterRemain;e--;)t=s[l]+u[l]*h+o[l]*c,i[l]=n[l]*t+r[l]*h+a[l]*c,l++,c=h,h=t;this._y1=h,this._y2=c},i=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this.inputs[3][0],u=this.inputs[4][0],o=this.inputs[5][0],h=this._y1,c=this._y2,p=this._a0,l=this._a1,f=this._a2,_=this._b1,d=this._b2,m=this.rate,y=(n-p)*m.filterSlope,g=(r-l)*m.filterSlope,v=(a-f)*m.filterSlope,b=(u-_)*m.filterSlope,w=(o-d)*m.filterSlope,k=0;for(e=m.filterLoops;e--;)t=s[k]+_*h+d*c,i[k++]=p*t+l*h+f*c,c=s[k]+_*t+d*h,i[k++]=p*c+l*t+f*h,h=s[k]+_*c+d*t,i[k++]=p*h+l*c+f*t,p+=y,l+=g,f+=v,_+=b,d+=w;for(e=m.filterRemain;e--;)t=s[k]+_*h+d*c,i[k++]=p*t+l*h+f*c,c=h,h=t;this._a0=p,this._a1=l,this._a2=f,this._b1=_,this._b2=d,this._y1=h,this._y2=c},s=function(){var t,e,i=this.outputs[0],s=this.inputs[0],n=this._y1,r=this._y2,a=this._a0,u=this._a1,o=this._a2,h=this._b1,c=this._b2,p=this.rate,l=0;for(e=p.filterLoops;e--;)t=s[l]+h*n+c*r,i[l++]=a*t+u*n+o*r,r=s[l]+h*t+c*n,i[l++]=a*r+u*t+o*n,n=s[l]+h*r+c*t,i[l++]=a*n+u*r+o*t;for(e=p.filterRemain;e--;)t=s[l]+h*n+c*r,i[l++]=a*t+u*n+o*r,r=n,n=t;this._y1=n,this._y2=r},n=function(){var t,e=this.inputs[0][0],i=this.inputs[1][0],s=this.inputs[2][0],n=this.inputs[3][0],r=this.inputs[4][0],a=this.inputs[5][0],u=this._y1,o=this._y2;t=e+r*u+a*o,this.outputs[0][0]=i*t+s*u+n*o,o=u,u=t,this._y1=u,this._y2=o};return t}(),s.ugen.specs.Ringz={$ar:{defaults:"in=0,freq=440,decaytime=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"in=0,freq=440,decaytime=1,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Ringz=function(){var t=function(){this.process=e,this._b1=0,this._b2=0,this._y1=0,this._y2=0,this._freq=0/0,this._decayTime=0,a(this,e)},e=function(){var t,e,i=this.outputs[0],s=this.inputs[0],r=this.inputs[1][0],a=this.inputs[2][0],u=this._y1,o=this._y2,h=.5,c=this._b1,p=this._b2,l=this.rate,f=0;if(r!==this._freq||a!==this._decayTime){var _=r*l.radiansPerSample,d=0===a?0:Math.exp(n/(a*l.sampleRate)),m=2*d,y=d*d,g=m*Math.cos(_)/(1+y),v=m*g,b=-y,w=(v-c)*l.filterSlope,k=(b-p)*l.filterSlope;for(e=l.filterLoops;e--;)t=s[f]+c*u+p*o,i[f++]=h*(t-o),o=s[f]+c*t+p*u,i[f++]=h*(o-u),u=s[f]+c*o+p*t,i[f++]=h*(u-t),c+=w,p+=k;this._freq=r,this._decayTime=a,this._b1=v,this._b2=b}else for(e=l.filterLoops;e--;)t=s[f]+c*u+p*o,i[f++]=h*(t-o),o=s[f]+c*t+p*u,i[f++]=h*(o-u),u=s[f]+c*o+p*t,i[f++]=h*(u-t);for(e=l.filterRemain;e--;)t=s[f]+c*u+p*o,i[f++]=h*(t-o),o=u,u=t;this._y1=u,this._y2=o};return t}(),s.ugen.specs.DetectSilence={$ar:{defaults:"in=0,amp=0.0001,time=0.1,doneAction=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e,i,s)}},$kr:{defaults:"in=0,amp=0.0001,time=0.1,doneAction=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e,i,s)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.DetectSilence=function(){var t=function(){this.process=e,this._thresh=this.inputs[1][0],this._endCounter=this.rate.sampleRate*this.inputs[2][0]|0,this._counter=-1},e=function(t){for(var e,i=this._thresh,s=this._counter,n=this.inputs[0],r=this.outputs[0],a=0;t>a;++a)e=Math.abs(n[a]),e>i?(s=0,r[a]=0):s>=0&&++s>=this._endCounter?(this.doneAction(0|this.inputs[3][0]),r[a]=1):r[a]=0;this._counter=s};return t}(),i.exports={}}),n("cc/plugins/info",function(t,e,i){var s=t("../cc"),n={$ir:{ctor:function(){return this.multiNew(0)}}};s.ugen.specs.SampleRate=n,s.unit.specs.SampleRate=function(){var t=function(){this.outputs[0][0]=s.server.rates[2].sampleRate};return t}(),s.ugen.specs.SampleDur=n,s.unit.specs.SampleDur=function(){var t=function(){this.outputs[0][0]=s.server.rates[2].sampleDur
};return t}(),s.ugen.specs.RadiansPerSample=n,s.unit.specs.RadiansPerSample=function(){var t=function(){this.outputs[0][0]=s.server.rates[2].radiansPerSample};return t}(),s.ugen.specs.ControlRate=n,s.unit.specs.ControlRate=function(){var t=function(){this.outputs[0][0]=s.server.rates[1].sampleRate};return t}(),s.ugen.specs.ControlDur=n,s.unit.specs.ControlDur=function(){var t=function(){this.outputs[0][0]=s.server.rates[2].bufDuration};return t}(),i.exports={}}),n("cc/plugins/inout",function(t,e,i){var s=t("../cc"),n=[].slice;s.ugen.specs.In={Klass:s.MultiOutUGen,$ar:{defaults:"bus=0,numChannels=1",ctor:function(t,e){return this.multiNew(2,e,t)}},$kr:{defaults:"bus=0,numChannels=1",ctor:function(t,e){return this.multiNew(1,e,t)}},init:function(t){return this.inputs=n.call(arguments,1),this.numInputs=this.inputs.length,this.initOutputs(t,this.rate)}},s.unit.specs.In=function(){var t=function(){2===this.calcRate?(this.process=e,this._busOffset=0):(this.process=i,this._busOffset=16*this.bufLength)},e=function(t){for(var e=this.outputs[0],i=this.world.bus,s=this.bufLength,n=this.inputs[0][0]*s|0,r=0;t>r;++r)e[r]=i[n+r]},i=function(){var t=this.world.bus[this._busOffset+(0|this.inputs[0][0])];this.outputs[0][0]=t};return t}(),s.ugen.specs.A2K={$kr:{defaults:"in=0",ctor:function(t){if(2!==t.rate)throw new Error("first input is not audio rate");return this.multiNew(1,t)}}},s.unit.specs.A2K=function(){var t=function(){this.process=e},e=function(){this.outputs[0][0]=this.inputs[0][0]};return t}(),s.ugen.specs.K2A={$ar:{defaults:"in=0",ctor:function(t){return this.multiNew(2,t)}}},s.unit.specs.K2A=function(){var t=function(){this.process=e},e=function(t){for(var e=this.outputs[0],i=this.inputs[0][0],s=0;t>s;++s)e[s]=i};return t}(),s.ugen.specs.T2K={$kr:{defaults:"in=0",ctor:function(t){if(2!==t.rate)throw new Error("first input is not audio rate");return this.multiNew(1,t)}}},s.unit.specs.T2K=function(){var t=function(){this.process=e,this._bufLength=s.server.rates[2].bufLength,this.outputs[0][0]=this.input[0][0]},e=function(){for(var t,e=this.input[0],i=0,s=this._bufLength,n=0;s>n;++n)t=e[n],t>i&&(i=t);this.outputs[0][0]=i};return t}(),s.ugen.specs.T2A={$kr:{defaults:"in=0,offset=0",ctor:function(t,e){if(2!==t.rate)throw new Error("first input is not audio rate");return this.multiNew(2,t,e)}}},s.unit.specs.T2A=function(){var t=function(){this.process=e,this.process(1)},e=function(t){for(var e=this.outputs[0],i=this.input[0][0],s=0;t>s;++s)e[0]=0;this._level<=0&&i>0&&(this.outputs[0][0|this.input[1][0]]=i),this._level=i};return t}(),i.exports={}}),n("cc/plugins/line",function(t,e,i){var s=t("../cc");s.ugen.specs.Line={$ar:{defaults:"start=0,end=1,dur=1,mul=1,add=0,doneAction=0",ctor:function(t,e,i,s,n,r){return this.multiNew(2,t,e,i,r).madd(s,n)}},$kr:{defaults:"start=0,end=1,dur=1,mul=1,add=0,doneAction=0",ctor:function(t,e,i,s,n,r){return this.multiNew(1,t,e,i,r).madd(s,n)}}},s.unit.specs.Line=function(){var t=function(){this.process=e;var t=this.inputs[0][0],i=this.inputs[1][0],s=this.inputs[2][0],n=Math.round(s*this.rate.sampleRate);this._counter=Math.max(1,n),0===n?(this._level=i,this._slope=0):(this._slope=(i-t)/this._counter,this._level=t+this._slope),this._endLevel=i,this._doneAction=this.inputs[3][0],this.outputs[0][0]=this._level},e=function(t){var e,i=this.outputs[0],s=this._level,n=this._counter,r=this._slope,a=t;do{var u;if(0===n){u=a,a=0;var o=this._endLevel;for(e=0;u>e;++e)i[e]=o}else{for(u=Math.min(a,n),n-=u,a-=u,e=0;u>e;++e)i[e]=s,s+=r;0===n&&this.doneAction(this._doneAction)}}while(a);this._counter=n,this._level=s};return t}(),s.ugen.specs.XLine={$ar:{defaults:"start=1,end=2,dur=1,mul=1,add=0,doneAction=0",ctor:function(t,e,i,s,n,r){return this.multiNew(2,t,e,i,r).madd(s,n)}},$kr:{defaults:"start=1,end=2,dur=1,mul=1,add=0,doneAction=0",ctor:function(t,e,i,s,n,r){return this.multiNew(1,t,e,i,r).madd(s,n)}}},s.unit.specs.XLine=function(){var t=function(){this.process=e;var t=this.inputs[0][0]||.001,i=this.inputs[1][0]||.001,s=this.inputs[2][0],n=Math.round(s*this.rate.sampleRate);0===n?(this._level=i,this._counter=0,this._growth=0):(this._counter=n,this._growth=Math.pow(i/t,1/n),this._level=t*this._growth),this._endLevel=i,this._doneAction=this.inputs[3][0],this.outputs[0][0]=this._level},e=function(t){var e,i=this.outputs[0],s=this._level,n=this._counter,r=this._growth,a=t;do{var u;if(0===n){u=a,a=0;var o=this._endLevel;for(e=0;u>e;++e)i[e]=o}else{for(u=Math.min(a,n),n-=u,a-=u,e=0;u>e;++e)i[e]=s,s*=r;0===n&&this.doneAction(this._doneAction)}}while(a);this._counter=n,this._level=s};return t}(),i.exports={}}),n("cc/plugins/noise",function(t,e,i){var s=t("../cc"),n=t("./utils"),r=n.cubicinterp;s.ugen.specs.WhiteNoise={$ar:{defaults:"mul=1,add=0",ctor:function(t,e){return this.multiNew(2).madd(t,e)}},$kr:{defaults:"mul=1,add=0",ctor:function(t,e){return this.multiNew(1).madd(t,e)}}},s.unit.specs.WhiteNoise=function(){var t=function(){this.process=e,this.process(1)},e=function(t){for(var e=this.outputs[0],i=0;t>i;++i)e[i]=2*Math.random()-1};return t}(),s.ugen.specs.BrownNoise=s.ugen.specs.WhiteNoise,s.unit.specs.BrownNoise=function(){var t=function(){this.process=e,this._level=2*Math.random()-1,this.outputs[0][0]=this._level},e=function(t){for(var e=this.outputs[0],i=this._level,s=0;t>s;++s)i+=.25*Math.random()-.125,i>1?i=2-i:-1>i&&(i=-2-i),e[s]=i;this._level=i};return t}(),s.ugen.specs.PinkNoise=s.ugen.specs.WhiteNoise,s.unit.specs.PinkNoise=function(){var t=function(){this.process=i;for(var t=new Uint8Array(5),e=0;5>e;++e)t[e]=(1073741824*Math.random()|0)%25;this._whites=t,this._key=0,this.process(1)},e=31,i=function(t){var i,s,n,r,a,u=this.outputs[0],o=0|this._key,h=this._whites;for(r=0;t>r;++r){for(i=o++,o>e&&(o=0),n=i^o,a=s=0;5>a;++a)n&1<<a&&(h[a]=(1073741824*Math.random()|0)%25),s+=h[a];u[r]=.01666666*s-1}this._key=o};return t}(),s.ugen.specs.ClipNoise=s.ugen.specs.WhiteNoise,s.unit.specs.ClipNoise=function(){var t=function(){this.process=e,this.process(1)},e=function(t){for(var e=this.outputs[0],i=0;t>i;++i)e[i]=Math.random()<.5?-1:1};return t}(),s.ugen.specs.GrayNoise=s.ugen.specs.WhiteNoise,s.unit.specs.GrayNoise=function(){var t=function(){this.process=e,this._counter=0,this.process(1)},e=function(t){for(var e=this.outputs[0],i=this._counter,s=0;t>s;++s)i^=1<<(31*Math.random()|0),e[s]=4.65661287308e-10*i;this._counter=i};return t}(),s.ugen.specs.Crackle={$ar:{defaults:"chaosParam=1.5,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(2,t).madd(e,i)}},$kr:{defaults:"chaosParam=1.5,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(1,t).madd(e,i)}}},s.unit.specs.Crackle=function(){var t=function(){this.process=e,this._y1=Math.random(),this._y2=0,this.process(1)},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0][0],n=this._y1,r=this._y2,a=0;t>a;++a)i[a]=e=Math.abs(n*s-r-.05)||0,r=n,n=e;this._y1=n,this._y2=r};return t}(),s.ugen.specs.Logistic={$ar:{defaults:"chaosParam=1.5,freq=1000,init=0.5,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"chaosParam=1.5,freq=1000,init=0.5,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}}},s.unit.specs.Logistic=function(){var t=function(){this.process=e,this._y1=this.inputs[2][0],this._counter=0,this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0][0],r=this.inputs[1][0],a=this._y1,u=this._counter,o=t,h=this.rate.sampleRate,c=0;do for(0>=u&&(u=0|Math.max(1,h/Math.max(.001,r)),a=n*a*(1-a)),e=Math.min(u,o),u-=e,o-=e,i=0;e>i;++i)s[c++]=a;while(o);this._y1=a,this._counter=u};return t}(),s.ugen.specs.Dust={$ar:{defaults:"density=0,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(2,t).madd(e,i)}},$kr:{defaults:"density=0,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(1,t).madd(e,i)}}},s.unit.specs.Dust=function(){var t=function(){this.process=e,this._density=0,this._scale=0,this._thresh=0,this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0][0];n!==this._density?(e=this._thresh=n*this.rate.sampleDur,i=this._scale=e>0?1/e:0,this._density=n):(e=this._thresh,i=this._scale);for(var r=0;t>r;++r){var a=Math.random();s[r]=e>a?a*i:0}};return t}(),s.ugen.specs.Dust2=s.ugen.specs.Dust,s.unit.specs.Dust2=function(){var t=function(){this.process=e,this._density=0,this._scale=0,this._thresh=0,this.process(1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0][0];n!==this._density?(e=this._thresh=n*this.rate.sampleDur,i=this._scale=e>0?2/e:0,this._density=n):(e=this._thresh,i=this._scale);for(var r=0;t>r;++r){var a=Math.random();s[r]=e>a?a*i-1:0}};return t}(),s.ugen.specs.LFNoise0={$ar:{defaults:"freq=500,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(2,t).madd(e,i)}},$kr:{defaults:"freq=500,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(1,t).madd(e,i)}}},s.unit.specs.LFNoise0=function(){var t=function(){this.process=e,this._level=0,this._counter=0,this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0][0],n=this._level,r=this._counter,a=t,u=0;do{0>=r&&(r=Math.max(1,this.rate.sampleRate/Math.max(s,.001)|0),n=2*Math.random()-1);var o=Math.min(a,r);for(a-=o,r-=o,e=0;o>e;++e)i[u++]=n}while(a);this._counter=r,this._level=n};return t}(),s.ugen.specs.LFNoise1=s.ugen.specs.LFNoise0,s.unit.specs.LFNoise1=function(){var t=function(){this.process=e,this._level=2*Math.random()-1,this._counter=0,this._slope=0,this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0][0],n=this._level,r=this._slope,a=this._counter,u=t,o=0;do{if(0>=a){a=Math.max(1,this.rate.sampleRate/Math.max(s,.001)|0);var h=2*Math.random()-1;r=(h-n)/a}var c=Math.min(u,a);for(u-=c,a-=c,e=0;c>e;++e)i[o++]=n,n+=r}while(u);this._level=n,this._slope=r,this._counter=a};return t}(),s.ugen.specs.LFNoise2=s.ugen.specs.LFNoise0,s.unit.specs.LFNoise2=function(){var t=function(){this.process=e,this._level=0,this._counter=0,this._slope=0,this._curve=0,this._nextValue=2*Math.random()-1,this._nextMidPt=.5*this._nextValue,this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0][0],n=this._level,r=this._slope,a=this._curve,u=this._counter,o=t,h=0;do{if(0>=u){var c=this._nextValue;this._nextValue=2*Math.random()-1,n=this._nextMidPt,this._nextMidPt=.5*(this._nextValue+c),u=Math.max(2,this.rate.sampleRate/Math.max(s,.001)|0);var p=u;a=2*(this._nextMidPt-n-p*r)/(p*p+p)}var l=Math.min(o,u);for(o-=l,u-=l,e=0;l>e;++e)i[h++]=n,r+=a,n+=r}while(o);this._level=n,this._slope=r,this._curve=a,this._counter=u};return t}(),s.ugen.specs.LFClipNoise=s.ugen.specs.LFNoise0,s.unit.specs.LFClipNoise=function(){var t=function(){this.process=e,this._counter=0,this._level=0,this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0][0],n=this._level,r=this._counter,a=t,u=0;do{0>=r&&(r=Math.max(1,this.rate.sampleRate/Math.max(s,.001)|0),n=Math.random()<.5?-1:1);var o=Math.min(a,r);for(a-=o,r-=o,e=0;o>e;++e)i[u++]=n}while(a);this._counter=r,this._level=n};return t}(),s.ugen.specs.LFDNoise0=s.ugen.specs.LFNoise0,s.unit.specs.LFDNoise0=function(){var t=function(){this.process=2===this.inRates[0]?e:i,this._level=0,this._phase=0,e.call(this,1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._level,n=this._phase,r=this.rate.sampleDur,a=0;t>a;++a)n-=i[a]*r,0>n&&(n=1+n%1,s=2*Math.random()-1),e[a]=s;this._level=s,this._phase=n},i=function(t){for(var e=this.outputs[0],i=this.inputs[0][0],s=this._level,n=this._phase,r=this.rate.sampleDur,a=r*i,u=0;t>u;++u)n-=a,0>n&&(n=1+n%1,s=2*Math.random()-1),e[u]=s;this._level=s,this._phase=n};return t}(),s.ugen.specs.LFDNoise1=s.ugen.specs.LFNoise0,s.unit.specs.LFDNoise1=function(){var t=function(){this.process=2===this.inRates[0]?e:i,this._phase=0,this._prevLevel=0,this._nextLevel=0,e.call(this,1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._prevLevel,n=this._nextLevel,r=this._phase,a=this.rate.sampleDur,u=0;t>u;++u)r-=i[u]*a,0>r&&(r=1+r%1,s=n,n=2*Math.random()-1),e[u]=n+r*(s-n);this._prevLevel=s,this._nextLevel=n,this._phase=r},i=function(t){for(var e=this.outputs[0],i=this.inputs[0][0],s=this._prevLevel,n=this._nextLevel,r=this._phase,a=this.rate.sampleDur,u=i*a,o=0;t>o;++o)r-=u,0>r&&(r=1+r%1,s=n,n=2*Math.random()-1),e[o]=n+r*(s-n);this._prevLevel=s,this._nextLevel=n,this._phase=r};return t}(),s.ugen.specs.LFDNoise3=s.ugen.specs.LFNoise0,s.unit.specs.LFDNoise3=function(){var t=function(){this.process=2===this.inRates[0]?e:i,this._phase=0,this._levelA=0,this._levelB=0,this._levelC=0,this._levelD=0,e.call(this,1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._levelA,n=this._levelB,a=this._levelC,u=this._levelD,o=this._phase,h=this.rate.sampleDur,c=0;t>c;++c)o-=i[c]*h,0>o&&(o=1+o%1,s=n,n=a,a=u,u=2*Math.random()-1),e[c]=r(1-o,s,n,a,u);this._levelA=s,this._levelB=n,this._levelC=a,this._levelD=u,this._phase=o},i=function(t){for(var e=this.outputs[0],i=this.inputs[0][0],s=this._levelA,n=this._levelB,a=this._levelC,u=this._levelD,o=this._phase,h=this.rate.sampleDur,c=i*h,p=0;t>p;++p)o-=c,0>o&&(o=1+o%1,s=n,n=a,a=u,u=2*Math.random()-1),e[p]=r(1-o,s,n,a,u);this._levelA=s,this._levelB=n,this._levelC=a,this._levelD=u,this._phase=o};return t}(),s.ugen.specs.LFDClipNoise=s.ugen.specs.LFNoise0,s.unit.specs.LFDClipNoise=function(){var t=function(){this.process=2===this.inRates[0]?e:i,this._level=0,this._phase=0,e.call(this,1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._level,n=this._phase,r=this.rate.sampleDur,a=0;t>a;++a)n-=i[a]*r,0>n&&(n=1+n%1,s=Math.random()<.5?-1:1),e[a]=s;this._level=s,this._phase=n},i=function(t){for(var e=this.outputs[0],i=this.inputs[0][0],s=this._level,n=this._phase,r=this.rate.sampleDur,a=r*i,u=0;t>u;++u)n-=a,0>n&&(n=1+n%1,s=Math.random()<.5?-1:1),e[u]=s;this._level=s,this._phase=n};return t}(),i.exports={}}),n("cc/plugins/osc",function(t,e,i){var s=t("../cc"),n=t("./utils"),r=2*Math.PI,a=n.kSineSize,u=n.kSineMask,o=n.kBadValue,h=n.gSineWavetable,c=n.gSine,p=n.gInvSine,l=Math.log(.001),f=function(t,e,i){var s,n=t.outputs[0],r=t.inputs[t._freqIndex],a=t.inputs[t._phaseIndex],u=t._mask,o=t._table,h=t._cpstoinc,c=t._radtoinc,p=t._x;for(s=0;e>s;++s)n[s]=i(o,u,p+c*a[s]),p+=r[s]*h;t._x=p},_=function(t,e,i){var s,n=t.outputs[0],r=t.inputs[t._freqIndex],a=t.inputs[t._phaseIndex][0],u=t._mask,o=t._table,h=t._radtoinc,c=t._cpstoinc,p=t._phase,l=t._x;if(a===p)for(p*=h,s=0;e>s;++s)n[s]=i(o,u,l+p),l+=r[s]*c;else{var f=(a-p)*t.rate.slopeFactor;for(s=0;e>s;++s)n[s]=i(o,u,l+h*p),p+=f,l+=r[s]*c;t._phase=a}t._x=l},d=function(t,e,i){var s,n=t.outputs[0],r=t.inputs[t._freqIndex],a=t._phase*t._radtoinc,u=t._mask,o=t._table,h=t._cpstoinc,c=t._x;for(s=0;e>s;++s)n[s]=i(o,u,c+a),c+=h*r[s];t._x=c},m=function(t,e,i){var s,n=t.outputs[0],r=t.inputs[t._freqIndex][0],a=t.inputs[t._phaseIndex],u=t._mask,o=t._table,h=t._radtoinc,c=t._cpstoinc,p=t._freq,l=t._x;if(r===p)for(p*=c,s=0;e>s;++s)n[s]=i(o,u,l+h*a[s]),l+=p;else{var f=(r-p)*t.rate.slopeFactor;for(s=0;e>s;++s)n[s]=i(o,u,l+h*a[s]),l+=p*c,p+=f;t._freq=r}t._x=l},y=function(t,e,i){var s,n=t.outputs[0],r=t.inputs[t._freqIndex][0],a=t.inputs[t._phaseIndex][0],u=t._mask,o=t._table,h=t._radtoinc,c=t._cpstoinc,p=t._freq,l=t._phase,f=t._x;if(r===p&&a===l)for(p*=c,l*=h,s=0;e>s;++s)n[s]=i(o,u,f+l),f+=p;else{var _=(r-p)*t.rate.slopeFactor,d=(a-l)*t.rate.slopeFactor;for(s=0;e>s;++s)n[s]=i(o,u,f+h*l),f+=p*c,p+=_,l+=d;t._freq=r,t._phase=a}t._x=f},g=function(t,e){var i=t.world.buffers[0|t._bufnumIn[0]];if(i){var s=i.samples;if(s.length){if(t._table===s)return!0;var n=s.length,a=Math.log(n)/Math.log(2);if(a===(0|a))return n>>=e,t._radtoinc=n/r,t._cpstoinc=n*t.rate.sampleDur,t._table=s,t._mask=n-1,!0}}return!1};s.ugen.specs.Osc={$ar:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}}},s.unit.specs.Osc=function(){var t=function(){switch(this._bufnumIn=this.inputs[0],this._freq=this.inputs[1][0],this._phase=this.inputs[2][0],this._freqIndex=1,this._phaseIndex=2,this._radtoinc=0,this._cpstoinc=0,this._mask=0,this._table=null,this._x=0,this.inRates[0]){case 2:switch(this.inRates[1]){case 2:this.process=i;break;case 1:this.process=s;break;case 0:this.process=n;break;case 3:this.process=s}break;default:switch(this.inRates[1]){case 2:this.process=r;break;case 1:this.process=a;break;case 0:this.process=a;break;case 3:this.process=a}}},e=function(t,e,i){var s=(i&e)<<1;return t[s]+(i-(0|i))*t[s+1]},i=function(t){g(this,1)&&f(this,t,e)},s=function(t){g(this,1)&&_(this,t,e)},n=function(t){g(this,1)&&d(this,t,e)},r=function(t){g(this,1)&&m(this,t,e)},a=function(t){g(this,1)&&y(this,t,e)};return t}(),s.ugen.specs.SinOsc={$ar:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}}},s.unit.specs.SinOsc=function(){var t=function(){switch(this._freq=this.inputs[0][0],this._phase=this.inputs[1][0],this._freqIndex=0,this._phaseIndex=1,this._radtoinc=a/r,this._cpstoinc=a*this.rate.sampleDur,this._mask=u,this._table=h,this._x=0,this.inRates[0]){case 2:switch(this.inRates[1]){case 2:this.process=i;break;case 1:this.process=s;break;case 0:this.process=n;break;case 3:this.process=s}break;default:switch(this.inRates[1]){case 2:this.process=o;break;case 1:this.process=c;break;case 0:this.process=c;break;case 3:this.process=c}}y(this,1,e)},e=function(t,e,i){var s=(i&e)<<1;return t[s]+(i-(0|i))*t[s+1]},i=function(t){f(this,t,e)},s=function(t){_(this,t,e)},n=function(t){d(this,t,e)},o=function(t){m(this,t,e)},c=function(t){y(this,t,e)};return t}(),s.ugen.specs.PMOsc={$ar:{defaults:"carfreq=0,modfreq=0,pmindex=0,modphase=0,mul=1,add=0",ctor:function(t,e,i,n,r,a){var u=s.global.SinOsc;return u.ar(t,u.ar(e,n,i),r,a)}},$kr:{defaults:"carfreq=0,modfreq=0,pmindex=0,modphase=0,mul=1,add=0",ctor:function(t,e,i,n,r,a){var u=s.global.SinOsc;return u.kr(t,u.kr(e,n,i),r,a)}}},s.ugen.specs.SinOscFB={$ar:{defaults:"freq=440,feedback=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"freq=440,feedback=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}}},s.unit.specs.SinOscFB=function(){var t=function(){this.process=e,this._radtoinc=a/r,this._cpstoinc=a*this.rate.sampleDur,this._mask=u,this._table=h,this._freq=this.inputs[0][0],this._feedback=this.inputs[1][0]*this._radtoinc,this._y=0,this._x=0,this.process(1)},e=function(t){var e,i,s,n=this.outputs[0],r=this.inputs[0][0],a=this.inputs[1][0],u=this._mask,o=this._table,h=this._radtoinc,c=this._cpstoinc,p=this._freq,l=this._feedback,f=this._y,_=this._x;if(r===p&&a===l)for(p*=c,l*=h,s=0;t>s;++s)e=_+l*f,i=(e&u)<<1,n[s]=f=o[i]+(e-(0|e))*o[i+1],_+=p;else{var d=(r-p)*this.rate.slopeFactor,m=(a-l)*this.rate.slopeFactor;for(s=0;t>s;++s)e=_+h*l*f,i=(e&u)<<1,n[s]=f=o[i]+(e-(0|e))*o[i+1],_+=p*c,p+=d,l+=m;this._freq=r,this._feedback=a}this._y=f,this._x=_};return t}(),s.ugen.specs.OscN={$ar:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"bufnum=0,freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}}},s.unit.specs.OscN=function(){var t=function(){switch(this._bufnumIn=this.inputs[0],this._freq=this.inputs[1][0],this._phase=this.inputs[2][0],this._freqIndex=1,this._phaseIndex=2,this._radtoinc=0,this._cpstoinc=0,this._mask=0,this._table=null,this._x=0,this.inRates[0]){case 2:switch(this.inRates[1]){case 2:this.process=i;break;case 1:this.process=s;break;case 0:this.process=n;break;case 3:this.process=s}break;default:switch(this.inRates[1]){case 2:this.process=r;break;case 1:this.process=a;break;case 0:this.process=a;break;case 3:this.process=a}}},e=function(t,e,i){return t[i&e]},i=function(t){g(this,0)&&f(this,t,e)},s=function(t){g(this,0)&&_(this,t,e)},n=function(t){g(this,0)&&d(this,t,e)},r=function(t){g(this,0)&&m(this,t,e)},a=function(t){g(this,0)&&y(this,t,e)};return t}(),s.ugen.specs.FSinOsc={$ar:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}}},s.unit.specs.FSinOsc=function(){var t=function(){this.process=e,this._freq=this.inputs[0][0];var t=this.inputs[1][0],i=this._freq*this.rate.radiansPerSample;this._b1=2*Math.cos(i),this._y1=Math.sin(t),this._y2=Math.sin(t-i),this.outputs[0][0]=this._y1},e=function(){var t,e,i,s,n,r,a,u=this.outputs[0],o=this.inputs[0][0],h=this.rate;for(o!==this._freq?(this._freq=o,n=o*h.radiansPerSample,this._b1=t=2*Math.cos(n)):t=this._b1,i=this._y1,s=this._y2,a=0,r=h.filterLoops;r--;)u[a++]=e=t*i-s,u[a++]=s=t*e-i,u[a++]=i=t*s-e;for(r=h.filterRemain;r--;)u[a++]=e=t*i-s,s=i,i=e;this._y1=i,this._y2=s};return t}(),s.ugen.specs.Klang={$ar:{defaults:"specificationsArrayRef=0,freqscale=1,freqoffset=0",ctor:function(t,e,i){return t=t.multichannelExpandRef?t.multichannelExpandRef(2):n.asArray(t),this.multiNewList([2,e,i,t])}},init:function(){var t,e,i,s,r,a=this.inputs.pop();return t=a.dereference?a.dereference():n.asArray(t),e=t[0]||[],i=t[1]||n.filledArray(e.length,1),s=t[2]||n.filledArray(e.length,0),r=n.flat(n.flop([e,i,s])),r.push.apply(this.inputs,r),this}},s.unit.specs.Klang=function(){var t=function(){this.process=e;var t,i,s,n,r=this.rate,a=(this.numInputs-2)/3,u=3*a,o=new Float32Array(u),h=this.inputs,c=h[0][0]*r.radiansPerSample,p=h[1][0]*r.radiansPerSample,l=0,f=2,_=-1;for(s=0;a>s;++s)n=h[f++][0]*c+p,t=h[f++][0],i=h[f++][0],0!==i?(l+=o[++_]=t*Math.sin(i),o[++_]=t*Math.sin(i-n)):(l+=o[++_]=0,o[++_]=t*-Math.sin(n)),o[++_]=2*Math.cos(n);this._numpartials=a,this._coefs=o,this.outputs[0][0]=l},e=function(t){var e,i,s,n,r,a,u,o,h,c,p,l,f,_,d,m,y,g,v=this.outputs[0],b=0,w=this.rate,k=this._coefs,N=this._numpartials,x=N>>2;switch(3&N){case 3:for(i=k[0],s=k[1],n=k[2],a=k[3],u=k[4],o=k[5],c=k[6],p=k[7],l=k[8],g=w.filterLoops;g--;)y=e=n*i-s,y+=r=o*a-u,y+=h=l*c-p,v[b++]=y,y=s=n*e-i,y+=u=o*r-a,y+=p=l*h-c,v[b++]=y,y=i=n*s-e,y+=a=o*u-r,y+=c=l*p-h,v[b++]=y;for(g=w.filterRemain;g--;)y=e=n*i-s,y+=r=o*a-u,y+=h=l*c-p,s=i,i=e,u=a,a=r,p=c,c=h,v[b++]=y;k[0]=i,k[1]=s,k[3]=a,k[4]=u,k[6]=c,k[7]=p;break;case 2:for(i=k[0],s=k[1],n=k[2],a=k[3],u=k[4],o=k[5],g=w.filterLoops;g--;)y=e=n*i-s,y+=r=o*a-u,v[b++]=y,y=s=n*e-i,y+=u=o*r-a,v[b++]=y,y=i=n*s-e,y+=a=o*u-r,v[b++]=y;for(g=w.filterRemain;g--;)y=e=n*i-s,y+=r=o*a-u,s=i,i=e,u=a,a=r,v[b++]=y;k[0]=i,k[1]=s,k[3]=a,k[4]=u;break;case 1:for(i=k[0],s=k[1],n=k[2],g=w.filterLoops;g--;)y=e=n*i-s,v[b++]=y,y=s=n*e-i,v[b++]=y,y=i=n*s-e,v[b++]=y;for(g=w.filterRemain;g--;)y=e=n*i-s,s=i,i=e,v[b++]=y;k[0]=i,k[1]=s;break;case 0:for(g=0;t>g;++g)v[g]=0}for(;x--;){for(i=k[0],s=k[1],n=k[2],a=k[3],u=k[4],o=k[5],c=k[6],p=k[7],l=k[8],_=k[9],d=k[10],m=k[11],g=w.filterLoops;g--;)y=e=n*i-s,y+=r=o*a-u,y+=h=l*c-p,y+=f=m*_-d,v[b++]=y,y=s=n*e-i,y+=u=o*r-a,y+=p=l*h-c,y+=d=m*f-_,v[b++]=y,y=i=n*s-e,y+=a=o*u-r,y+=c=l*p-h,y+=_=m*d-f,v[b++]=y;for(g=w.filterRemain;g--;)y=e=n*i-s,y+=r=o*a-u,y+=h=l*c-p,y+=f=m*_-d,s=i,i=e,u=a,a=r,p=c,c=h,d=_,_=f,v[b++]=y;k[0]=i,k[1]=s,k[3]=a,k[4]=u,k[6]=c,k[7]=p,k[9]=_,k[10]=d}};return t}(),s.ugen.specs.Klank={$ar:{defaults:"specificationsArrayRef=0,input=0,freqscale=1,freqoffset=0,decayscale=1",ctor:function(t,e,i,s,r){return t=t.multichannelExpandRef?t.multichannelExpandRef(2):n.asArray(t),this.multiNewList([2,e,i,s,r,t])}},init:function(){var t,e,i,s,r,a=this.inputs.pop();return t=a.dereference?a.dereference():n.asArray(t),e=t[0]||[],i=t[1]||n.filledArray(e.length,1),s=t[2]||n.filledArray(e.length,1),r=n.flat(n.flop([e,i,s])),r.push.apply(this.inputs,r),this}},s.unit.specs.Klank=function(){var t=function(){this.process=e;var t,i,s,n,r,a,u,o,h,c=this.rate,p=(this.numInputs-4)/3,f=5*(p+3&-4),_=new Float32Array(f+this.bufLength),d=new Float32Array(_.buffer,4*f),m=this.inputs,y=m[1][0]*c.radiansPerSample,g=m[2][0]*c.radiansPerSample,v=m[3][0],b=c.sampleRate,w=4;for(u=0;p>u;++u)h=m[w++][0]*y+g,t=m[w++][0],i=m[w++][0]*v,s=0===i?0:Math.exp(l/(i*b)),n=2*s,r=s*s,a=n*Math.cos(h)/(1+r),o=20*(u>>2)+(3&u),_[o]=0,_[o+4]=0,_[o+8]=n*a,_[o+12]=-r,_[o+16]=.25*t;this._numpartials=p,this._coefs=_,this._buf=d,this._x1=0,this._x2=0},e=function(t){var e,i,s,n,r,a,u,o,h,c,p,l,f,_,d,m,y,g,v,b,w,k,N,x,A,M,S=this.outputs[0],R=this.inputs[0],P=0,T=this.rate,I=this._coefs,L=this._numpartials,O=this._buf,C=L>>2,F=20*C;switch(3&L){case 3:for(i=I[F+0],s=I[F+4],r=I[F+8],a=I[F+12],n=I[F+16],o=I[F+1],h=I[F+5],p=I[F+9],l=I[F+13],c=I[F+17],_=I[F+2],d=I[F+6],y=I[F+10],g=I[F+14],m=I[F+18],M=T.filterLoops;M--;)A=R[P],e=A+r*i+a*s,u=A+p*o+l*h,f=A+y*_+g*d,O[P++]=n*e+c*u+m*f,A=R[P],s=A+r*e+a*i,h=A+p*u+l*o,d=A+y*f+g*_,O[P++]=n*s+c*h+m*d,A=R[P],i=A+r*s+a*e,o=A+p*h+l*u,_=A+y*d+g*f,O[P++]=n*i+c*o+m*_;for(M=T.filterRemain;M--;)A=R[P],e=A+r*i+a*s,u=A+p*o+l*h,f=A+y*_+g*d,O[P++]=n*e+c*u+m*f,s=i,i=e,h=o,o=u,d=_,_=f;I[F+0]=i,I[F+4]=s,I[F+1]=o,I[F+5]=h,I[F+2]=_,I[F+6]=d;break;case 2:for(i=I[F+0],s=I[F+4],r=I[F+8],a=I[F+12],n=I[F+16],o=I[F+1],h=I[F+5],p=I[F+9],l=I[F+13],c=I[F+17],M=T.filterLoops;M--;)A=R[P],e=A+r*i+a*s,u=A+p*o+l*h,O[P++]=n*e+c*u,A=R[P],s=A+r*e+a*i,h=A+p*u+l*o,O[P++]=n*s+c*h,A=R[P],i=A+r*s+a*e,o=A+p*h+l*u,O[P++]=n*i+c*o;for(M=T.filterRemain;M--;)A=R[P],e=A+r*i+a*s,u=A+p*o+l*h,O[P++]=n*e+c*u,s=i,i=e,h=o,o=u;I[F+0]=i,I[F+4]=s,I[F+1]=o,I[F+5]=h;break;case 1:for(i=I[F+0],s=I[F+4],r=I[F+8],a=I[F+12],n=I[F+16],M=T.filterLoops;M--;)A=R[P],e=A+r*i+a*s,O[P++]=n*e,A=R[P],s=A+r*e+a*i,O[P++]=n*s,A=R[P],i=A+r*s+a*e,O[P++]=n*i;for(M=T.filterRemain;M--;)A=R[P],e=A+r*i+a*s,O[P++]=n*e,s=i,i=e;I[F+0]=i,I[F+4]=s;break;case 0:for(M=0;t>M;++M)O[M]=0}for(P=F=0;C--;){for(i=I[F+0],s=I[F+4],r=I[F+8],a=I[F+12],n=I[F+16],o=I[F+1],h=I[F+5],p=I[F+9],l=I[F+13],c=I[F+17],_=I[F+2],d=I[F+6],y=I[F+10],g=I[F+14],m=I[F+18],b=I[F+3],w=I[F+7],N=I[F+11],x=I[F+15],k=I[F+19],M=T.filterLoops;M--;)A=R[P],e=A+r*i+a*s,u=A+p*o+l*h,f=A+y*_+g*d,v=A+N*b+x*w,O[P++]=n*e+c*u+m*f+k*v,A=R[P],s=A+r*e+a*i,h=A+p*u+l*o,d=A+y*f+g*_,w=A+N*v+x*b,O[P++]=n*s+c*h+m*d+k*w,A=R[P],i=A+r*s+a*e,o=A+p*h+l*u,_=A+y*d+g*f,b=A+N*w+x*v,O[P++]=n*i+c*o+m*_+k*b;for(M=T.filterRemain;M--;)A=R[P],e=A+r*i+a*s,u=A+p*o+l*h,f=A+y*_+g*d,v=A+N*b+x*w,O[P++]=n*e+c*u+m*f+k*v,s=i,i=e,h=o,o=u,d=_,_=f,w=b,b=v;I[F+0]=i,I[F+4]=s,I[F+1]=o,I[F+5]=h,I[F+2]=_,I[F+6]=d,I[F+3]=b,I[F+7]=w,F+=20}var E,D=this._x1,B=this._x2;for(P=0,M=T.filterLoops;M--;)E=O[P],S[P++]=E-B,B=O[P],S[P++]=B-D,D=O[P],S[P++]=D-E;for(M=T.filterRemain;M--;)E=O[P],S[P++]=E-B,B=D,D=E;this._x1=D,this._x2=B};return t}(),s.ugen.specs.DynKlank={$ar:{defaults:"specificationsArrayRef=0,input=0,freqscale=1,freqoffset=0,decayscale=1",ctor:function(t,e,i,s,r){return t=t.multichannelExpandRef?t.multichannelExpandRef(2):n.asArray(t),this.multiNewList([2,e,i,s,r,t])}},init:function(){var t,e,i,r,a=this.inputs[0],u=this.inputs[1],o=this.inputs[2],h=this.inputs[3],c=this.inputs[4];return t=c.dereference?c.dereference():n.asArray(t),e=t[0]||[440],i=t[2]||[1],r=t[1]||[1],e=e.madd(u,o),i=i.madd(h,0),s.global.Ringz(this.rate,a,e,i,r).sum()}},s.ugen.specs.DynKlang={$ar:{defaults:"specificationsArrayRef=0,freqscale=1,freqoffset=0",ctor:function(t,e,i){return t=t.multichannelExpandRef?t.multichannelExpandRef(2):n.asArray(t),this.multiNewList([2,e,i,t])}},init:function(){var t,e,i,r,a=this.inputs[0],u=this.inputs[1],o=this.inputs[2];return t=o.dereference?o.dereference():n.asArray(t),e=t[0]||[440],i=t[2]||[0],r=t[1]||[1],e=e.madd(a,u),s.global.SinOsc(this.rate,e,i,r).sum()}},s.ugen.specs.LFSaw={$ar:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"freq=440,iphase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}}},s.unit.specs.LFSaw=function(){var t=function(){this.process=e,this._cpstoinc=2*this.rate.sampleDur,this._phase=this.inputs[1][0],this.process(1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0][0]*this._cpstoinc,n=this._phase;if(s>=0)for(e=0;t>e;++e)i[e]=n,n+=s,n>=1&&(n-=2);else for(e=0;t>e;++e)i[e]=n,n+=s,-1>=n&&(n+=2);this._phase=n};return t}(),s.ugen.specs.LFPar=s.ugen.specs.LFSaw,s.unit.specs.LFPar=function(){var t=function(){this.process=e,this._cpstoinc=4*this.rate.sampleDur,this._phase=this.inputs[1][0],this.process(1)},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0][0]*this._cpstoinc,r=this._phase,a=0;t>a;++a)1>r?(e=r,i=1-e*e):3>r?(e=r-2,i=e*e-1):(r-=4,e=r,i=1-e*e),s[a]=i,r+=n;this._phase=r};return t}(),s.ugen.specs.LFCub=s.ugen.specs.LFSaw,s.unit.specs.LFCub=function(){var t=function(){this.process=e,this._cpstoinc=2*this.rate.sampleDur,this._phase=this.inputs[1][0]+.5,this.process(1)},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0][0]*this._cpstoinc,n=this._phase,r=0;t>r;++r)1>n?e=n:2>n?e=2-n:(n-=2,e=n),i[r]=e*e*(6-4*e)-1,n+=s;this._phase=n};return t}(),s.ugen.specs.LFTri=s.ugen.specs.LFSaw,s.unit.specs.LFTri=function(){var t=function(){this.process=e,this._cpstoinc=4*this.rate.sampleDur,this._phase=this.inputs[1][0],this.process(1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0][0]*this._cpstoinc,s=this._phase,n=0;t>n;++n)e[n]=s>1?2-s:s,s+=i,s>=3&&(s-=4);this._phase=s};return t}(),s.ugen.specs.LFPulse={$ar:{defaults:"freq=440,iphase=0,width=0.5,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"freq=440,iphase=0,width=0.5,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}}},s.unit.specs.LFPulse=function(){var t=function(){this.process=e,this._cpstoinc=this.rate.sampleDur,this._phase=this.inputs[1][0],this._duty=this.inputs[2][0],this.process(1)},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0][0]*this._cpstoinc,n=this.inputs[2][0],r=this._duty,a=this._phase,u=0;t>u;++u)a>1?(a-=1,r=n,e=.5>r?1:0):e=r>a?1:0,i[u]=e,a+=s;this._duty=r,this._phase=a};return t}(),s.ugen.specs.Blip={$ar:{defaults:"freq=440,numharm=200,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}}},s.unit.specs.Blip=function(){var t=function(){this.process=e,this._freq=this.inputs[0][0],this._numharm=0|this.inputs[1][0],this._cpstoinc=a*this.rate.sampleDur*.5;var t=this._numharm,i=Math.max(1,.5*this.rate.sampleRate/this._freq|0);this._N=Math.max(1,Math.min(t,i)),this._mask=u,this._scale=.5/this._N,this._phase=0,this.process(1)},e=function(t){var e,i,s,n,r,a,u,h,l,f,_,d,m,y,g,v,b,w,k,N,x=this.outputs[0],A=this.inputs[0][0],M=0|this.inputs[1][0],S=this._phase,R=this._mask,P=c,T=p;if(M!==this._numharm||A!==this._freq?(e=M,s=Math.max(1,.5*this.rate.sampleRate/this._freq|0),e>s?(e=s,A=this._cpstoinc*Math.max(this._freq,A)):(1>e&&(e=1),A=this._cpstoinc*A),h=e!==this._N,n=this._N,u=this._scale,this._N=Math.max(1,Math.min(e,s)),this._scale=a=.5/e):(e=this._N,A=this._cpstoinc*A,a=this._scale,h=!1),i=2*e+1,h)for(r=2*n+1,N=this.rate.slopeFactor,k=0,w=0;t>w;++w)l=S&R,f=T[l],_=T[l+1],f===o||_===o?(f=P[l],_=P[l+1],d=S-(0|S),m=f+(_-f)*d,Math.abs(m)<5e-4?x[w]=1:(y=S*r,d=y-(0|y),l=y&R,f=P[l],_=P[l+1],g=f+(_-f)*d,v=(g/m-1)*u,y=S*i,d=y-(0|y),l=y&R,f=P[l],_=P[l+1],g=f+(_-f)*d,b=(g/m-1)*a,x[w]=v+k*(b-v))):(d=S-(0|S),m=f+(_-f)*d,y=S*r,d=y-(0|y),l=y&R,f=P[l],_=P[l+1],g=f+(_-f)*d,v=(g*m-1)*u,y=S*i,d=y-(0|y),l=y&R,f=P[l],_=P[l+1],g=f+(_-f)*d,b=(g*m-1)*a,x[w]=v+k*(b-v)),S+=A,k+=N;else for(w=0;t>w;++w)l=S&R,f=T[l],_=T[l+1],f===o||_===o?(f=P[l],_=P[l+1],d=S-(0|S),m=f+(_-f)*d,Math.abs(m)<5e-4?x[w]=1:(y=S*i,d=y-(0|y),l=y&R,f=P[l],_=P[l+1],g=f+(_-f)*d,x[w]=(g/m-1)*a)):(d=S-(0|S),m=f+(_-f)*d,y=S*i,d=y-(0|y),l=y&R,f=P[l],_=P[l+1],g=f+(_-f)*d,x[w]=(g*m-1)*a),S+=A;S>=65536&&(S-=65536),this._phase=S,this._freq=this.inputs[0][0],this._numharm=M};return t}(),s.ugen.specs.Saw={$ar:{defaults:"freq=440,mul=1,add=0",ctor:function(t,e,i){return this.multiNew(2,t).madd(e,i)}}},s.unit.specs.Saw=function(){var t=function(){this.process=e,this._freq=this.inputs[0][0],this._cpstoinc=a*this.rate.sampleDur*.5,this._N=Math.max(1,.5*this.rate.sampleRate/this._freq|0),this._mask=u,this._scale=.5/this._N,this._phase=0,this._y1=-.46,this.process(1)
},e=function(t){var e,i,s,n,r,a,u,h,l,f,_,d,m,y,g,v,b,w,k,N=this.outputs[0],x=this.inputs[0][0],A=this._phase,M=this._y1,S=this._mask,R=c,P=p;if(x!==this._freq?(e=Math.max(1,.5*this.rate.sampleRate/x|0),e!==this._N?(x=this._cpstoinc*Math.max(this._freq,x),u=!0):(x=this._cpstoinc*x,u=!1),s=this._N,a=this._scale,this._N=e,this._scale=r=.5/e):(e=this._N,x=this._cpstoinc*x,r=this._scale,u=!1),i=2*e+1,u)for(n=2*s+1,k=this.rate.slopeFactor,w=0,b=0;t>b;++b)h=A&S,l=P[h],f=P[h+1],l===o||f===o?(l=R[h],f=R[h+1],_=A-(0|A),d=l+(f-l)*_,Math.abs(d)<5e-4?N[b]=M=1+.999*M:(m=A*n,_=m-(0|m),h=m&S,l=R[h],f=R[h+1],y=l+(f-l)*_,g=(y/d-1)*a,m=A*i,_=m-(0|m),h=m&S,l=R[h],f=R[h+1],y=l+(f-l)*_,v=(y/d-1)*r,N[b]=M=g+w*(v-g)+.999*M)):(_=A-(0|A),d=l+(f-l)*_,m=A*n,_=m-(0|m),h=m&S,l=R[h],f=R[h+1],y=l+(f-l)*_,g=(y*d-1)*a,m=A*i,_=m-(0|m),h=m&S,l=R[h],f=R[h+1],y=l+(f-l)*_,v=(y*d-1)*r,N[b]=M=g+w*(v-g)+.999*M),A+=x,w+=k;else for(b=0;t>b;++b)h=A&S,l=P[h],f=P[h+1],l===o||f===o?(l=R[h],f=R[h+1],_=A-(0|A),d=l+(f-l)*_,Math.abs(d)<5e-4?N[b]=M=1+.999*M:(m=A*i,_=m-(0|m),h=m&S,l=R[h],f=R[h+1],y=l+(f-l)*_,N[b]=M=(y/d-1)*r+.999*M)):(_=A-(0|A),d=l+(f-l)*_,m=A*i,_=m-(0|m),h=m&S,l=R[h],f=R[h+1],y=l+(f-l)*_,N[b]=M=(y*d-1)*r+.999*M),A+=x;A>=65536&&(A-=65536),this._y1=M,this._phase=A,this._freq=this.inputs[0][0]};return t}(),s.ugen.specs.Pulse={$ar:{defaults:"freq=440,width=0.5,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}}},s.unit.specs.Pulse=function(){var t=function(){this.process=e,this._freq=this.inputs[0][0],this._cpstoinc=a*this.rate.sampleDur*.5,this._N=Math.max(1,.5*this.rate.sampleRate/this._freq|0),this._mask=u,this._scale=.5/this._N,this._phase=0,this._duty=0,this._y1=0},e=function(t){var e,i,s,n,r,u,h,l,f,_,d,m,y,g,v,b,w,k,N,x,A,M,S,R,P,T=this.outputs[0],I=this.inputs[0][0],L=this._duty,O=this._phase,C=this._y1,F=this._mask,E=c,D=p;if(I!==this._freq?(e=Math.max(1,.5*this.rate.sampleRate/I|0),e!==this._N?(I=this._cpstoinc*Math.max(this._freq,I),h=!0):(I=this._cpstoinc*I,h=!1),s=this._N,u=this._scale,this._N=e,this._scale=r=.5/e):(e=this._N,I=this._cpstoinc*I,r=this._scale,h=!1),i=2*e+1,k=this.inputs[1][0],N=(k-L)*this.rate.slopeFactor,x=1/r+1,h)for(n=2*s+1,P=this.rate.slopeFactor,R=0,S=0;t>S;++S)l=O&F,f=D[l],_=D[l+1],f===o||_===o?(f=E[l],_=E[l+1],d=O-(0|O),m=f+(_-f)*d,Math.abs(m)<5e-4?A=1:(y=O*n,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,v=(g/m-1)*u,y=O*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,b=(g/m-1)*r,A=v+R*(b-v))):(d=O-(0|O),m=f+(_-f)*d,y=O*n,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,v=(g*m-1)*u,y=O*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,b=(g*m-1)*r,A=v+R*(b-v)),w=O+L*a*.5,l=w&F,f=D[l],_=D[l+1],f===o||_===o?(f=E[l],_=E[l+1],d=w-(0|w),m=f+(_-f)*d,Math.abs(m)<5e-4?M=1:(y=w*n,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,v=(g/m-1)*u,y=w*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,b=(g/m-1)*r,M=v+R*(b-v))):(d=w-(0|w),m=f+(_-f)*d,y=w*n,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,v=(g*m-1)*u,y=w*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,b=(g*m-1)*r,M=v+R*(b-v)),T[S]=C=A-M+.999*C,O+=I,L+=N,R+=P;else for(S=0;t>S;++S)l=O&F,f=D[l],_=D[l+1],f===o||_===o?(f=E[l],_=E[l+1],d=O-(0|O),m=f+(_-f)*d,Math.abs(m)<5e-4?A=x:(y=O*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,A=g/m)):(d=O-(0|O),m=f+(_-f)*d,y=O*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,A=g*m),w=O+L*a*.5,l=w&F,f=D[l],_=D[l+1],f===o||_===o?(f=E[l],_=E[l+1],d=w-(0|w),m=f+(_-f)*d,Math.abs(m)<5e-4?M=x:(y=w*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,M=g/m)):(d=w-(0|w),m=f+(_-f)*d,y=w*i,d=y-(0|y),l=y&F,f=E[l],_=E[l+1],g=f+(_-f)*d,M=g*m),T[S]=C=(A-M)*r+.999*C,O+=I,L+=N;O>=65536&&(O-=65536),this._y1=C,this._phase=O,this._freq=this.inputs[0][0],this._duty=k};return t}(),s.ugen.specs.Impulse={$ar:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}}},s.unit.specs.Impulse=function(){var t=function(){this._phase=this.inputs[1][0],2===this.inRates[0]?(this.process=e,0!==this.inRates[1]&&(this._phase=1)):(this.process=i,0!==this.inRates[1]&&(this._phase=1)),this._phaseOffset=0,this._cpstoinc=this.rate.sampleDur,0===this._phase&&(this._phase=1)},e=function(t){var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1][0],n=this._cpstoinc,r=this._phase,a=this._phaseOffset,u=(s-a)*this.rate.slopeFactor;r+=a;for(var o=0;t>o;++o)r+=u,r>=1?(r-=1,e[o]=1):e[o]=0,r+=i[o]*n;this._phase=r-s,this._phaseOffset=s},i=function(t){var e=this.outputs[0],i=this.inputs[0][0]*this._cpstoinc,s=this.inputs[1][0],n=this._phase,r=this._phaseOffset,a=(s-r)*this.rate.slopeFactor;n+=r;for(var u=0;t>u;++u)n+=a,n>=1?(n-=1,e[u]=1):e[u]=0,n+=i;this._phase=n-s,this._phaseOffset=s};return t}(),s.ugen.specs.TrigImpulse={$ar:{defaults:"trig=0,freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i).madd(s,n)}},$kr:{defaults:"trig=0,freq=440,phase=0,mul=1,add=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i).madd(s,n)}}},s.unit.specs.TrigImpulse=function(){var t=function(){this._phase=this.inputs[2][0],2===this.inRates[1]?(this.process=e,0!==this.inRates[2]&&(this._phase=1)):(this.process=i,0!==this.inRates[2]&&(this._phase=1)),this._phaseOffset=0,this._cpstoinc=this.rate.sampleDur,0===this._phase&&(this._phase=1),this._prevTrig=this.inputs[0][0]},e=function(t){var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2][0],r=this._cpstoinc,a=this._phase,u=this._phaseOffset,o=(n-u)*this.rate.slopeFactor,h=this._prevTrig;i>0&&0>=h&&(a=n,0!==this.inRates[2]&&(a=1),0===a&&(a=1)),a+=u;for(var c=0;t>c;++c)a+=o,a>=1?(a-=1,e[c]=1):e[c]=0,a+=s[c]*r;this._phase=a-n,this._phaseOffset=n,this._prevTrig=i},i=function(t){var e=this.outputs[0],i=this.inputs[0][0],s=this.inputs[1][0]*this._cpstoinc,n=this.inputs[2][0],r=this._phase,a=this._phaseOffset,u=(n-a)*this.rate.slopeFactor,o=this._prevTrig;i>0&&0>=o&&(r=n,0!==this.inRates[2]&&(r=1),0===r&&(r=1)),r+=a;for(var h=0;t>h;++h)r+=u,r>=1?(r-=1,e[h]=1):e[h]=0,r+=s;this._phase=r-n,this._phaseOffset=n,this._prevTrig=i};return t}(),s.ugen.specs.SyncSaw={$ar:{defaults:"syncFreq=440,sawFreq=440,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(2,t,e).madd(i,s)}},$kr:{defaults:"syncFreq=440,sawFreq=440,mul=1,add=0",ctor:function(t,e,i,s){return this.multiNew(1,t,e).madd(i,s)}}},s.unit.specs.SyncSaw=function(){var t=function(){this.process=2===this.inRates[0]?2===this.inRates[1]?e:i:2===this.inRates[1]?s:n,this._freqMul=2*this.rate.sampleDur,this._phase1=0,this._phase2=0,n.call(this,1)},e=function(t){for(var e,i,s,n=this.outputs[0],r=this.inputs[0],a=this.inputs[1],u=this._freqMul,o=this._phase1,h=this._phase2,c=0;t>c;++c)e=r[c]*u,i=a[c]*u,s=h,h+=i,h>=1&&(h-=2),o+=e,o>=1&&(o-=2,h=(o+1)*i/e-1),n[c]=s;this._phase1=o,this._phase2=h},i=function(t){var e,i,s,n=this.outputs[0],r=this.inputs[0],a=this.inputs[1],u=this._freqMul,o=this._phase1,h=this._phase2;i=a[0]*u;for(var c=0;t>c;++c)e=r[c]*u,s=h,h+=i,h>=1&&(h-=2),o+=e,o>=1&&(o-=2,h=(o+1)*i/e-1),n[c]=s;this._phase1=o,this._phase2=h},s=function(t){var e,i,s,n=this.outputs[0],r=this.inputs[0],a=this.inputs[1],u=this._freqMul,o=this._phase1,h=this._phase2;e=r[0]*u;for(var c=0;t>c;++c)i=a[c]*u,s=h,h+=i,h>=1&&(h-=2),o+=e,o>=1&&(o-=2,h=(o+1)*i/e-1),n[c]=s;this._phase1=o,this._phase2=h},n=function(t){for(var e,i=this.outputs[0],s=this.inputs[0][0]*this._freqMul,n=this.inputs[1][0]*this._freqMul,r=this._phase1,a=this._phase2,u=0;t>u;++u)e=a,a+=n,a>=1&&(a-=2),r+=s,r>=1&&(r-=2,a=(r+1)*n/s-1),i[u]=e;this._phase1=r,this._phase2=a};return t}(),s.ugen.specs.Select={$ar:{defaults:"which=0,array=[]",ctor:function(t,e){return this.multiNewList([2,t].concat(e))}},$kr:{defaults:"which=0,array=[]",ctor:function(t,e){return this.multiNewList([1,t].concat(e))}},checkInputs:function(){if(2===this.rate)for(var t=this.inputs,e=1,i=t.length;i>e;++e)if(2!==t[e].rate)throw new Error("input was not audio rate:"+t[e].toString())}},s.unit.specs.Select=function(){var t=function(){this.process=1===this.bufLength?s:2===this.inRates[0]?e:i,this._maxIndex=this.inputs.length-1,s.call(this)},e=function(t){for(var e,i=this.outputs[0],s=this.inputs,n=s[0],r=this._maxIndex,a=0;t>a;++a)e=Math.max(1,Math.min((0|n[a])+1,r)),i[a]=s[e][a]},i=function(){var t=Math.max(1,Math.min((0|this.inputs[0][0])+1,this._maxIndex));this.outputs[0].set(this.inputs[t])},s=function(){var t=Math.max(1,Math.min((0|this.inputs[0][0])+1,this._maxIndex));this.outputs[0][0]=this.inputs[t][0]};return t}(),s.ugen.specs.DC={$ir:{defaults:"in=0",ctor:function(t){return this.multiNew(0,t)}},$kr:{defaults:"in=0",ctor:function(t){return this.multiNew(1,t)}},$ar:{defaults:"in=0",ctor:function(t){return this.multiNew(2,t)}}},s.unit.specs.DC=function(){var t=function(){for(var t=this.outputs[0],e=this.inputs[0][0],i=t.length;i--;)t[i]=e};return t}(),s.ugen.specs.Silent={$ir:{ctor:function(){return s.global.DC.ir(0)}},$kr:{ctor:function(){return s.global.DC.kr(0)}},$ar:{ctor:function(){return s.global.DC.ar(0)}}},i.exports={}}),n("cc/plugins/pan",function(t,e,i){var s=t("../cc"),n=t("./utils").gSine,r=[].slice;s.ugen.specs.Pan2={Klass:s.MultiOutUGen,$ar:{defaults:"in=0,pos=0,level=1",ctor:function(t,e,i){return this.multiNew(2,t,e,i)}},$kr:{defaults:"in=0,pos=0,level=1",ctor:function(t,e,i){return this.multiNew(1,t,e,i)}},init:function(){return this.inputs=r.call(arguments),this.channels=[s.createOutputProxy(this.rate,this,0),s.createOutputProxy(this.rate,this,1)],this.numOutputs=2,this.channels},checkInputs:function(){return s.ugen.checkNInputs.call(this,1)}},s.unit.specs.Pan2=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._pos=this.inputs[1][0],this._level=this.inputs[2][0];var t=1024*this._pos+1024+.5|0;t=Math.max(0,Math.min(t,2048)),this._leftAmp=this._level*n[2048-t],this._rightAmp=this._level*n[t],e.call(this,1)},e=function(t){var e,i,s,r,a,u=this.outputs[0],o=this.outputs[1],h=this.inputs[0],c=this.inputs[1],p=this.inputs[2][0],l=this._level;if(l!==p){var f=(p-l)*this.rate.slopeFactor;for(e=0;t>e;++e)s=1024*c[e]+1024+.5|0,s=Math.max(0,Math.min(s,2048)),r=l*n[2048-s],a=l*n[s],i=h[e],u[e]=i*r,o[e]=i*a,l+=f;this._level=p}else for(e=0;t>e;++e)s=1024*c[e]+1024+.5|0,s=Math.max(0,Math.min(s,2048)),r=l*n[2048-s],a=l*n[s],i=h[e],u[e]=i*r,o[e]=i*a},i=function(t){var e,i,s=this.outputs[0],r=this.outputs[1],a=this.inputs[0],u=this.inputs[1][0],o=this.inputs[2][0],h=this._leftAmp,c=this._rightAmp;if(this._pos!==u||this._level!==o){var p=1024*u+1024+.5|0;p=Math.max(0,Math.min(p,2048));var l=o*n[2048-p],f=o*n[p],_=this.rate.slopeFactor,d=(l-h)*_,m=(f-c)*_;for(e=0;t>e;++e)i=a[e],s[e]=i*h,r[e]=i*c,h+=d,c+=m;this._pos=u,this._level=o,this._leftAmp=l,this._rightAmp=f}else for(e=0;t>e;++e)i=a[e],s[e]=i*h,r[e]=i*c};return t}(),s.ugen.specs.XFade2={$ar:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(t,e,i,s){return this.multiNew(2,t,e,i,s)}},$kr:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(t,e,i,s){return this.multiNew(1,t,e,i,s)}},checkInputs:function(){return s.ugen.checkNInputs.call(this,2)}},s.unit.specs.XFade2=function(){var t=function(){this.process=2===this.inRates[2]?e:i,this._pos=this.inputs[2][0],this._level=this.inputs[3][0];var t=1024*this._pos+1024+.5|0;t=Math.max(0,Math.min(t,2048)),this._leftAmp=this._level*n[2048-t],this._rightAmp=this._level*n[t],i.call(this,1)},e=function(t){var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1],u=this.inputs[2],o=this.inputs[3][0],h=this._leftAmp,c=this._rightAmp,p=this._level;if(p!==o){var l=(o-this._level)*this.rate.slopeFactor;for(e=0;t>e;++e)i=1024*u[e]+1024+.5|0,i=Math.max(0,Math.min(i,2048)),h=p*n[2048-i],c=p*n[i],s[e]=r[e]*h+a[e]*c,p+=l;this._level=o}else for(e=0;t>e;++e)i=1024*u[e]+1024+.5|0,i=Math.max(0,Math.min(i,2048)),h=p*n[2048-i],c=p*n[i],s[e]=r[e]*h+a[e]*c},i=function(t){var e,i=this.outputs[0],s=this.inputs[0],r=this.inputs[1],a=this.inputs[2][0],u=this.inputs[3][0],o=this._leftAmp,h=this._rightAmp;if(this._pos!==a||this._level!==u){var c=1024*a+1024+.5|0;c=Math.max(0,Math.min(c,2048));var p=u*n[2048-c],l=u*n[c],f=this.rate.slopeFactor,_=(p-o)*f,d=(l-h)*f;for(e=0;t>e;++e)i[e]=s[e]*o+r[e]*h,o+=_,h+=d;this._pos=a,this._level=u,this._leftAmp=p,this._rightAmp=l}else for(e=0;t>e;++e)i[e]=s[e]*o+r[e]*h};return t}(),s.ugen.specs.LinXFade2={$ar:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(t,e,i,s){return this.multiNew(2,t,e,i).__mul__(s)}},$kr:{defaults:"inA=0,inB=0,pan=0,level=1",ctor:function(t,e,i,s){return this.multiNew(1,t,e,i).__mul__(s)}},checkInputs:function(){return s.ugen.checkNInputs.call(this,2)}},s.unit.specs.LinXFade2=function(){var t=function(){this.process=2===this.inRates[2]?e:i,this._pos=Math.max(-1,Math.min(this.inputs[2][0],1)),this._amp=.5*this._pos+.5,e.call(this,1)},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this.inputs[2],u=0;t>u;++u)e=Math.max(-1,Math.min(a[u],1)),i=.5*e+.5,s[u]=n[u]+i*(r[u]-n[u])},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this.inputs[2][0],u=this._amp;if(this._pos!==a){i=Math.max(-1,Math.min(a,1));var o=.5*i+.5,h=(o-u)*this.rate.slopeFactor;for(e=0;t>e;++e)s[e]=n[e]+u*(r[e]-n[e]),u+=h;this._pos=a,this._amp=o}else for(e=0;t>e;++e)s[e]=n[e]+u*(r[e]-n[e])};return t}(),i.exports={}}),n("cc/plugins/random",function(t,e,i){var s=t("../cc");s.ugen.specs.Rand={$new:{defaults:"lo=0,hi=1",ctor:function(t,e){return this.multiNew(0,t,e)}}},s.unit.specs.Rand=function(){var t=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=e-t;this.outputs[0][0]=Math.random()*i+t};return t}(),s.ugen.specs.IRand={$new:{defaults:"lo=0,hi=127",ctor:function(t,e){return this.multiNew(0,t,e)}}},s.unit.specs.IRand=function(){var t=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=e-t;this.outputs[0][0]=Math.random()*i+t|0};return t}(),s.ugen.specs.TRand={$ar:{defaults:"lo=0,hi=1,trig=1",ctor:function(t,e,i){return this.multiNew(2,t,e,i)}},$kr:{defaults:"lo=0,hi=1,trig=1",ctor:function(t,e,i){return this.multiNew(1,t,e,i)}}},s.unit.specs.TRand=function(){var t=function(){this.process=2===this.calcRate?i:e;var t=this.inputs[0][0],s=this.inputs[1][0],n=s-t;this.outputs[0][0]=this._value=Math.random()*n+t,this._trig=this.inputs[2][0]},e=function(){var t=this.outputs[0],e=this.inputs[2][0];if(e>0&&this._trig<=0){var i=this.inputs[0][0],s=this.inputs[1][0],n=s-i;t[0]=this._value=Math.random()*n+i}else t[0]=this._value;this._trig=e},i=function(t){for(var e,i=this.outputs[0],s=this.inputs[2],n=this._value,r=this._trig,a=0;t>a;++a){if(e=s[a],e>0&&0>=r){var u=this.inputs[0][0],o=this.inputs[1][0],h=o-u;i[a]=n=Math.random()*h+u}else i[a]=n;r=e}this._trig=e,this._value=n};return t}(),s.ugen.specs.TIRand={$ar:{defaults:"lo=0,hi=127,trig=1",ctor:function(t,e,i){return this.multiNew(2,t,e,i)}},$kr:{defaults:"lo=0,hi=127,trig=1",ctor:function(t,e,i){return this.multiNew(1,t,e,i)}}},s.unit.specs.TIRand=function(){var t=function(){this.process=2===this.calcRate?i:e;var t=0|this.inputs[0][0],s=0|this.inputs[1][0],n=s-t;this.outputs[0][0]=this._value=Math.random()*n+t|0,this._trig=this.inputs[2][0]},e=function(){var t=this.outputs[0],e=this.inputs[2][0];if(e>0&&this._trig<=0){var i=0|this.inputs[0][0],s=0|this.inputs[1][0],n=s-i;t[0]=this._value=Math.random()*n+i|0}else t[0]=this._value;this._trig=e},i=function(t){for(var e,i=this.outputs[0],s=this.inputs[2],n=this._value,r=this._trig,a=0;t>a;++a){if(e=s[a],e>0&&0>=r){var u=0|this.inputs[0][0],o=0|this.inputs[1][0],h=o-u;i[a]=n=Math.random()*h+u|0}else i[a]=n;r=e}this._trig=e,this._value=n};return t}(),s.ugen.specs.LinRand={$new:{defaults:"lo=0,hi=1,minmax=0",ctor:function(t,e,i){return this.multiNew(0,t,e,i)}}},s.unit.specs.LinRand=function(){var t=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=0|this.inputs[2][0],s=e-t,n=Math.random(),r=Math.random();this.outputs[0][0]=0>=i?Math.min(n,r)*s+t:Math.max(n,r)*s+t};return t}(),s.ugen.specs.NRand={$new:{defaults:"lo=0,hi=1,n=0",ctor:function(t,e,i){return this.multiNew(0,t,e,i)}}},s.unit.specs.NRand=function(){var t=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=0|this.inputs[2][0];if(i){for(var s=e-t,n=0,r=0;i>r;++r)n+=Math.random();this.outputs[0][0]=n/i*s+t}};return t}(),s.ugen.specs.ExpRand={$new:{defaults:"lo=0.01,hi=1",ctor:function(t,e){return this.multiNew(0,t,e)}}},s.unit.specs.ExpRand=function(){var t=function(){var t=this.inputs[0][0]||.01,e=this.inputs[1][0],i=e/t;this.outputs[0][0]=Math.pow(i,Math.random())*t};return t}(),s.ugen.specs.TExpRand={$ar:{defaults:"lo=0.01,hi=1,trig=1",ctor:function(t,e,i){return this.multiNew(2,t,e,i)}},$kr:{defaults:"lo=0.01,hi=1,trig=1",ctor:function(t,e,i){return this.multiNew(1,t,e,i)}}},s.unit.specs.TExpRand=function(){var t=function(){this.process=2===this.calcRate?i:e;var t=this.inputs[0][0]||.01,s=this.inputs[1][0],n=s/t;this.outputs[0][0]=this._value=Math.pow(n,Math.random())*t,this._trig=this.inputs[2][0]},e=function(){var t=this.outputs[0],e=this.inputs[2][0];if(e>0&&this._trig<=0){var i=this.inputs[0][0]||.01,s=this.inputs[1][0],n=s/i;t[0]=this._value=Math.pow(n,Math.random())*i}else t[0]=this._value;this._trig=e},i=function(t){for(var e,i=this.outputs[0],s=this.inputs[2],n=this._value,r=this._trig,a=0;t>a;++a){if(e=s[a],e>0&&0>=r){var u=this.inputs[0][0]||.01,o=this.inputs[1][0],h=o/u;i[a]=n=Math.pow(h,Math.random())*u}else i[a]=n;r=e}this._trig=e,this._value=n};return t}(),s.ugen.specs.CoinGate={$ar:{defaults:"prob=0,in=0",ctor:function(t,e){return this.multiNew(2,t,e)}},$kr:{defaults:"prob=0,in=0",ctor:function(t,e){return this.multiNew(1,t,e)}}},s.unit.specs.CoinGate=function(){var t=function(){this.process=2===this.calcRate?e:i,this._trig=this.inputs[1][0]},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[1],r=this._trig,a=this.inputs[0][0],u=0;t>u;++u)e=n[u],i=0,0>=r&&e>0&&Math.random()<a&&(i=e),r=e,s[u]=i;this._trig=r},i=function(){var t=this.inputs[1][0],e=0;t>0&&this._trig<=0&&Math.random()<this.inputs[0][0]&&(e=t),this.outputs[0][0]=e,this._trig=t};return t}(),i.exports={}}),n("cc/plugins/range",function(t,e,i){var s=t("../cc");s.ugen.specs.InRange={$ar:{defaults:"in,lo=0,hi=1",ctor:function(t,e,i){return this.multiNew(2,t,e,i)}},$kr:{defaults:"in,lo=0,hi=1",ctor:function(t,e,i){return this.multiNew(1,t,e,i)}},$ir:{defaults:"in,lo=0,hi=1",ctor:function(t,e,i){return this.multiNew(0,t,e,i)}}},s.unit.specs.InRange=function(){var t=function(){this.process=e,this.process(1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=0;t>r;++r){var a=i[r];e[r]=s[r]<=a&&a<=n[r]?1:0}};return t}(),s.ugen.specs.Clip=s.ugen.specs.InRange,s.unit.specs.Clip=function(){var t=function(){this.process=2===this.inRates[1]&&2===this.inRates[2]?e:i,this._lo=this.inputs[1][0],this._hi=this.inputs[2][0],this.process(1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=0;t>r;++r)e[r]=Math.max(s[r],Math.min(i[r],n[r]))},i=function(t){var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this._lo,u=this._hi;if(n===a&&r===u)for(e=0;t>e;++e)i[e]=Math.max(a,Math.min(s[e],u));else{var o=(n-a)*this.rate.slopeFactor,h=(r-u)*this.rate.slopeFactor;for(e=0;t>e;++e)a+=o,u+=h,i[e]=Math.max(a,Math.min(s[e],u));this._lo=n,this._hi=r}};return t}(),s.ugen.specs.Fold=s.ugen.specs.InRange,s.unit.specs.Fold=function(){var t=function(t,e,i){var s,n,r;if(i===e)return e;if(t>=i){if(t=2*i-t,t>=e)return t}else{if(!(e>t))return t;if(t=2*e-t,i>t)return t}return n=i-e,r=2*n,s=t-e,s-=r*Math.floor(s/r),s>=n?r-s+e:s+e},e=function(){this.process=2===this.inRates[1]&&2===this.inRates[2]?i:s,this._lo=this.inputs[1][0],this._hi=this.inputs[2][0],this.process(1)},i=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=0;t>r;++r)e[r]=Math.max(s[r],Math.min(i[r],n[r]))},s=function(e){var i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.inputs[2][0],u=this._lo,o=this._hi;if(r===u&&a===o)for(i=0;e>i;++i)s[i]=t(n[i],u,o);else{var h=(r-u)*this.rate.slopeFactor,c=(a-o)*this.rate.slopeFactor;for(i=0;e>i;++i)u+=h,o+=c,s[i]=t(n[i],u,o);this._lo=r,this._hi=a}};return e}(),s.ugen.specs.Wrap=s.ugen.specs.InRange,s.unit.specs.Wrap=function(){var t=function(t,e,i){if(i===e)return e;var s=i-e;if(t>=i){if(t-=s,i>t)return t}else{if(!(e>t))return t;if(t+=s,t>=e)return t}return t-s*Math.floor((t-e)/s)},e=function(){this.process=2===this.inRates[1]&&2===this.inRates[2]?i:s,this._lo=this.inputs[1][0],this._hi=this.inputs[2][0],this.process(1)},i=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=0;t>r;++r)e[r]=Math.max(s[r],Math.min(i[r],n[r]))},s=function(e){var i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.inputs[2][0],u=this._lo,o=this._hi;if(r===u&&a===o)for(i=0;e>i;++i)s[i]=t(n[i],u,o);else{var h=(r-u)*this.rate.slopeFactor,c=(a-o)*this.rate.slopeFactor;for(i=0;e>i;++i)u+=h,o+=c,s[i]=t(n[i],u,o);this._lo=r,this._hi=a}};return e}(),s.ugen.specs.LinLin={$ar:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i,s,n)}},$kr:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i,s,n)}},$ir:{defaults:"in=0,srclo=0,srchi=1,dstlo=1,dsthi=2",ctor:function(t,e,i,s,n){return this.multiNew(0,t,e,i,s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.LinLin=function(){var t=function(){this.process=2===this.calcRate?e:i,this._srclo=0,this._srchi=0,this._dstlo=0,this._dsthi=0,this._scale=1,this._offset=0,i.call(this,1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this.inputs[3][0],u=this.inputs[4][0],o=this._srclo,h=this._srchi,c=this._dstlo,p=this._dsthi,l=this._scale,f=this._offset;if(o!==n||h!==r||c!==a||p!==u){var _=(u-a)/(r-n)||0,d=a-_*n,m=(_-l)*this.rate.slopeFactor,y=(d-f)*this.rate.slopeFactor;for(e=0;t>e;++e)i[e]=s[e]*l+f,l+=m,f+=y;this._srclo=n,this._srchi=r,this._dstlo=a,this._dsthi=u,this._scale=_,this._offset=d}else for(e=0;t>e;++e)i[e]=s[e]*l+f},i=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=this.inputs[2][0],s=this.inputs[3][0],n=this.inputs[4][0];(this._srclo!==e||this._srchi!==i||this._dstlo!==s||this._dsthi!==n)&&(this._srclo=e,this._srchi=i,this._dstlo=s,this._dsthi=n,this._scale=(n-s)/(i-e)||0,this._offset=s-this._scale*e),this.outputs[0][0]=t*this._scale+this._offset};return t}(),s.ugen.specs.LinExp=s.ugen.specs.LinLin,s.unit.specs.LinExp=function(){var t=function(){this.process=2===this.calcRate?e:i,this._srclo=0,this._srchi=0,this._dstlo=0,this._dsthi=0,this._x=0,this._y=0,i.call(this,1)},e=function(t){var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this.inputs[2][0],a=this.inputs[3][0]||.001,u=this.inputs[4][0]||.001,o=this._srclo,h=this._srchi,c=this._dstlo,p=this._dsthi,l=this._x,f=this._y;if(o!==n||h!==r||c!==a||p!==u){var _=p/c,d=h-o||.001,m=(_-l)*this.rate.slopeFactor,y=(d-f)*this.rate.slopeFactor;for(e=0;t>e;++e)i[e]=Math.pow(l,(s[e]-o)/f)*c,l+=m,f+=y;this._srclo=n,this._srchi=r,this._dstlo=a,this._dsthi=u,this._x=_,this._y=d}else for(e=0;t>e;++e)i[e]=Math.pow(l,(s[e]-o)/f)*c},i=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=this.inputs[2][0],s=this.inputs[3][0]||.001,n=this.inputs[4][0]||.001;(this._srclo!==e||this._srchi!==i||this._dstlo!==s||this._dsthi!==n)&&(this._srclo=e,this._srchi=i,this._dstlo=s,this._dsthi=n,this._x=n/s,this._y=i-e||.001),this.outputs[0][0]=Math.pow(this._x,(t-e)/this._y)*s};return t}(),s.ugen.specs.ExpLin=s.ugen.specs.LinLin,s.unit.specs.ExpLin=function(){var t=function(){this.process=2===this.calcRate?e:i,this._srclo=0,this._srchi=0,this._dstlo=0,this._dsthi=0,this._x=0,i.call(this,1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0]||.001,a=this.inputs[2][0]||.001,u=this.inputs[3][0],o=this.inputs[4][0],h=this._srclo,c=this._srchi,p=this._dstlo,l=this._dsthi,f=this._x;if(h!==r||c!==a||p!==u||l!==o){var _=Math.log(Math.abs(c/h)),d=(_-f)*this.rate.slopeFactor;for(e=0;t>e;++e)i=n[e]||.001,s[e]=Math.log(Math.abs(i/h))/f*(l-p)+p,f+=d;this._srclo=r,this._srchi=a,this._dstlo=u,this._dsthi=o,this._x=_}else for(e=0;t>e;++e)i=n[e]||.001,s[e]=Math.log(Math.abs(i/h))/f*(l-p)+p},i=function(){var t=this.inputs[0][0]||.001,e=this.inputs[1][0]||.001,i=this.inputs[2][0]||.001,s=this.inputs[3][0],n=this.inputs[4][0];(this._srclo!==e||this._srchi!==i||this._dstlo!==s||this._dsthi!==n)&&(this._srclo=e,this._srchi=i,this._dstlo=s,this._dsthi=n,this._x=Math.log(Math.abs(i/e))),this.outputs[0][0]=Math.log(Math.abs(t/e))/this._x*(n-s)+s};return t}(),s.ugen.specs.ExpExp=s.ugen.specs.LinLin,s.unit.specs.ExpExp=function(){var t=function(){this.process=2===this.calcRate?e:i,this._srclo=0,this._srchi=0,this._dstlo=0,this._dsthi=0,this._x=0,this._y=0,i.call(this,1)},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0]||.001,a=this.inputs[2][0]||.001,u=this.inputs[3][0]||.001,o=this.inputs[4][0]||.001,h=this._srclo,c=this._srchi,p=this._dstlo,l=this._dsthi,f=this._x,_=this._y;if(h!==r||c!==a||p!==u||l!==o){var d=l/p,m=Math.log(Math.abs(c/h)),y=(d-f)*this.rate.slopeFactor,g=(m-_)*this.rate.slopeFactor;for(e=0;t>e;++e)i=n[e]||.001,s[e]=Math.pow(f,Math.log(Math.abs(i/h))/_)*p,f+=y,_+=g;this._srclo=r,this._srchi=a,this._dstlo=u,this._dsthi=o,this._x=d,this._y=m}else for(e=0;t>e;++e)i=n[e]||.001,s[e]=Math.pow(f,Math.log(Math.abs(i/h))/_)*p},i=function(){var t=this.inputs[0][0]||.001,e=this.inputs[1][0]||.001,i=this.inputs[2][0]||.001,s=this.inputs[3][0]||.001,n=this.inputs[4][0]||.001;(this._srclo!==e||this._srchi!==i||this._dstlo!==s||this._dsthi!==n)&&(this._srclo=e,this._srchi=i,this._dstlo=s,this._dsthi=n,this._x=n/s,this._y=Math.log(Math.abs(i/e))),this.outputs[0][0]=Math.pow(this._x,Math.log(Math.abs(t/e))/this._y)*s};return t}(),i.exports={}}),n("cc/plugins/reverb",function(t,e,i){var s=t("../cc");s.ugen.specs.FreeVerb={checkInputs:s.ugen.checkSameRateAsFirstInput,$ar:{defaults:"in=0,mix=0.33,room=0.5,damp=0.5,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(2,t,e,i,s).madd(n,r)}},$kr:{defaults:"in=0,mix=0.33,room=0.5,damp=0.5,mul=1,add=0",ctor:function(t,e,i,s,n,r){return this.multiNew(1,t,e,i,s).madd(n,r)}}},s.unit.specs.FreeVerb=function(){var t=function(){this.process=e,this._iota0=0,this._iota1=0,this._iota2=0,this._iota3=0,this._iota4=0,this._iota5=0,this._iota6=0,this._iota7=0,this._iota8=0,this._iota9=0,this._iota10=0,this._iota11=0,this._R0_0=0,this._R1_0=0,this._R2_0=0,this._R3_0=0,this._R4_0=0,this._R5_0=0,this._R6_0=0,this._R7_0=0,this._R8_0=0,this._R9_0=0,this._R10_0=0,this._R11_0=0,this._R12_0=0,this._R13_0=0,this._R14_0=0,this._R15_0=0,this._R16_0=0,this._R17_0=0,this._R18_0=0,this._R19_0=0,this._R0_1=0,this._R1_1=0,this._R2_1=0,this._R3_1=0,this._dline0=new Float32Array(225),this._dline1=new Float32Array(341),this._dline2=new Float32Array(441),this._dline3=new Float32Array(556),this._dline4=new Float32Array(1617),this._dline5=new Float32Array(1557),this._dline6=new Float32Array(1491),this._dline7=new Float32Array(1422),this._dline8=new Float32Array(1277),this._dline9=new Float32Array(1116),this._dline10=new Float32Array(1188),this._dline11=new Float32Array(1356),this.process(1)},e=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=Math.max(0,Math.min(this.inputs[1][0],1)),n=1-s,r=Math.max(0,Math.min(this.inputs[2][0],1)),a=.7+.28*r,u=Math.max(0,Math.min(this.inputs[3][0],1)),o=.4*u,h=1-o,c=this._iota0,p=this._iota1,l=this._iota2,f=this._iota3,_=this._iota4,d=this._iota5,m=this._iota6,y=this._iota7,g=this._iota8,v=this._iota9,b=this._iota10,w=this._iota11,k=this._R0_1,N=this._R1_1,x=this._R2_1,A=this._R3_1,M=this._R0_0,S=this._R1_0,R=this._R2_0,P=this._R3_0,T=this._R4_0,I=this._R5_0,L=this._R6_0,O=this._R7_0,C=this._R8_0,F=this._R9_0,E=this._R10_0,D=this._R11_0,B=this._R12_0,U=this._R13_0,q=this._R14_0,$=this._R15_0,G=this._R16_0,W=this._R17_0,j=this._R18_0,Y=this._R19_0,z=this._dline0,H=this._dline1,V=this._dline2,Z=this._dline3,X=this._dline4,K=this._dline5,J=this._dline6,Q=this._dline7,te=this._dline8,ee=this._dline9,ie=this._dline10,se=this._dline11,ne=0;t>ne;++ne){var re=i[ne],ae=.015*re;225===++c&&(c=0);var ue=z[c];341===++p&&(p=0);var oe=H[p];441===++l&&(l=0);var he=V[l];556===++f&&(f=0);var ce=Z[f];1617===++_&&(_=0);var pe=X[_];I=h*T+o*I,X[_]=ae+a*I,T=pe,1557===++d&&(d=0);var le=K[d];O=h*L+o*O,K[d]=ae+a*O,L=le,1491===++m&&(m=0);var fe=J[m];F=h*C+o*F,J[m]=ae+a*F,C=fe,1422===++y&&(y=0);var _e=Q[y];D=h*E+o*D,Q[y]=ae+a*D,E=_e,1277===++g&&(g=0);var de=te[g];U=h*B+o*U,te[g]=ae+a*U,B=de,1116===++v&&(v=0);var me=ee[v];$=h*q+o*$,ee[v]=ae+a*$,q=me,1188===++b&&(b=0);var ye=ie[b];W=h*G+o*W,ie[b]=ae+a*W,G=ye,1356===++w&&(w=0);var ge=se[w];Y=h*j+o*Y,se[w]=ae+a*Y,j=ge;var ve=G+j;Z[f]=.5*P+T+(L+C)+(E+B+(q+ve)),P=ce,A=P-(T+L+(C+E)+(B+q+ve)),V[l]=.5*R+A,R=he,x=R-A,H[p]=.5*S+x,S=oe,N=S-x,z[c]=.5*M+N,M=ue,k=M-N,e[ne]=n*re+s*k}this._iota0=c,this._iota1=p,this._iota2=l,this._iota3=f,this._iota4=_,this._iota5=d,this._iota6=m,this._iota7=y,this._iota8=g,this._iota9=v,this._iota10=b,this._iota11=w,this._R0_1=k,this._R1_1=N,this._R2_1=x,this._R3_1=A,this._R0_0=M,this._R1_0=S,this._R2_0=R,this._R3_0=P,this._R4_0=T,this._R5_0=I,this._R6_0=L,this._R7_0=O,this._R8_0=C,this._R9_0=F,this._R10_0=E,this._R11_0=D,this._R12_0=B,this._R13_0=U,this._R14_0=q,this._R15_0=$,this._R16_0=G,this._R17_0=W,this._R18_0=j,this._R19_0=Y};return t}(),i.exports={}}),n("cc/plugins/trig",function(t,e,i){var s=t("../cc"),n=t("./utils").sc_wrap;s.ugen.specs.Trig={$ar:{defaults:"in=0,dur=0.1",ctor:function(t,e){return this.multiNew(2,t,e)}},$kr:{defaults:"in=0,dur=0.1",ctor:function(t,e){return this.multiNew(1,t,e)}},signalRange:1},s.unit.specs.Trig=function(){var t=function(){this.process=2===this.calcRate&&2!==this.inRates[0]?i:e,this._counter=0,this._trig=0,this._level=0,this.outputs[0][0]=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.rate.sampleRate,u=this._trig,o=this._level,h=this._counter,c=0;t>c;++c)e=n[c],h>0?i=--h?o:0:e>0&&0>=u?(h=Math.max(1,r*a+.5|0),i=o=e):i=0,s[c]=i,u=e;this._trig=u,this._counter=h,this._level=o},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.rate.sampleRate,u=this._trig,o=this._level,h=this._counter;e=n[0];for(var c=0;t>c;++c)h>0?i=--h?o:0:e>0&&0>=u?(h=Math.max(1,r*a+.5|0),i=o=e):i=0,s[c]=i,u=e;this._trig=e,this._counter=h,this._level=o};return t}(),s.ugen.specs.Trig1=s.ugen.specs.Trig,s.unit.specs.Trig1=function(){var t=function(){this.process=2===this.calcRate&&2!==this.inRates[0]?i:e,this._counter=0,this._trig=0,this.outputs[0][0]=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.rate.sampleRate,u=this._trig,o=this._counter,h=0;t>h;++h)e=n[h],o>0?i=--o?1:0:e>0&&0>=u?(o=Math.max(1,r*a+.5|0),i=1):i=0,s[h]=i,u=e;this._trig=u,this._counter=o},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this.rate.sampleRate,u=this._trig,o=this._counter;e=n[0];for(var h=0;t>h;++h)o>0?i=--o?1:0:e>0&&0>=u?(o=Math.max(1,r*a+.5|0),i=1):i=0,s[h]=i,u=e;this._trig=u,this._counter=o};return t}(),s.ugen.specs.Latch={$ar:{defaults:"in=0,trig=0",ctor:function(t,e){return this.multiNew(2,t,e)}},$kr:{defaults:"in=0,trig=0",ctor:function(t,e){return this.multiNew(1,t,e)}}},s.unit.specs.Latch=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._trig=0,this._level=0,this.outputs[0][0]=this.inputs[1][0]>0?this.inputs[0][0]:0},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1],r=this._trig,a=this._level,u=0;t>u;++u)e=n[u],0>=r&&e>0&&(a=s[u]),i[u]=a,r=e;this._trig=r,this._level=a},i=function(t){var e=this.outputs[0],i=this._level,s=this.inputs[0][1];this._trig<=0&&s>0&&(i=this.inputs[0][0]);for(var n=0;t>n;++n)e[n]=i;this._trig=s,this._level=i};return t}(),s.ugen.specs.Gate=s.ugen.specs.Latch,s.unit.specs.Gate=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._level=0,this.outputs[0][0]=0},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1],r=this._level,a=0;t>a;++a)e=n[a],e>0&&(r=s[a]),i[a]=r;
this._level=r},i=function(t){var e,i=this.outputs[0],s=this.inputs[0],n=this.inputs[1][0],r=this._level;if(n>0){for(e=0;t>e;++e)i[e]=r=s[e];this._level=r}else for(e=0;t>e;++e)i[e]=r};return t}(),s.ugen.specs.PulseCount={$ar:{defaults:"trig=0,reset=0",ctor:function(t,e){return this.multiNew(2,t,e)}},$kr:{defaults:"trig=0,reset=0",ctor:function(t,e){return this.multiNew(1,t,e)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.PulseCount=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._prevtrig=0,this._prevreset=0,this._level=0,this.outputs[0][0]=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._prevreset,o=this._level,h=0;t>h;++h)e=n[h],i=r[h],0>=u&&i>0?o=0:0>=a&&e>0&&(o+=1),s[h]=o,a=e,u=i;this._level=o,this._prevtrig=a,this._prevreset=u},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._prevreset,o=this._level;e=n[0],i=r[0],0>=u&&i>0?o=0:0>=a&&e>0&&(o+=1),s[0]=o,a=e,u=i;for(var h=1;t>h;++h)e=n[h],i=r[h],0>=u&&i>0?o=0:0>=a&&e>0&&(o+=1),s[h]=o,a=e,u=i;this._level=o,this._prevtrig=a,this._prevreset=u};return t}(),s.ugen.specs.Peak={$ar:{defaults:"in=0,trig=0",ctor:function(t,e){return this.multiNew(2,t,e)}},$kr:{defaults:"in=0,trig=0",ctor:function(t,e){return this.multiNew(1,t,e)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Peak=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._prevtrig=0,this.outputs[0][0]=this._level=this.inputs[0][0]},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._level,o=0;t>o;++o)e=r[o],i=Math.abs(n[o]),s[o]=u=Math.max(i,u),0>=a&&e>0&&(u=i),a=e;this._prevtrig=a,this._level=u},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._level;e=r[0],i=Math.abs(n[0]),s[0]=u=Math.max(i,u),0>=a&&e>0&&(u=i),a=e;for(var o=1;t>o;++o)e=r[o],i=Math.abs(n[o]),s[o]=u=Math.max(i,u),0>=a&&e>0&&(u=i),a=e;this._prevtrig=a,this._level=u};return t}(),s.ugen.specs.RunningMin=s.ugen.specs.Peak,s.unit.specs.RunningMin=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._prevtrig=0,this.outputs[0][0]=this._level=this.inputs[0][0]},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._level,o=0;t>o;++o)e=r[o],i=n[o],u>i&&(u=i),s[o]=u,0>=a&&e>0&&(u=i),a=e;this._prevtrig=a,this._level=u},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._level;e=r[0],i=n[0],u>i&&(u=i),s[0]=u,0>=a&&e>0&&(u=i),a=e;for(var o=1;t>o;++o)e=r[o],i=n[o],u>i&&(u=i),s[o]=u,0>=a&&e>0&&(u=i),a=e;this._prevtrig=a,this._level=u};return t}(),s.ugen.specs.RunningMax=s.ugen.specs.Peak,s.unit.specs.RunningMax=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._prevtrig=0,this.outputs[0][0]=this._level=this.inputs[0][0]},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._level,o=0;t>o;++o)e=r[o],i=n[o],i>u&&(u=i),s[o]=u,0>=a&&e>0&&(u=i),a=e;this._prevtrig=a,this._level=u},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._level;e=r[0],i=n[0],i>u&&(u=i),s[0]=u,0>=a&&e>0&&(u=i),a=e;for(var o=1;t>o;++o)e=r[o],i=n[o],i>u&&(u=i),s[o]=u,0>=a&&e>0&&(u=i),a=e;this._prevtrig=a,this._level=u};return t}(),s.ugen.specs.Stepper={$ar:{defaults:"trig=0,reset=0,min=0,max=7,step=1,resetval",ctor:function(t,e,i,s,n,r){return"undefined"==typeof r&&(r=i),this.multiNew(2,t,e,i,s,n,r)}},$kr:{defaults:"trig=0,reset=0,min=0,max=7,step=1,resetval",ctor:function(t,e,i,s,n,r){return"undefined"==typeof r&&(r=i),this.multiNew(1,t,e,i,s,n,r)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Stepper=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._prevtrig=0,this._prevreset=0,this._level=this.inputs[5][0],this.outputs[0][0]=0},e=function(t){for(var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1],u=this.inputs[2][0],o=this.inputs[3][0],h=this.inputs[4][0],c=this.inputs[5][0],p=this._prevtrig,l=this._prevreset,f=this._level,_=0;t>_;++_)e=r[_],i=a[_],0>=l&&i>0?f=n(c,u,o):0>=p&&e>0&&(f=n(f+h,u,o)),s[_]=f,p=e,l=i;this._level=f,this._prevtrig=p,this._prevreset=l},i=function(t){var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1],u=this.inputs[2][0],o=this.inputs[3][0],h=this.inputs[4][0],c=this.inputs[5][0],p=this._prevtrig,l=this._prevreset,f=this._level;e=r[0],i=a[0],0>=l&&i>0?f=n(c,u,o):0>=p&&e>0&&(f=n(f+h,u,o)),s[0]=f,p=e,l=i;for(var _=1;t>_;++_)e=r[_],0>=p&&e>0&&(f=n(f+h,u,o)),s[_]=f,p=e,l=i;this._level=f,this._prevtrig=p,this._prevreset=l};return t}(),s.ugen.specs.PulseDivider={$ar:{defaults:"trig=0,div=2,start=0",ctor:function(t,e,i){return this.multiNew(2,t,e,i)}},$kr:{defaults:"trig=0,div=2,start=0",ctor:function(t,e,i){return this.multiNew(1,t,e,i)}}},s.unit.specs.PulseDivider=function(){var t=function(){this.process=e,this._prevtrig=0,this._level=0,this._counter=Math.floor(this.inputs[2][0]+.5),this.outputs[0][0]=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=0|this.inputs[1][0],a=this._prevtrig,u=this._counter,o=0;t>o;++o)i=n[o],0>=a&&i>0?(u++,u>=r?(u=0,e=1):e=0):e=0,s[o]=e,a=i;this._counter=u,this._prevtrig=a};return t}(),s.ugen.specs.SetResetFF=s.ugen.specs.PulseCount,s.unit.specs.SetResetFF=function(){var t=function(){this.process=2===this.inRates[1]?e:i,this._prevtrig=0,this._prevreset=0,this._level=0,this.outputs[0][0]=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._prevreset,o=this._level,h=0;t>h;++h)e=n[h],i=r[h],0>=u&&i>0?o=0:0>=a&&e>0&&(o=1),s[h]=o,a=e,u=i;this._level=o,this._prevtrig=a,this._prevreset=u},i=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1],a=this._prevtrig,u=this._prevreset,o=this._level;e=n[0],i=r[0],0>=u&&i>0?o=0:0>=a&&e>0&&(o=1),s[0]=o,a=e,u=i;for(var h=1;t>h;++h)e=n[h],0>=a&&e>0&&(o=1),s[h]=o,a=e;this._level=o,this._prevtrig=a,this._prevreset=u};return t}(),s.ugen.specs.ToggleFF={$ar:{defaults:"trig=0",ctor:function(t){return this.multiNew(2,t)}},$kr:{defaults:"trig=0",ctor:function(t){return this.multiNew(1,t)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.ToggleFF=function(){var t=function(){this.process=e,this._prevtrig=0,this._level=0,this.outputs[0][0]=0},e=function(t){for(var e,i=this.outputs[0],s=this.inputs[0],n=this._prevtrig,r=this._level,a=0;t>a;++a)e=s[a],0>=n&&e>0&&(r=1-r),i[a]=r,n=e;this._prevtrig=n,this._level=r};return t}(),s.ugen.specs.ZeroCrossing={$ar:{defaults:"in=0",ctor:function(t){return this.multiNew(2,t)}},$kr:{defaults:"in=0",ctor:function(t){return this.multiNew(1,t)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.ZeroCrossing=function(){var t=function(){this.process=e,this._prevfrac=0,this._previn=this.inputs[0][0],this._counter=0,this.outputs[0][0]=this._level=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this._previn,a=this._prevfrac,u=this._level,o=this._counter,h=this.rate.sampleRate,c=0;t>c;++c)o++,e=n[c],o>4&&0>=r&&e>0&&(i=-r/(e-r),u=h/(i+o-a),a=i,o=0),s[c]=u,r=e;this._previn=r,this._prevfrac=a,this._level=u,this._counter=o};return t}(),s.ugen.specs.Timer=s.ugen.specs.ZeroCrossing,s.unit.specs.Timer=function(){var t=function(){this.process=e,this._prevfrac=0,this._previn=this.inputs[0][0],this._counter=0,this.outputs[0][0]=this._level=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this._previn,a=this._prevfrac,u=this._level,o=this._counter,h=this.rate.sampleDur,c=0;t>c;++c)o++,e=n[c],0>=r&&e>0&&(i=-r/(e-r),u=h*(i+o-a),a=i,o=0),s[c]=u,r=e;this._previn=r,this._prevfrac=a,this._level=u,this._counter=o};return t}(),s.ugen.specs.Sweep={$ar:{defaults:"trig=0,rate=1",ctor:function(t,e){return this.multiNew(2,t,e)}},$kr:{defaults:"trig=0,rate=1",ctor:function(t,e){return this.multiNew(1,t,e)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Sweep=function(){var t=function(){this.process=e,this._prevtrig=this.inputs[0][0],this._level=0},e=function(t){for(var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0]*this.rate.sampleDur,a=this._prevtrig,u=this._level,o=0;t>o;++o)e=n[o],0>=a&&e>0?(i=-a/(e-a),u=i*r):u+=r,s[o]=u,a=e;this._prevtrig=a,this._level=u};return t}(),s.ugen.specs.Phasor={$ar:{defaults:"trig=0,rate=1,start=0,end=1,resetPos=0",ctor:function(t,e,i,s,n){return this.multiNew(2,t,e,i,s,n)}},$kr:{defaults:"trig=0,rate=1,start=0,end=1,resetPos=0",ctor:function(t,e,i,s,n){return this.multiNew(1,t,e,i,s,n)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.Phasor=function(){var t=function(){this.process=e,this._prevtrig=this.inputs[0][0],this.outputs[0][0]=this._level=this.inputs[2][0]},e=function(t){for(var e,i,s=this.outputs[0],r=this.inputs[0],a=this.inputs[1][0],u=this.inputs[2][0],o=this.inputs[3][0],h=this.inputs[4][0],c=this._prevtrig,p=this._level,l=0;t>l;++l)e=r[l],0>=c&&e>0&&(i=1-c/(e-c),p=h+i*a),s[l]=p,p+=a,p=n(p,u,o),c=e;this._prevtrig=c,this._level=p};return t}(),s.ugen.specs.PeakFollower={$ar:{defaults:"in=0,decay=0.999",ctor:function(t,e){return this.multiNew(2,t,e)}},$kr:{defaults:"in=0,decay=0.999",ctor:function(t,e){return this.multiNew(1,t,e)}},checkInputs:s.ugen.checkSameRateAsFirstInput},s.unit.specs.PeakFollower=function(){var t=function(){this.process=e,this._decay=this.inputs[1][0],this.outputs[0][0]=this._level=this.inputs[0][0]},e=function(t){var e,i,s=this.outputs[0],n=this.inputs[0],r=this.inputs[1][0],a=this._level;if(r===this._decay)for(e=0;t>e;++e)i=Math.abs(n[e]),a=i>=a?i:i+r*(a-i),s[e]=a;else{var u=(r-this._decay)*this.rate.slopeFactor;for(e=0;t>e;++e)i=Math.abs(n[e]),i>=a?a=i:(a=(1-Math.abs(r))*i+r*a,r+=u),s[e]=a}this._level=a,this._decay=r};return t}(),i.exports={}}),n("cc/plugins/ui",function(t,e,i){var s=t("../cc"),n=Math.log(.001),r={$kr:{defaults:"minval=0,maxval=1,warp=0,lag=0.2",ctor:function(t,e,i,s){return"exponential"===i?i=1:"linear"===i&&(i=0),this.multiNew(1,t,e,i,s)}}};s.ugen.specs.MouseX=r,s.unit.specs.MouseX=function(){var t=function(){this.process=e,this._y1=0,this._b1=0,this._lag=0,this.process(1)},e=function(){var t=this.inputs[0][0]||.01,e=this.inputs[1][0],i=this.inputs[2][0],s=this.inputs[3][0],r=this._y1,a=this._b1;s!==this._lag&&(this._b1=0===s?0:Math.exp(n/(s*this.rate.sampleRate)),this._lag=s);var u=this.world.f32_syncItems[2];0===i?u=(e-t)*u+t:(u=Math.pow(e/t,u)*t,isNaN(u)&&(u=0)),this.outputs[0][0]=r=u+a*(r-u),this._y1=r};return t}(),s.ugen.specs.MouseY=r,s.unit.specs.MouseY=function(){var t=function(){this.process=e,this._y1=0,this._b1=0,this._lag=0,this.process(1)},e=function(){var t=this.inputs[0][0]||.01,e=this.inputs[1][0],i=this.inputs[2][0],s=this.inputs[3][0],r=this._y1,a=this._b1;s!==this._lag&&(this._b1=0===s?0:Math.exp(n/(s*this.rate.sampleRate)),this._lag=s);var u=this.world.f32_syncItems[3];0===i?u=(e-t)*u+t:(u=Math.pow(e/t,u)*t,isNaN(u)&&(u=0)),this.outputs[0][0]=r=u+a*(r-u),this._y1=r};return t}(),s.ugen.specs.MouseButton={$kr:{defaults:"minval=0,maxval=1,lag=0.2",ctor:function(t,e,i){return this.multiNew(1,t,e,i)}}},s.unit.specs.MouseButton=function(){var t=function(){this.process=e,this._y1=0,this._b1=0,this._lag=0,this.process(1)},e=function(){var t=this.inputs[0][0],e=this.inputs[1][0],i=this.inputs[2][0],s=this._y1,r=this._b1;i!==this._lag&&(this._b1=0===i?0:Math.exp(n/(i*this.rate.sampleRate)),this._lag=i);var a=this.world.f32_syncItems[4]?e:t;this.outputs[0][0]=s=a+r*(s-a),this._y1=s};return t}(),i.exports={}}),n("cc/lang/lang-worker",function(e,i,s){var n=e("./cc"),r=e("../common/extend"),a=e("./utils").lang_onmessage,u=function(){function t(){n.opmode="worker",n.SynthLang.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=1024,this.bufLength=64}return r(t,n.SynthLang),t.prototype.sendToClient=function(t){postMessage(t)},t.prototype.sendToClientWithTransferable=function(t){postMessage(t,[t.buffer])},t.prototype.process=function(){this.currentTime+=this.currentTimeIncr,this.taskManager.process();var t=this.timelineResult.splice(0);this.sendToServer(["/processed",t])},t}();n.createWorkerSynthLang=function(){var e=new u;return t.onmessage=a,e},s.exports={}}),n("cc/lang/lang-nodejs",function(t,e,i){var s=t("./cc"),n=t("../common/extend"),r=function(){function t(){s.opmode="nodejs",s.SynthLang.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=64}return n(t,s.SynthLang),t.prototype.process=function(){this.currentTime+=this.currentTimeIncr,this.taskManager.process();var t=this.timelineResult.splice(0);this.sendToServer(["/processed",t])},t}();s.createNodeJSSynthLang=function(){var t=new r;return t},i.exports={}}),n("cc/lang/lang-socket",function(e,i,s){var n=e("./cc"),r=e("../common/extend"),a=e("./utils").lang_onmessage,u=function(){function t(){n.opmode="nodejs",n.SynthLang.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=64,this.socketPath=null}return e("../common/browser"),r(t,n.SynthLang),t.prototype.sendToClient=function(t){postMessage(t)},t.prototype.sendToClientWithTransferable=function(t){postMessage(t,[t.buffer])},t.prototype.sendToServer=function(){},t.prototype.process=function(){this.taskManager.process();var t=this.timelineResult.splice(0);this.sendToServer(["/processed",t])},t.prototype.openSocket=function(){var t=this,e=this.socket=n.createWebSocket(this.socketPath),i=[];e.binaryType="arraybuffer",e.onopen=function(){i.forEach(function(t){e.send(t)}),i=[]},e.onmessage=function(e){var i=e.data;return"string"!=typeof i?void t.sendToClient(new Float32Array(i)):void t.recvFromServer(JSON.parse(i))},e.onclose=function(){},e.onerror=function(){},this.sendToServer=function(t){t instanceof Uint8Array?e.readyState===WebSocket.OPEN&&e.send(t.buffer):e.readyState===WebSocket.OPEN?e.send(JSON.stringify(t)):i.push(JSON.stringify(t))}},t.prototype.closeSocket=function(){this.socket.close(),this.socket=null},t.prototype.process=function(){for(var t=this.taskManager,e=this.strmLength/this.bufLength,i=[],s=this.currentTimeIncr;e--;)this.currentTime+=s,t.process(),i=i.concat(this.timelineResult.splice(0),0);this.sendToServer(["/processed",i])},t.prototype.extendCommands=function(t){t["/socket/open"]=function(t){this.socketPath=t[1],this.openSocket()},t["/socket/close"]=function(){this.closeSocket()},t["/socket/sendToServer"]=function(t){this.sendToServer(t)},t["/socket/sendToClient"]=function(t){this.sendToClient(t)}},t}();n.createSocketSynthLang=function(){var e=new u;return t.onmessage=a,n.opmode="socket",e},s.exports={}}),n("cc/server/server",function(t,e,i){var s=t("./cc"),n={},r=function(){function t(){this.sampleRate=0,this.channels=0,this.strmLength=0,this.bufLength=0,this.world=null,this.rates=null,this.strm=null,this.timer=s.createTimer(),this.initialized=!1,this.syncCount=0,this.sysSyncCount=0}return t.prototype.sendToLang=function(){throw"SynthServer#sendToLang: should be overridden"},t.prototype.recvFromLang=function(t,e){if(e=0|e,t instanceof Uint8Array)this.world.doBinayCommand(t,e);else{var i=n[t[0]];if(!i)throw new Error("Unknown command: "+t[0]);i.call(this,t,e)}},t.prototype.connect=function(){throw"SynthServer#connect: should be overridden"},t.prototype.init=function(t){if(!this.initialized){this.initialized=!0,t&&(this.sampleRate=0|t[1],this.channels=0|t[2],this.strmLength=0|t[3]),this.strm=new Float32Array(this.strmLength*this.channels);var e=16*this.bufLength+128,i=this.bufLength,n=this.bufLength<<2;this.busLength=e,this.busClear=new Float32Array(e),this.busOut=new Float32Array(e),this.busOutLen=this.bufLength<<1,this.busOutL=new Float32Array(this.busOut.buffer,0,i),this.busOutR=new Float32Array(this.busOut.buffer,n,i),this.world||(this.world=s.createWorld(0)),this.rates=[],this.rates[2]=s.createRate(this.sampleRate,this.bufLength),this.rates[1]=s.createRate(this.sampleRate/this.bufLength,1),this.rates[0]=this.rates[1],this.rates[3]=this.rates[1]}},t.prototype.play=function(t,e){if(e=0|e,this.world.run(!0,e),!this.timer.isRunning()){var i=this;this.timer.start(function(){i.process()},10)}this.sendToLang(["/played",this.syncCount])},t.prototype.pause=function(t,e){e=0|e,this.world.run(!1,e),this.timer.isRunning()&&(this.world.isRunning()||this.timer.stop()),this.sendToLang(["/paused",this.syncCount])},t.prototype.reset=function(t,e){e=0|e,this.world.reset(e)},t.prototype.pushToTimeline=function(t,e){e=0|e;var i=t[1];i.length&&this.world.pushToTimeline(i,e)},t.prototype.process=function(){throw"SynthServer#process: should be overridden"},t}();n["/init"]=function(t,e){this.init(t,e)},n["/play"]=function(t,e){this.play(t,e)},n["/pause"]=function(t,e){this.pause(t,e)},n["/reset"]=function(t,e){this.reset(t,e)},n["/processed"]=function(t,e){this.pushToTimeline(t,e)},n["/socket/sendToServer"]=function(t,e){this.exports&&(t=t[1],t.userId=e,this.exports.emit("message",t))},s.SynthServer=r,t("../common/timer"),t("./rate"),t("./unit"),t("./buffer"),t("./node"),t("./world"),t("./server-worker"),t("./server-nodejs"),t("./server-socket"),t("./basic_unit"),t("../plugins/installer"),s.createSynthServer=function(){switch(s.opmode){case"worker":return s.createWorkerSynthServer();case"nodejs":return s.createNodeJSSynthServer();case"socket":return s.createSocketSynthServer()}throw new Error("A SynthServer is not defined for: "+s.opmode)},i.exports={}}),n("cc/server/cc",function(t,e,i){var s=t("../cc");s.UGen||(s.UGen=Object),i.exports=s}),n("cc/common/timer",function(t,e,i){var s=t("../cc"),n=function(){function t(){this._timerId=0}return t.prototype.start=function(t,e){this._timerId&&clearInterval(this._timerId),this._timerId=setInterval(t,e)},t.prototype.stop=function(){this._timerId&&clearInterval(this._timerId),this._timerId=0},t.prototype.isRunning=function(){return!!this._timerId},t}();s.createTimer=function(){return new n},i.exports={NativeTimer:n}}),n("cc/server/rate",function(t,e,i){var s=t("./cc"),n=function(){function t(t,i){this.sampleRate=t,this.sampleDur=1/t,this.radiansPerSample=e/t,this.bufLength=i,this.bufDuration=i/t,this.bufRate=1/this.bufDuration,this.slopeFactor=1/i,this.filterLoops=i/3|0,this.filterRemain=i%3|0,this.filterSlope=0===this.filterLoops?0:1/this.filterLoops}var e=2*Math.PI;return t}();s.createRate=function(t,e){return new n(t,e)},i.exports={}}),n("cc/server/unit",function(t,e,i){var s=t("../cc"),n=function(){function t(t,e){this.parent=t,this.world=t.world,this.specs=e,this.name=e[0],this.calcRate=e[1],this.specialIndex=e[2],this.numInputs=e[3].length>>1,this.numOutputs=e[4].length,this.inputs=new Array(this.numInputs),this.inRates=new Array(this.numInputs),this.fromUnits=new Array(this.numInputs),this.outRates=e[4],this.rate=s.server.rates[this.calcRate];var i=this.rate.bufLength,n=Float32Array.BYTES_PER_ELEMENT,r=new Float32Array(t.heap.buffer,t.heapIndex*n,i*this.numOutputs);t.heapIndex+=i*this.numOutputs;for(var a=new Array(this.numOutputs),u=0,o=a.length;o>u;++u)a[u]=new Float32Array(r.buffer,r.byteOffset+i*u*n,i);this.heap=r,this.outputs=a,this.bufLength=i,this.done=!1}return t.prototype.init=function(){var t=s.unit.specs[this.name];if("function"!=typeof t)throw new Error(this.name+"'s ctor is not found.");return t.call(this),this},t.prototype.doneAction=function(t){this.parent.doneAction(t)},t}();s.createUnit=function(t,e){return new n(t,e)},i.exports={Unit:n}}),n("cc/server/buffer",function(t,e,i){var s=t("./cc"),n=function(){function t(t,e,i,n){this.world=t,this.bufnum=e,this.frames=i,this.channels=n,this.sampleRate=s.server.sampleRate,this.samples=new Float32Array(i*n)}return t.prototype.bind=function(t,e,i,s){this.sampleRate=t,this.channels=e,this.frames=i,this.samples=s},t.prototype.zero=function(){var t,e=this.samples;for(t=e.length;t--;)e[t]=0},t.prototype.fill=function(t){var e,i,s,n,r,a=t.length/3|0,u=this.samples,o=0;for(n=0;a>n;n++)for(e=t[o++],i=t[o++],s=t[o++],r=0;i>r&&!(e+r>=u.length);++r)u[e+r]=s},t.prototype.set=function(t){var e,i,s,n,r,a,u=this.samples,o=u.length,h=t.length;for(n=0;h>n;n+=2)if(e=t[n],!("number"!=typeof e||0>e||e>=o))if(e|=0,i=t[n+1],"number"==typeof i)u[e]=i||0;else if(Array.isArray(i))for(s=i,r=0,a=s.length;a>r&&!(e+r>=o);++r)i=s[r],"number"==typeof i&&(u[e+r]=i||0)},t.prototype.get=function(t,e){var i=this.samples,n=["/b_get",e,i[t]||0];s.server.sendToLang(n)},t.prototype.getn=function(t,e,i){var n=this.samples,r=new Array(e+2);r[0]="/b_getn",r[1]=i;for(var a=0;e>a;++a)r[a+2]=n[a+t]||0;s.server.sendToLang(r)},t.prototype.gen=function(t,e,i){var s=r[t];s&&s(this,e,i)},t}(),r={};r.copy=function(t,e,i){var s=i[0],n=i[1],r=i[2],a=i[3],u=t.world.buffers[s];if(u){var o;o=a>0?u.samples.slice(r,r+a):u.samples.slice(r),t.samples.set(o,n)}},r.normalize=function(t,e,i){var s=t.samples,n=2&e;n?p(s.length,s,i[0]):c(s.length,s,i[0])},r.sine1=function(t,e,i){var s,n,r=t.samples,o=1&e,h=2&e,l=4&e,f=r.length;if(l)for(s=r.length;s--;)r[s]=0;if(h)for(s=0,n=i.length;n>s;++s)a(f,r,s+1,i[s],0);else for(s=0,n=i.length;n>s;++s)u(f,r,s+1,i[s],0);o&&(h?p(r.length,r,1):c(r.length,r,1))},r.sine2=function(t,e,i){var s,n,r=t.samples,o=1&e,h=2&e,l=4&e,f=r.length;if(l)for(s=r.length;s--;)r[s]=0;if(h)for(s=0,n=i.length;n>s;s+=2)a(f,r,i[s],i[s+1],0);else for(s=0,n=i.length;n>s;s+=2)u(f,r,i[s],i[s+1],0);o&&(h?p(r.length,r,1):c(r.length,r,1))},r.sine3=function(t,e,i){var s,n,r=t.samples,o=1&e,h=2&e,l=4&e,f=r.length;if(l)for(s=r.length;s--;)r[s]=0;if(h)for(s=0,n=i.length;n>s;s+=3)a(f,r,i[s],i[s+1],i[s+2]);else for(s=0,n=i.length;n>s;s+=3)u(f,r,i[s],i[s+1],i[s+2]);o&&(h?p(r.length,r,1):c(r.length,r,1))},r.cheby=function(t,e,i){var s,n,r=t.samples,a=1&e,u=2&e,l=4&e,f=r.length;if(l)for(s=r.length;s--;)r[s]=0;if(u)for(s=0,n=i.length;n>s;++s)o(f,r,s+1,i[s]);else for(s=0,n=i.length;n>s;++s)h(f,r,s+1,i[s]);a&&(u?p(r.length,r,1):c(r.length,r,1))};var a=function(t,e,i,s,n){if(0!==s){var r,a=t>>1,u=2*i*Math.PI/a,o=s*Math.sin(n);n+=u;for(var h=0;t>h;h+=2)r=s*Math.sin(n),e[h]+=2*o-r,e[h+1]+=r-o,o=r,n+=u}},u=function(t,e,i,s,n){if(0!==s)for(var r=2*i*Math.PI/t,a=0;t>a;++a)e[a]+=s*Math.sin(n),n+=r},o=function(t,e,i,s){if(0!==s){var n,r=t>>1,a=2/r,u=-1,o=-s*Math.cos(i*Math.PI*.5),h=s*Math.cos(i*Math.acos(u))-o;u+=a;for(var c=0;t>c;c+=2)n=s*Math.cos(i*Math.acos(u))-o,e[c]+=2*h-n,e[c+1]+=n-h,h=n,u+=a}},h=function(t,e,i,s){if(0!==s)for(var n=2/t,r=-1,a=-s*Math.cos(i*Math.PI*.5),u=0;t>u;++u)e[u]+=s*Math.cos(i*Math.acos(r))-a,r+=n},c=function(t,e,i){var s,n,r,a;for(a=s=0;t>a;++a)n=Math.abs(e[a]),n>s&&(s=n);if(0!==s&&s!==i)for(r=i/s,a=0;t>a;++a)e[a]*=r},p=function(t,e,i){var s,n,r,a;for(a=s=0;t>a;a+=2)n=Math.abs(e[a]+e[a+1]),n>s&&(s=n);if(0!==s&&s!==i)for(r=i/s,a=0;t>a;++a)e[a]*=r};s.createServerBuffer=function(t,e,i,s){return new n(t,e,i,s)},i.exports={Buffer:n,add_partial:u,add_wpartial:a,add_chebyshev:h,add_wchebyshev:o,normalize_samples:c,normalize_wsamples:p}}),n("cc/server/node",function(t,e,i){var s=t("./cc"),n=t("../common/extend"),r=[],a=[],u=function(){function t(t,e){this.world=t,this.nodeId=0|e,this.next=null,this.prev=null,this.parent=null,this.running=!0}return t.prototype.run=function(t){this.running=!!t},t.prototype.end=function(){0!==this.nodeId&&(this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.parent&&(this.parent.head===this&&(this.parent.head=this.next),this.parent.tail===this&&(this.parent.tail=this.prev)),this.prev=null,this.next=null,this.parent=null,this.world.nodes[this.nodeId]=null),this.running=!1},t.prototype.doneAction=function(t){var e=a[t];e&&e(this)},t}(),o=function(){function t(t,e,i,s){u.call(this,t,e),this.head=null,this.tail=null,i&&r[s](this,i)}return n(t,u),t.prototype.endAll=function(){for(var t,e=this.head;e;)t=e.next,e.end(),e=t;this.end()},t.prototype.endDeep=function(){for(var e,i=this.head;i;)e=i.next,i instanceof t?i.endDeep():i.end(),i=e;this.end()},t.prototype.process=function(t){this.head&&this.running&&this.head.process(t),this.next&&this.next.process(t)},t}(),h=function(){function t(t,e,i,s,n,a){u.call(this,t,e);var o=t.defs[n];o&&this.build(o,a),i&&r[s](this,i)}return n(t,u),t.prototype.build=function(t,e){var i,n,r,a,u,o,h,c,p,l,f,_,d,m,y,g=[],v=this.world,b=new Float32Array(t.heapSize);for(this.specs=t,this.params=t.params,this.heap=b,this.heapIndex=this.params.values.length,b.set(this.params.values),this.controls=b,this.set(e),i=t.consts,n=new Array(i.length),c=0,p=i.length;p>c;++c)n[c]=v.getFixNum(i[c]);for(i=t.defList,c=0,p=i.length;p>c;++c){for(r=s.createUnit(this,i[c]),a=r.inputs,u=r.inRates,o=r.fromUnits,h=r.specs[3],l=_=0,f=a.length;f>l;++l)m=h[_++],y=h[_++],-1===m?(a[l]=n[y].outputs[0],u[l]=0):(d=g[m],a[l]=d.outputs[y],u[l]=d.outRates[y],o[l]=d);r.init(),r.process&&3!==r.rate&&g.push(r)}return this.unitList=g,this},t.prototype.set=function(t){for(var e=this.controls,i=0,s=t.length;s>i;i+=2)e[t[i]]=t[i+1]},t.prototype.process=function(t){if(this.running)for(var e=this.unitList,i=0,s=e.length;s>i;++i){var n=e[i];n.process(n.rate.bufLength)}this.next&&this.next.process(t)},t}();r[0]=function(t,e){0!==t.nodeId&&e instanceof o&&(t.prev=null,t.next=e.head,e.head?(e.head.prev=t,e.head=t):e.head=e.tail=t,t.parent=e)},r[1]=function(t,e){0!==t.nodeId&&e instanceof o&&(t.prev=e.tail,t.next=null,e.tail?(e.tail.next=t,e.tail=t):e.head=e.tail=t,t.parent=e)},r[2]=function(t,e){0!==t.nodeId&&e.parent&&(t.parent=e.parent,t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:t.parent.head=t,e.prev=t)},r[3]=function(t,e){0!==t.nodeId&&e.parent&&(t.parent=e.parent,t.prev=e,t.next=e.next,e.next?e.next.prev=t:t.parent.tail=t,e.next=t)},r[4]=function(t,e){if(0!==t.node&&e.parent){var i=t.parent=e.parent;t.prev=e.prev,t.next=e.next,t instanceof o&&(t.head=e.head,t.tail=e.tail),e.prev&&(e.prev.next=t),e.next&&(e.next.prev=t),i.head===e&&(i.head=t),i.tail===e&&(i.tail=t)}},a[0]=null,a[1]=function(t){t.running=!1},a[2]=function(t){t.end()},a[3]=function(t){t.prev&&t.prev.end(),t.end()},a[4]=function(t){t.next&&t.next.end(),t.end()},a[5]=function(t){var e=t.prev;e instanceof o?e.endAll():e&&e.end(),t.end()},a[6]=function(t){var e=t.next;t.end(),e instanceof o?e.endAll():e&&e.end()},a[7]=function(t){for(var e;t;)e=t.prev,t.end(),t=e},a[8]=function(t){for(var e;t;)e=t.next,t.end(),t=e},a[9]=function(t){t.prev&&(t.prev.running=!1),t.end()},a[10]=function(t){t.next&&(t.next.running=!1),t.end()},a[11]=function(t){var e=t.prev;e instanceof o?e.endDeep():e&&e.end(),t.end()},a[12]=function(t){var e=t.next;e instanceof o?e.endDeep():e&&e.end(),t.end()},a[13]=function(t){var e;for(t=t.parent.head;t;)e=t.next,t.end(),t=e},a[14]=function(t){t.parent.endDeep()},s.createServerRootNode=function(t){return new o(t,0,0,0)},s.createServerGroup=function(t,e,i,s){return new o(t,e,i,s)},s.createServerSynth=function(t,e,i,s,n,r){return new h(t,e,i,s,n,r)},i.exports={Node:u,Group:o,Synth:h,graphFunc:r}}),n("cc/server/world",function(t,e,i){var s=t("./cc"),n=[].push,r={},a=function(){function t(t){this.userId=0|t,this.bus=new Float32Array(s.server.busClear),this.busClear=s.server.busClear,this.busIndex=0,this.busAmp=.8,this.timeline=[],this.timelineIndex=0,this.rootNode=s.createServerRootNode(this),this.nodes={0:this.rootNode},this.fixNums={},this.defs={},this.buffers=[],this.bufSrc={},this.syncItems=new Uint8Array(20),this.i16_syncItems=new Int16Array(this.syncItems.buffer),this.f32_syncItems=new Float32Array(this.syncItems.buffer)}return t.prototype.run=function(t){this.rootNode.run(t),this.bus.set(this.busClear),this.timeline=[]},t.prototype.reset=function(){this.bus.set(this.busClear),this.timeline=[],this.rootNode=s.createServerRootNode(this),this.nodes={0:this.rootNode},this.fixNums={},this.defs={},this.buffers={},this.bufSrc={}},t.prototype.isRunning=function(){return this.rootNode.running},t.prototype.pushToTimeline=function(t){n.apply(this.timeline,t)},t.prototype.doBinayCommand=function(t){var e=r[(t[1]<<8)+t[0]];e&&e(this,t)},t.prototype.getFixNum=function(t){var e=this.fixNums;return e[t]||(e[t]={outputs:[new Float32Array([t])]})},t.prototype.process=function(t){for(var e,i,s=this.timeline;e=s.shift();)i=r[e[0]],i&&i(this,e);this.bus.set(this.busClear),this.rootNode.process(t,this)},t}();r["/n_run"]=function(t,e){var i=0|e[1],s=!!e[2],n=t.nodes[i];n&&n.run(s)},r["/n_free"]=function(t,e){var i=0|e[1],s=t.nodes[i];s&&s.doneAction(2)},r["/n_set"]=function(t,e){var i=0|e[1],s=e[2],n=t.nodes[i];n&&n.set(s)},r["/g_new"]=function(t,e){var i=0|e[1],n=0|e[2],r=0|e[3],a=t.nodes[r];a&&(t.nodes[i]=s.createServerGroup(t,i,a,n))},r["/s_def"]=function(t,e){var i=0|e[1],s=e[2];t.defs[i]=s},r["/s_new"]=function(t,e){var i=0|e[1],n=0|e[2],r=0|e[3],a=0|e[4],u=e[5],o=t.nodes[r];o&&(t.nodes[i]=s.createServerSynth(t,i,o,n,a,u))},r["/b_new"]=function(t,e){var i=0|e[1],n=0|e[2],r=0|e[3];t.buffers[i]=s.createServerBuffer(t,i,n,r)},r["/b_free"]=function(t,e){var i=0|e[1];t.buffers[i]=null},r["/b_zero"]=function(t,e){var i=0|e[1],s=t.buffers[i];s&&s.zero()},r["/b_set"]=function(t,e){var i=0|e[1],s=e[2],n=t.buffers[i];n&&n.set(s)},r["/b_get"]=function(t,e){var i=0|e[1],s=0|e[2],n=0|e[3],r=t.buffers[i];r&&r.get(s,n)},r["/b_getn"]=function(t,e){var i=0|e[1],s=0|e[2],n=0|e[3],r=0|e[4],a=t.buffers[i];a&&a.getn(s,n,r)},r["/b_fill"]=function(t,e){var i=0|e[1],s=e[2],n=t.buffers[i];n&&n.fill(s)},r["/b_gen"]=function(t,e){var i=0|e[1],s=e[2],n=0|e[3],r=e.slice(4),a=t.buffers[i];a&&a.gen(s,n,r)},r[0]=function(t,e){t.syncItems.set(e);var i=s.server,n=new Uint32Array(e.buffer)[1];i.sysSyncCount<n&&(i.sysSyncCount=n)},r[1]=function(t,e){var i=(e[3]<<8)+e[2],s=(e[7]<<8)+e[6],n=(e[11]<<24)+(e[10]<<16)+(e[9]<<8)+e[8],r=(e[15]<<24)+(e[14]<<16)+(e[13]<<8)+e[12],a=new Float32Array(e.buffer,16),u=t.buffers[i];u&&u.bind(n,s,r,a)},s.createWorld=function(t){return new a(t)},i.exports={World:a,commands:r}}),n("cc/server/server-worker",function(t,e,i){var s=t("./cc"),n=t("../common/extend"),r=function(){function t(){s.SynthServer.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=1024,this.bufLength=64}return n(t,s.SynthServer),t.prototype.sendToLang=function(t){postMessage(t)},t.prototype.connect=function(){this.sendToLang(["/connected",this.sampleRate,this.channels])},t.prototype.process=function(){if(!(this.sysSyncCount<this.syncCount-4)){for(var t=this.strm,e=this.world,i=this.strmLength,n=this.bufLength,r=this.busOut,a=this.busOutL,u=this.busOutR,o=s.lang,h=0,c=i,p=0,l=i/n;l>p;++p)o.process(),e.process(n),r.set(e.bus),t.set(a,h),t.set(u,c),h+=n,c+=n;this.sendToLang(t),this.syncCount+=1}},t}();s.createWorkerSynthServer=function(){var t=new r;return s.opmode="worker",t},i.exports={}}),n("cc/server/server-nodejs",function(t,e,i){var s=t("./cc"),n=t("../common/extend"),r=function(){function e(){t("../common/audioapi"),s.SynthServer.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=64}return n(e,s.SynthServer),e.prototype.init=function(){this.initialized||(s.SynthServer.prototype.init.call(this),this.api=s.createAudioAPI(this))},e.prototype.connect=function(){this.sendToLang(["/connected",this.sampleRate,this.channels])},e.prototype.play=function(t,e){if(e=0|e,this.world.run(!0,e),this.api){this._strm=new Float32Array(this.strmLength*this.channels),this.strmList=new Array(8),this.strmListReadIndex=0,this.strmListWriteIndex=0;for(var i=this.strmList,s=i.length;s--;)i[s]=new Float32Array(this._strm);this.api.isPlaying||this.api.play()}if(!this.timer.isRunning()){var n=this;setTimeout(function(){n.timer.start(function(){n.process()},10)},50)}},e.prototype.pause=function(t,e){e=0|e,this.world.run(!1,e),this.api&&this.api.isPlaying&&(this.world.isRunning()||this.api.pause()),this.timer.isRunning()&&(this.world.isRunning()||this.timer.stop())},e.prototype.process=function(){if(!(this.sysSyncCount<this.syncCount-4)){for(var t=this.strm,e=this.world,i=this.strmLength,n=this.bufLength,r=this.busOut,a=this.busOutL,u=this.busOutR,o=s.lang,h=0,c=i,p=0,l=i/n;l>p;++p)o.process(),e.process(n),r.set(e.bus),t.set(a,h),t.set(u,c),h+=n,c+=n;this.sendToLang(t),this.syncCount+=1,this.api&&(this.strmList[7&this.strmListWriteIndex]=new Float32Array(t),this.strmListWriteIndex+=1)
}},e.prototype._process=function(){var t=this.strmList[7&this.strmListReadIndex];t&&(this.strmListReadIndex+=1,this._strm.set(t)),this.sysSyncCount+=1},e}();s.NodeJSSynthServer=r,s.createNodeJSSynthServer=function(){var t=new r;return s.opmode="nodejs",t},i.exports={}}),n("cc/server/server-socket",function(e,i,s){var n=e("./cc"),r=e("../common/extend"),a=e("../common/emitter"),u=function(){function t(){this.map={},this.list=[],this.server=null,this.process=e}t.prototype.append=function(t){if(!this.map[t]){var e=n.createWorld(t);this.map[t]=e,this.list.push(e),this.process=1===this.list.length?i:s}return this.map[t]},t.prototype.remove=function(t){var s=this.map[t];s&&(this.list.splice(this.list.indexOf(s),1),delete this.map[t],1===this.list.length?this.process=i:0===this.list.length&&(this.process=e))},t.prototype.run=function(t,e){var i=this.map[e];i&&i.run(t)},t.prototype.reset=function(t){var e=this.map[t];e&&e.reset()},t.prototype.isRunning=function(){return this.list.some(function(t){return t.isRunning()})},t.prototype.pushToTimeline=function(t,e){var i=this.map[e];i&&i.pushToTimeline(t)},t.prototype.doBinayCommand=function(t,e){var i=this.map[e];i&&i.doBinayCommand(t)};var e=function(){n.server.busOut.set(n.server.busClear)},i=function(t){this.list[0].process(t),n.server.busOut.set(this.list[0].bus)},s=function(t){var e,i=this.list,s=n.server.busOut,r=n.server.busOutLen;s.set(n.server.busClear);for(var a=0,u=i.length;u>a;++a){e=i[a],e.process(t);for(var o=e.bus,h=e.busAmp,c=r;c--;)s[c]+=o[c]*h}};return t}(),o=function(){function e(){n.NodeJSSynthServer.call(this),this.sampleRate=44100,this.channels=2,this.strmLength=4096,this.bufLength=64,this.world=new u,this.list=[],this.map={},this.exports=null}var i;return t.require&&(i=t.require("ws").Server),r(e,n.NodeJSSynthServer),e.prototype._init=function(t){var e=this,s=0,r=this.exports;"undefined"!=typeof t.speaker&&(t.speaker&&(this.api=n.createAudioAPI(this)),delete t.speaker),this.socket=new i(t),this.socket.on("connection",function(t){var i=s++;e.list.push(t),e.map[i]=t,e.world.append(i),t.on("message",function(t){t="string"!=typeof t?new Uint8Array(t):JSON.parse(t),e.recvFromLang(t,i)}),t.on("close",function(){e.map[i]&&(e.pause([],i),e.world.remove(i),e.list.splice(e.list.indexOf(t),1),delete e.map[i]),r.emit("close",i)}),t.on("error",function(t){r.emit("error",i,t)}),e.sendToLang(["/connected",e.sampleRate,e.channels],i),r.emit("open",i)}),this.init()},e.prototype.connect=function(){},e.prototype.sendToLang=function(t,e){if(t instanceof Float32Array)this.list.forEach(function(e){1===e.readyState&&e.send(t.buffer,{binary:!0,mask:!1})});else if(t=JSON.stringify(t),void 0===e)this.list.forEach(function(e){1===e.readyState&&e.send(t)});else{var i=this.map[e];i&&1===i.readyState&&i.send(t)}},e.prototype.process=function(){if(!(this.sysSyncCount<this.syncCount-4)){for(var t=this.strm,e=this.world,i=this.strmLength,s=this.bufLength,n=this.busOutL,r=this.busOutR,a=0,u=i,o=0,h=i/s;h>o;++o)e.process(s),t.set(n,a),t.set(r,u),a+=s,u+=s;this.sendToLang(t),this.sendToLang(["/process"]),this.syncCount+=1,this.api&&(this.strmList[this.strmListWriteIndex]=new Float32Array(t),this.strmListWriteIndex=this.strmListWriteIndex+1&7)}},e}(),h=function(){function t(t,i){return e?e:(a.mixin(this),this.server=t,this.server.exports=this,this.server._init(i||{}),void(e=this))}var e=null;return t.prototype.send=function(t,e){return this.server.sendToLang(["/socket/sendToClient",t],e),this},t}();n.createSocketSynthServer=function(){var t=new o;return t.exports={createServer:function(e){return new h(t,e)}},n.opmode="socket",t},s.exports={WorldManager:u}}),n("cc/server/basic_unit",function(t,e,i){var s=t("../cc"),n=t("../common/ops"),r=Math.log(.001),a=function(t,e,i){var s=t.fromUnits[e];if(s)switch(s.calcRate){case 2:return t.inputs[e][i-1];case 3:s.process(i)}return t.inputs[e][0]},u=function(t,e){var i=t.fromUnits[e];i&&3===i.calcRate&&i.process(0)},o={};s.unit.specs.UnaryOpUGen=function(){var t=function(){var t,e=o[n.UNARY_OPS_MAP[this.specialIndex]];if(!e){var i=n.UNARY_OPS_MAP[this.specialIndex]||"unknown";throw new Error("UnaryOpUGen["+i+"] is not defined.")}if(3===this.calcRate)this.process=e.d;else{switch(this.inRates[0]){case 2:t=e.a;break;case 1:t=e.k}this.process=t,this.process?this.process(1):this.outputs[0][0]=e(this.inputs[0][0])}};return t}();var h=function(t){return function(){this.outputs[0][0]=t(this.inputs[0][0])}},c=function(t){return function(e){for(var i=this.outputs[0],s=this.inputs[0],n=0;e>n;n+=8)i[n]=t(s[n]),i[n+1]=t(s[n+1]),i[n+2]=t(s[n+2]),i[n+3]=t(s[n+3]),i[n+4]=t(s[n+4]),i[n+5]=t(s[n+5]),i[n+6]=t(s[n+6]),i[n+7]=t(s[n+7])}},p=function(t){return function(e){if(e){var i=a(this,0,e);this.outputs[0][0]=isNaN(i)?0/0:t(i)}else u(this,0)}};o.neg=function(t){return-t},o.not=function(t){return 0===t?1:0},o.abs=function(t){return Math.abs(t)},o.ceil=function(t){return Math.ceil(t)},o.floor=function(t){return Math.floor(t)},o.frac=function(t){return 0>t?1+(t-(0|t)):t-(0|t)},o.sign=function(t){return 0===t?0:t>0?1:-1},o.squared=function(t){return t*t},o.cubed=function(t){return t*t*t},o.sqrt=function(t){return Math.sqrt(Math.abs(t))},o.exp=function(t){return Math.exp(t)},o.reciprocal=function(t){return 1/t},o.midicps=function(t){return 440*Math.pow(2,1*(t-69)/12)},o.cpsmidi=function(t){return Math.log(1*Math.abs(t)/440)*Math.LOG2E*12+69},o.midiratio=function(t){return Math.pow(2,1*t/12)},o.ratiomidi=function(t){return Math.log(Math.abs(t))*Math.LOG2E*12},o.dbamp=function(t){return Math.pow(10,.05*t)},o.ampdb=function(t){return Math.log(Math.abs(t))*Math.LOG10E*20},o.octcps=function(t){return 440*Math.pow(2,t-4.75)},o.cpsoct=function(t){return Math.log(1*Math.abs(t)/440)*Math.LOG2E+4.75},o.log=function(t){return Math.log(Math.abs(t))},o.log2=function(t){return Math.log(Math.abs(t))*Math.LOG2E},o.log10=function(t){return Math.log(Math.abs(t))*Math.LOG10E},o.sin=function(t){return Math.sin(t)},o.cos=function(t){return Math.cos(t)},o.tan=function(t){return Math.tan(t)},o.asin=function(t){return Math.asin(Math.max(-1,Math.min(t,1)))},o.acos=function(t){return Math.acos(Math.max(-1,Math.min(t,1)))},o.atan=function(t){return Math.atan(t)},o.sinh=function(t){return.5*(Math.pow(Math.E,t)-Math.pow(Math.E,-t))},o.cosh=function(t){return.5*(Math.pow(Math.E,t)+Math.pow(Math.E,-t))},o.tanh=function(t){var e=.5*(Math.pow(Math.E,t)-Math.pow(Math.E,-t)),i=.5*(Math.pow(Math.E,t)+Math.pow(Math.E,-t));return e/i},o.rand=function(t){return Math.random()*t},o.rand2=function(t){return(2*Math.random()-1)*t},o.linrand=function(t){return Math.min(Math.random(),Math.random())*t},o.bilinrand=function(t){return(Math.random()-Math.random())*t},o.sum3rand=function(t){return.666666667*(Math.random()+Math.random()+Math.random()-1.5)*t},o.distort=function(t){return t/(1+Math.abs(t))},o.softclip=function(t){var e=Math.abs(t);return.5>=e?t:(e-.25)/t},o.coin=function(t){return Math.random()<t?1:0},o.num=function(t){return+t},o.tilde=function(t){return~t},o.pi=function(t){return Math.PI*t},o.to_i=function(t){return 0|t},o.half=function(t){return.5*t},o.twice=function(t){return 2*t},Object.keys(o).forEach(function(t){var e=o[t];e.a=c(e),e.k=h(e),e.d=p(e)});var l={};s.unit.specs.BinaryOpUGen=function(){var t=function(){var t,e=l[n.BINARY_OPS_MAP[this.specialIndex]];if(!e){var i=n.BINARY_OPS_MAP[this.specialIndex]||"unknown";throw new Error("BinaryOpUGen["+i+"] is not defined.")}if(3===this.calcRate)this.process=e.dd;else{switch(this.inRates[0]){case 2:switch(this.inRates[1]){case 2:t=e.aa;break;case 1:t=e.ak;break;case 0:t=e.ai}break;case 1:switch(this.inRates[1]){case 2:t=e.ka;break;case 1:t=e.kk;break;case 0:t=e.ki}break;case 0:switch(this.inRates[1]){case 2:t=e.ia;break;case 1:t=e.ik;break;case 0:t=null}}this.process=t,this._a=this.inputs[0][0],this._b=this.inputs[1][0],this.process?this.process(1):this.outputs[0][0]=e(this.inputs[0][0],this.inputs[1][0])}};return t}();var f=function(t){return function(e){for(var i=this.outputs[0],s=this.inputs[0],n=this.inputs[1],r=0;e>r;r+=8)i[r]=t(s[r],n[r]),i[r+1]=t(s[r+1],n[r+1]),i[r+2]=t(s[r+2],n[r+2]),i[r+3]=t(s[r+3],n[r+3]),i[r+4]=t(s[r+4],n[r+4]),i[r+5]=t(s[r+5],n[r+5]),i[r+6]=t(s[r+6],n[r+6]),i[r+7]=t(s[r+7],n[r+7])}},_=function(t){return function(e){for(var i=this.outputs[0],s=this.inputs[0],n=this._b,r=this.inputs[1][0],a=(r-this._b)*this.rate.slopeFactor,u=0;e>u;u+=8)i[u]=t(s[u],n),n+=a,i[u+1]=t(s[u+1],n),n+=a,i[u+2]=t(s[u+2],n),n+=a,i[u+3]=t(s[u+3],n),n+=a,i[u+4]=t(s[u+4],n),n+=a,i[u+5]=t(s[u+5],n),n+=a,i[u+6]=t(s[u+6],n),n+=a,i[u+7]=t(s[u+7],n),n+=a;this._b=r}},d=function(t){return function(e){for(var i=this.outputs[0],s=this.inputs[0],n=this._b,r=0;e>r;r+=8)i[r]=t(s[r],n),i[r+1]=t(s[r+1],n),i[r+2]=t(s[r+2],n),i[r+3]=t(s[r+3],n),i[r+4]=t(s[r+4],n),i[r+5]=t(s[r+5],n),i[r+6]=t(s[r+6],n),i[r+7]=t(s[r+7],n)}},m=function(t){return function(e){for(var i=this.outputs[0],s=this._a,n=this.inputs[1],r=this.inputs[0][0],a=(r-this._a)*this.rate.slopeFactor,u=0;e>u;u+=8)i[u]=t(s,n[u]),s+=a,i[u+1]=t(s,n[u+1]),s+=a,i[u+2]=t(s,n[u+2]),s+=a,i[u+3]=t(s,n[u+3]),s+=a,i[u+4]=t(s,n[u+4]),s+=a,i[u+5]=t(s,n[u+5]),s+=a,i[u+6]=t(s,n[u+6]),s+=a,i[u+7]=t(s,n[u+7]),s+=a;this._a=r}},y=function(t){return function(){this.outputs[0][0]=t(this.inputs[0][0],this.inputs[1][0])}},g=function(t){return function(){this.outputs[0][0]=t(this.inputs[0][0],this._b)}},v=function(t){return function(e){for(var i=this.outputs[0],s=this._a,n=this.inputs[1],r=0;e>r;r+=8)i[r]=t(s,n[r]),i[r+1]=t(s,n[r+1]),i[r+2]=t(s,n[r+2]),i[r+3]=t(s,n[r+3]),i[r+4]=t(s,n[r+4]),i[r+5]=t(s,n[r+5]),i[r+6]=t(s,n[r+6]),i[r+7]=t(s,n[r+7])}},b=function(t){return function(){this.outputs[0][0]=t(this._a,this.inputs[1][0])}},w=function(t){return function(e){if(e){var i=a(this,0,e),s=a(this,1,e);this.outputs[0][0]=isNaN(i)||isNaN(s)?0/0:t(i,s)}else u(this,0),u(this,1)}};l["+"]=function(t,e){return t+e},l["+"].aa=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=0;t>n;n+=8)e[n]=i[n]+s[n],e[n+1]=i[n+1]+s[n+1],e[n+2]=i[n+2]+s[n+2],e[n+3]=i[n+3]+s[n+3],e[n+4]=i[n+4]+s[n+4],e[n+5]=i[n+5]+s[n+5],e[n+6]=i[n+6]+s[n+6],e[n+7]=i[n+7]+s[n+7]},l["+"].ak=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._b,n=this.inputs[1][0],r=(n-this._b)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i[a]+s,s+=r,e[a+1]=i[a+1]+s,s+=r,e[a+2]=i[a+2]+s,s+=r,e[a+3]=i[a+3]+s,s+=r,e[a+4]=i[a+4]+s,s+=r,e[a+5]=i[a+5]+s,s+=r,e[a+6]=i[a+6]+s,s+=r,e[a+7]=i[a+7]+s,s+=r;this._b=n},l["+"].ai=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._b,n=0;t>n;n+=8)e[n]=i[n]+s,e[n+1]=i[n+1]+s,e[n+2]=i[n+2]+s,e[n+3]=i[n+3]+s,e[n+4]=i[n+4]+s,e[n+5]=i[n+5]+s,e[n+6]=i[n+6]+s,e[n+7]=i[n+7]+s},l["+"].ka=function(t){for(var e=this.outputs[0],i=this._a,s=this.inputs[1],n=this.inputs[0][0],r=(n-this._a)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i+s[a],i+=r,e[a+1]=i+s[a+1],i+=r,e[a+2]=i+s[a+2],i+=r,e[a+3]=i+s[a+3],i+=r,e[a+4]=i+s[a+4],i+=r,e[a+5]=i+s[a+5],i+=r,e[a+6]=i+s[a+6],i+=r,e[a+7]=i+s[a+7],i+=r;this._a=n},l["+"].kk=function(){this.outputs[0][0]=this.inputs[0][0]+this.inputs[1][0]},l["+"].ki=function(){this.outputs[0][0]=this.inputs[0][0]+this._b},l["+"].ia=function(t){for(var e=this.outputs[0],i=this._a,s=this.inputs[1],n=0;t>n;n+=8)e[n]=i+s[n],e[n+1]=i+s[n+1],e[n+2]=i+s[n+2],e[n+3]=i+s[n+3],e[n+4]=i+s[n+4],e[n+5]=i+s[n+5],e[n+6]=i+s[n+6],e[n+7]=i+s[n+7]},l["+"].ik=function(){this.outputs[0][0]=this._a+this.inputs[1][0]},l["-"]=function(t,e){return t-e},l["-"].aa=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=0;t>n;n+=8)e[n]=i[n]-s[n],e[n+1]=i[n+1]-s[n+1],e[n+2]=i[n+2]-s[n+2],e[n+3]=i[n+3]-s[n+3],e[n+4]=i[n+4]-s[n+4],e[n+5]=i[n+5]-s[n+5],e[n+6]=i[n+6]-s[n+6],e[n+7]=i[n+7]-s[n+7]},l["-"].ak=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._b,n=this.inputs[1][0],r=(n-this._b)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i[a]-s,s+=r,e[a+1]=i[a+1]-s,s+=r,e[a+2]=i[a+2]-s,s+=r,e[a+3]=i[a+3]-s,s+=r,e[a+4]=i[a+4]-s,s+=r,e[a+5]=i[a+5]-s,s+=r,e[a+6]=i[a+6]-s,s+=r,e[a+7]=i[a+7]-s,s+=r;this._b=n},l["-"].ai=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._b,n=0;t>n;n+=8)e[n]=i[n]-s,e[n+1]=i[n+1]-s,e[n+2]=i[n+2]-s,e[n+3]=i[n+3]-s,e[n+4]=i[n+4]-s,e[n+5]=i[n+5]-s,e[n+6]=i[n+6]-s,e[n+7]=i[n+7]-s},l["-"].ka=function(t){for(var e=this.outputs[0],i=this._a,s=this.inputs[1],n=this.inputs[0][0],r=(n-this._a)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i-s[a],i+=r,e[a+1]=i-s[a+1],i+=r,e[a+2]=i-s[a+2],i+=r,e[a+3]=i-s[a+3],i+=r,e[a+4]=i-s[a+4],i+=r,e[a+5]=i-s[a+5],i+=r,e[a+6]=i-s[a+6],i+=r,e[a+7]=i-s[a+7],i+=r;this._a=n},l["-"].kk=function(){this.outputs[0][0]=this.inputs[0][0]-this.inputs[1][0]},l["-"].ki=function(){this.outputs[0][0]=this.inputs[0][0]-this._b},l["-"].ia=function(t){for(var e=this.outputs[0],i=this._a,s=this.inputs[1],n=0;t>n;n+=8)e[n]=i-s[n],e[n+1]=i-s[n+1],e[n+2]=i-s[n+2],e[n+3]=i-s[n+3],e[n+4]=i-s[n+4],e[n+5]=i-s[n+5],e[n+6]=i-s[n+6],e[n+7]=i-s[n+7]},l["-"].ik=function(){this.outputs[0][0]=this._a-this.inputs[1][0]},l["*"]=function(t,e){return t*e},l["*"].aa=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=0;t>n;n+=8)e[n]=i[n]*s[n],e[n+1]=i[n+1]*s[n+1],e[n+2]=i[n+2]*s[n+2],e[n+3]=i[n+3]*s[n+3],e[n+4]=i[n+4]*s[n+4],e[n+5]=i[n+5]*s[n+5],e[n+6]=i[n+6]*s[n+6],e[n+7]=i[n+7]*s[n+7]},l["*"].ak=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._b,n=this.inputs[1][0],r=(n-this._b)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i[a]*s,s+=r,e[a+1]=i[a+1]*s,s+=r,e[a+2]=i[a+2]*s,s+=r,e[a+3]=i[a+3]*s,s+=r,e[a+4]=i[a+4]*s,s+=r,e[a+5]=i[a+5]*s,s+=r,e[a+6]=i[a+6]*s,s+=r,e[a+7]=i[a+7]*s,s+=r;this._b=n},l["*"].ai=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._b,n=0;t>n;n+=8)e[n]=i[n]*s,e[n+1]=i[n+1]*s,e[n+2]=i[n+2]*s,e[n+3]=i[n+3]*s,e[n+4]=i[n+4]*s,e[n+5]=i[n+5]*s,e[n+6]=i[n+6]*s,e[n+7]=i[n+7]*s},l["*"].ka=function(t){for(var e=this.outputs[0],i=this._a,s=this.inputs[1],n=this.inputs[0][0],r=(n-this._a)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i*s[a],i+=r,e[a+1]=i*s[a+1],i+=r,e[a+2]=i*s[a+2],i+=r,e[a+3]=i*s[a+3],i+=r,e[a+4]=i*s[a+4],i+=r,e[a+5]=i*s[a+5],i+=r,e[a+6]=i*s[a+6],i+=r,e[a+7]=i*s[a+7],i+=r;this._a=n},l["*"].kk=function(){this.outputs[0][0]=this.inputs[0][0]*this.inputs[1][0]},l["*"].ki=function(){this.outputs[0][0]=this.inputs[0][0]*this._b},l["*"].ia=function(t){for(var e=this.outputs[0],i=this._a,s=this.inputs[1],n=0;t>n;n+=8)e[n]=i*s[n],e[n+1]=i*s[n+1],e[n+2]=i*s[n+2],e[n+3]=i*s[n+3],e[n+4]=i*s[n+4],e[n+5]=i*s[n+5],e[n+6]=i*s[n+6],e[n+7]=i*s[n+7]},l["*"].ik=function(){this.outputs[0][0]=this._a*this.inputs[1][0]},l["/"]=function(t,e){return 0===e?0:t/e},l["%"]=function(t,e){return 0===e?0:t%e},l.eq=function(t,e){return t===e?1:0},l.ne=function(t,e){return t!==e?1:0},l.lt=function(t,e){return e>t?1:0},l.gt=function(t,e){return t>e?1:0},l.le=function(t,e){return e>=t?1:0},l.ge=function(t,e){return t>=e?1:0},l.bitAnd=function(t,e){return t&e},l.bitOr=function(t,e){return t|e},l.bitXor=function(t,e){return t^e},l.min=function(t,e){return Math.min(t,e)},l.max=function(t,e){return Math.max(t,e)};var k=function(t,e,i){for(t=0|t,e=0|e;0!==e;)i=t%e,t=e,e=i;return Math.abs(t)};l.lcm=function(t,e){return 0===t&&0===e?0:Math.abs(t*e)/k(t,e)},l.gcd=function(t,e){return k(t,e)},l.round=function(t,e){return 0===e?t:Math.round(t/e)*e},l.roundUp=function(t,e){return 0===e?t:Math.ceil(t/e)*e},l.roundDown=function(t,e){return 0===e?t:Math.floor(t/e)*e},l.trunc=function(t,e){return 0===e?t:Math.floor(t/e)*e},l.atan2=function(t,e){return Math.atan2(t,e)},l.hypot=function(t,e){return Math.sqrt(t*t+e*e)},l.hypotApx=function(t,e){var i=Math.abs(t),s=Math.abs(e),n=Math.min(i,s);return i+s-(Math.sqrt(2)-1)*n},l.pow=function(t,e){return Math.pow(Math.abs(t),e)},l.leftShift=function(t,e){return 0>e?(0|t)>>(0|-e):(0|t)<<(0|e)},l.rightShift=function(t,e){return 0>e?(0|t)<<(0|-e):(0|t)>>(0|e)},l.unsignedRightShift=function(t,e){return 0>e?(0|t)<<(0|-e):(0|t)>>(0|e)},l.ring1=function(t,e){return t*e+t},l.ring2=function(t,e){return t*e+t+e},l.ring3=function(t,e){return t*t*e},l.ring4=function(t,e){return t*t*e-t*e*e},l.difsqr=function(t,e){return t*t-e*e},l.sumsqr=function(t,e){return t*t+e*e},l.sqrsum=function(t,e){return(t+e)*(t+e)},l.sqrdif=function(t,e){return(t-e)*(t-e)},l.absdif=function(t,e){return Math.abs(t-e)},l.thresh=function(t,e){return e>t?0:t},l.amclip=function(t,e){return.5*t*(e+Math.abs(e))},l.scaleneg=function(t,e){return e=.5*e+.5,(Math.abs(t)-t)*e+t},l.clip2=function(t,e){return Math.max(-e,Math.min(t,e))},l.excess=function(t,e){return t-Math.max(-e,Math.min(t,e))},l.fold2=function(t,e){var i,s,n;if(0===e)return 0;if(s=e+e,t>=e){if(t=s-t,t>=-e)return t}else{if(!(-e>t))return t;if(t=-s-t,e>t)return t}return n=s+s,i=t+e,i-=n*Math.floor(i/n),i>=s?n-i-e:i-e},l.wrap2=function(t,e){if(0===e)return 0;var i=2*e;if(t>=e){if(t-=i,e>t)return t}else{if(!(-e>t))return t;if(t+=i,t>=-e)return t}return t-i*Math.floor((t+e)/i)},Object.keys(l).forEach(function(t){var e=l[t];e.aa||(e.aa=f(e)),e.ak||(e.ak=_(e)),e.ai||(e.ai=d(e)),e.ka||(e.ka=m(e)),e.kk||(e.kk=y(e)),e.ki||(e.ki=g(e)),e.ia||(e.ia=v(e)),e.ik||(e.ik=b(e)),e.dd=w(e)}),s.unit.specs.Control=function(){var t=function(){this.process=1===this.numOutputs?e:i,this.process(1)},e=function(){this.outputs[0][0]=this.parent.controls[this.specialIndex]},i=function(){for(var t=this.parent.controls,e=this.outputs,i=e.length,s=0,n=this.specialIndex;i>s;++s,++n)e[s][0]=t[n]};return t}(),s.unit.specs.LagControl=function(){var t=function(){this.process=1===this.numOutputs?e:i;for(var t,s=this.numOutputs,n=this._y1=new Float32Array(s),a=this._b1=new Float32Array(s),u=this.parent.controls,o=this.inputs,h=this.rate.sampleRate,c=0;s>c;++c)n[c]=u[c],t=o[c][0],a[c]=0===t?0:Math.exp(r/(t*h));this.process(1)},e=function(){var t=this._y1,e=this._b1,i=this.parent.controls[this.specialIndex],s=i+e[0]*(t[0]-i);this.outputs[0][0]=t[0]=s},i=function(){var t,e,i,s,n=this.parent.controls,r=this.outputs,a=this.outputs.length,u=this._y1,o=this._b1;for(i=0,s=this.specialIndex;a>i;++i,++s)t=n[s],e=t+o[i]*(u[i]-t),r[i][0]=u[i]=e};return t}(),s.unit.specs.TrigControl=function(){var t=function(){this.process=1===this.numOutputs?e:i,this.process(1)},e=function(){var t=this.parent.controls,e=this.specialIndex;this.outputs[0][0]=t[e],t[e]=0},i=function(){for(var t=this.parent.controls,e=this.outputs,i=e.length,s=0,n=this.specialIndex;i>s;++s,++n)e[s][0]=t[n],t[n]=0};return t}(),s.unit.specs.Out=function(){var t=function(){2===this.calcRate?(this.process=e,this._busOffset=0):(this.process=i,this._busOffset=16*this.bufLength)},e=function(t){for(var e,i,s=this.inputs,n=this.world.bus,r=this.bufLength,a=(0|s[0][0])-1,u=1,o=s.length;o>u;++u){e=(a+u)*r,i=s[u];for(var h=0;t>h;h++)n[e+h]+=i[h]}},i=function(){for(var t=this.inputs,e=this.world.bus,i=this._busOffset+(0|t[0][0])-1,s=1,n=t.length;n>s;++s)e[i+s]+=t[s][0]};return t}(),s.unit.specs.ReplaceOut=function(){var t=function(){2===this.calcRate?(this.process=e,this._busOffset=0):(this.process=i,this._busOffset=16*this.bufLength)},e=function(t){for(var e,i,s=this.inputs,n=this.world.bus,r=this.bufLength,a=(0|s[0][0])-1,u=1,o=s.length;o>u;++u){e=(a+u)*r,i=s[u];for(var h=0;t>h;h++)n[e+h]=i[h]}},i=function(){for(var t=this.inputs,e=this.world.bus,i=this._busOffset+(0|t[0][0])-1,s=1,n=t.length;n>s;++s)e[i+s]=t[s][0]};return t}(),s.unit.specs.MulAdd=function(){var t=function(){if(3===this.calcRate)this.process=e[3];else{var t=this.inRates;this.process=e[t[0]][t[1]][t[2]],this._in=this.inputs[0][0],this._mul=this.inputs[1][0],this._add=this.inputs[2][0],this.process?this.process(1):this.outputs[0][0]=this._in*this._mul+this._add}},e={};return e[2]={},e[2][2]={},e[2][1]={},e[2][0]={},e[1]={},e[1][2]={},e[1][1]={},e[1][0]={},e[0]={},e[0][2]={},e[0][1]={},e[0][0]={},e[2][2][2]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=0;t>r;r+=8)e[r]=i[r]*s[r]+n[r],e[r+1]=i[r+1]*s[r+1]+n[r+1],e[r+2]=i[r+2]*s[r+2]+n[r+2],e[r+3]=i[r+3]*s[r+3]+n[r+3],e[r+4]=i[r+4]*s[r+4]+n[r+4],e[r+5]=i[r+5]*s[r+5]+n[r+5],e[r+6]=i[r+6]*s[r+6]+n[r+6],e[r+7]=i[r+7]*s[r+7]+n[r+7]},e[2][2][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this._add,r=this.inputs[2][0],a=(r-n)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i[u]*s[u]+n,n+=a,e[u+1]=i[u+1]*s[u+1]+n,n+=a,e[u+2]=i[u+2]*s[u+2]+n,n+=a,e[u+3]=i[u+3]*s[u+3]+n,n+=a,e[u+4]=i[u+4]*s[u+4]+n,n+=a,e[u+5]=i[u+5]*s[u+5]+n,n+=a,e[u+6]=i[u+6]*s[u+6]+n,n+=a,e[u+7]=i[u+7]*s[u+7]+n,n+=a;this._add=r},e[2][2][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this._add,r=0;t>r;r+=8)e[r]=i[r]*s[r]+n,e[r+1]=i[r+1]*s[r+1]+n,e[r+2]=i[r+2]*s[r+2]+n,e[r+3]=i[r+3]*s[r+3]+n,e[r+4]=i[r+4]*s[r+4]+n,e[r+5]=i[r+5]*s[r+5]+n,e[r+6]=i[r+6]*s[r+6]+n,e[r+7]=i[r+7]*s[r+7]+n},e[2][1][2]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._mul,n=this.inputs[2],r=this.inputs[1][0],a=(r-s)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i[u]*s+n[u],s+=a,e[u+1]=i[u+1]*s+n[u+1],s+=a,e[u+2]=i[u+2]*s+n[u+2],s+=a,e[u+3]=i[u+3]*s+n[u+3],s+=a,e[u+4]=i[u+4]*s+n[u+4],s+=a,e[u+5]=i[u+5]*s+n[u+5],s+=a,e[u+6]=i[u+6]*s+n[u+6],s+=a,e[u+7]=i[u+7]*s+n[u+7],s+=a;this._mul=r},e[2][1][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._mul,n=this._add,r=this.inputs[1][0],a=(r-s)*this.rate.slopeFactor,u=this.inputs[2][0],o=(u-n)*this.rate.slopeFactor,h=0;t>h;h+=8)e[h]=i[h]*s+n,s+=a,n+=o,e[h+1]=i[h+1]*s+n,s+=a,n+=o,e[h+2]=i[h+2]*s+n,s+=a,n+=o,e[h+3]=i[h+3]*s+n,s+=a,n+=o,e[h+4]=i[h+4]*s+n,s+=a,n+=o,e[h+5]=i[h+5]*s+n,s+=a,n+=o,e[h+6]=i[h+6]*s+n,s+=a,n+=o,e[h+7]=i[h+7]*s+n,s+=a,n+=o;this._mul=r,this._add=u},e[2][1][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._mul,n=this._add,r=this.inputs[1][0],a=(r-s)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i[u]*s+n,s+=a,e[u+1]=i[u+1]*s+n,s+=a,e[u+2]=i[u+2]*s+n,s+=a,e[u+3]=i[u+3]*s+n,s+=a,e[u+4]=i[u+4]*s+n,s+=a,e[u+5]=i[u+5]*s+n,s+=a,e[u+6]=i[u+6]*s+n,s+=a,e[u+7]=i[u+7]*s+n,s+=a;this._mul=r},e[2][0][2]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._mul,n=this.inputs[2],r=0;t>r;r+=8)e[r]=i[r]*s+n[r],e[r+1]=i[r+1]*s+n[r+1],e[r+2]=i[r+2]*s+n[r+2],e[r+3]=i[r+3]*s+n[r+3],e[r+4]=i[r+4]*s+n[r+4],e[r+5]=i[r+5]*s+n[r+5],e[r+6]=i[r+6]*s+n[r+6],e[r+7]=i[r+7]*s+n[r+7]},e[2][0][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._mul,n=this._add,r=this.inputs[2][0],a=(r-n)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i[u]*s+n,n+=a,e[u+1]=i[u+1]*s+n,n+=a,e[u+2]=i[u+2]*s+n,n+=a,e[u+3]=i[u+3]*s+n,n+=a,e[u+4]=i[u+4]*s+n,n+=a,e[u+5]=i[u+5]*s+n,n+=a,e[u+6]=i[u+6]*s+n,n+=a,e[u+7]=i[u+7]*s+n,n+=a;this._add=r},e[2][0][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._mul,n=this._add,r=this.inputs[1][0],a=(r-s)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i[u]*s+n,s+=a,e[u+1]=i[u+1]*s+n,s+=a,e[u+2]=i[u+2]*s+n,s+=a,e[u+3]=i[u+3]*s+n,s+=a,e[u+4]=i[u+4]*s+n,s+=a,e[u+5]=i[u+5]*s+n,s+=a,e[u+6]=i[u+6]*s+n,s+=a,e[u+7]=i[u+7]*s+n,s+=a;this._mul=r},e[1][1][2]=function(t){for(var e=this.outputs[0],i=this._in,s=this._mul,n=this.inputs[2],r=this.inputs[0][0],a=(r-i)*this.rate.slopeFactor,u=this.inputs[1][0],o=(u-s)*this.rate.slopeFactor,h=0;t>h;h+=8)e[h]=i*s+n[h],i+=a,s+=o,e[h+1]=i*s+n[h+1],i+=a,s+=o,e[h+2]=i*s+n[h+2],i+=a,s+=o,e[h+3]=i*s+n[h+3],i+=a,s+=o,e[h+4]=i*s+n[h+4],i+=a,s+=o,e[h+5]=i*s+n[h+5],i+=a,s+=o,e[h+6]=i*s+n[h+6],i+=a,s+=o,e[h+7]=i*s+n[h+7],i+=a,s+=o;this._in=r,this._mul=u},e[1][1][1]=function(){this.outputs[0][0]=this.inputs[0][0]*this.inputs[1][0]+this.inputs[2][0]},e[1][1][0]=function(){this.outputs[0][0]=this.inputs[0][0]*this.inputs[1][0]+this._add},e[1][0][2]=function(t){for(var e=this.outputs[0],i=this._in,s=this._mul,n=this.inputs[2],r=this.inputs[0][0],a=(r-i)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i*s+n[u],i+=a,e[u+1]=i*s+n[u+1],i+=a,e[u+2]=i*s+n[u+2],i+=a,e[u+3]=i*s+n[u+3],i+=a,e[u+4]=i*s+n[u+4],i+=a,e[u+5]=i*s+n[u+5],i+=a,e[u+6]=i*s+n[u+6],i+=a,e[u+7]=i*s+n[u+7],i+=a;this._in=r},e[1][0][1]=function(){this.outputs[0][0]=this.inputs[0][0]*this._mul+this.inputs[2][0]},e[1][0][0]=function(){this.outputs[0][0]=this.inputs[0][0]*this._mul+this._add},e[3]=function(t){if(t){var e=a(this,0,t),i=a(this,1,t),s=a(this,2,t);this.outputs[0][0]=isNaN(e)||isNaN(i)||isNaN(s)?0/0:e*i+s}else u(this,0),u(this,1),u(this,2)},t}(),s.unit.specs.Sum3=function(){var t=function(){if(3===this.calcRate)this.process=e[3];else{var t=this.inRates;this.process=e[t[0]][t[1]][t[2]],this._in0=this.inputs[0][0],this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this.process?this.process(1):this.outputs[0][0]=this._in0+this._in1+this._in2}},e={};return e[2]={},e[2][2]={},e[2][1]={},e[2][0]={},e[1]={},e[1][1]={},e[1][0]={},e[0]={},e[0][0]={},e[2][2][2]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=0;t>r;r+=8)e[r]=i[r]+s[r]+n[r],e[r+1]=i[r+1]+s[r+1]+n[r+1],e[r+2]=i[r+2]+s[r+2]+n[r+2],e[r+3]=i[r+3]+s[r+3]+n[r+3],e[r+4]=i[r+4]+s[r+4]+n[r+4],e[r+5]=i[r+5]+s[r+5]+n[r+5],e[r+6]=i[r+6]+s[r+6]+n[r+6],e[r+7]=i[r+7]+s[r+7]+n[r+7]},e[2][2][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this._in2,r=this.inputs[2][0],a=(r-n)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i[u]+s[u]+n,n+=a,e[u+1]=i[u+1]+s[u+1]+n,n+=a,e[u+2]=i[u+2]+s[u+2]+n,n+=a,e[u+3]=i[u+3]+s[u+3]+n,n+=a,e[u+4]=i[u+4]+s[u+4]+n,n+=a,e[u+5]=i[u+5]+s[u+5]+n,n+=a,e[u+6]=i[u+6]+s[u+6]+n,n+=a,e[u+7]=i[u+7]+s[u+7]+n,n+=a;this._in2=r},e[2][2][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this._in2,r=0;t>r;r+=8)e[r]=i[r]+s[r]+n,e[r+1]=i[r+1]+s[r+1]+n,e[r+2]=i[r+2]+s[r+2]+n,e[r+3]=i[r+3]+s[r+3]+n,e[r+4]=i[r+4]+s[r+4]+n,e[r+5]=i[r+5]+s[r+5]+n,e[r+6]=i[r+6]+s[r+6]+n,e[r+7]=i[r+7]+s[r+7]+n},e[2][1][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._in1+this._in2,n=this.inputs[1][0]+this.inputs[2][0],r=(n-s)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i[a]+s,s+=r,e[a+1]=i[a+1]+s,s+=r,e[a+2]=i[a+2]+s,s+=r,e[a+3]=i[a+3]+s,s+=r,e[a+4]=i[a+4]+s,s+=r,e[a+5]=i[a+5]+s,s+=r,e[a+6]=i[a+6]+s,s+=r,e[a+7]=i[a+7]+s,s+=r;this._in1=this.inputs[1][0],this._in2=this.inputs[2][0]},e[2][1][0]=e[2][1][1],e[2][0][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._in1+this._in2,n=0;t>n;n+=8)e[n]=i[n]+s,e[n+1]=i[n+1]+s,e[n+2]=i[n+2]+s,e[n+3]=i[n+3]+s,e[n+4]=i[n+4]+s,e[n+5]=i[n+5]+s,e[n+6]=i[n+6]+s,e[n+7]=i[n+7]+s},e[1][1][1]=function(){this.outputs[0][0]=this.inputs[0][0]+this.inputs[1][0]+this.inputs[2][0]},e[1][1][0]=e[1][1][1],e[1][0][0]=e[1][1][1],e[3]=function(t){if(t){var e=a(this,0,t),i=a(this,1,t),s=a(this,2,t);this.outputs[0][0]=isNaN(e)||isNaN(i)||isNaN(s)?0/0:e+i+s}else u(this,0),u(this,1),u(this,2)},t}(),s.unit.specs.Sum4=function(){var t=function(){if(3===this.calcRate)this.process=e[3];else{var t=this.inRates;this.process=e[t[0]][t[1]][t[2]][t[3]],this._in0=this.inputs[0][0],this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this._in3=this.inputs[3][0],this.process?this.process(1):this.outputs[0][0]=this._in0+this._in1+this._in2+this._in3}},e={};return e[2]={},e[2][2]={},e[2][2][2]={},e[2][2][1]={},e[2][2][0]={},e[2][1]={},e[2][1][1]={},e[2][1][0]={},e[2][0]={},e[2][0][0]={},e[1]={},e[1][1]={},e[1][1][1]={},e[1][1][0]={},e[1][0]={},e[1][0][0]={},e[0]={},e[0][0]={},e[0][0][0]={},e[2][2][2][2]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=this.inputs[3],a=0;t>a;a+=8)e[a]=i[a]+s[a]+n[a]+r[a],e[a+1]=i[a+1]+s[a+1]+n[a+1]+r[a+1],e[a+2]=i[a+2]+s[a+2]+n[a+2]+r[a+2],e[a+3]=i[a+3]+s[a+3]+n[a+3]+r[a+3],e[a+4]=i[a+4]+s[a+4]+n[a+4]+r[a+4],e[a+5]=i[a+5]+s[a+5]+n[a+5]+r[a+5],e[a+6]=i[a+6]+s[a+6]+n[a+6]+r[a+6],e[a+7]=i[a+7]+s[a+7]+n[a+7]+r[a+7]},e[2][2][2][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=this._in3,a=this.inputs[3][0],u=(a-r)*this.rate.slopeFactor,o=0;t>o;o+=8)e[o]=i[o]+s[o]+n[o]+r,r+=u,e[o+1]=i[o+1]+s[o+1]+n[o+1]+r,r+=u,e[o+2]=i[o+2]+s[o+2]+n[o+2]+r,r+=u,e[o+3]=i[o+3]+s[o+3]+n[o+3]+r,r+=u,e[o+4]=i[o+4]+s[o+4]+n[o+4]+r,r+=u,e[o+5]=i[o+5]+s[o+5]+n[o+5]+r,r+=u,e[o+6]=i[o+6]+s[o+6]+n[o+6]+r,r+=u,e[o+7]=i[o+7]+s[o+7]+n[o+7]+r,r+=u;this._in3=a},e[2][2][2][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this.inputs[2],r=this._in3,a=0;t>a;a+=8)e[a]=i[a]+s[a]+n[a]+r,e[a+1]=i[a+1]+s[a+1]+n[a+1]+r,e[a+2]=i[a+2]+s[a+2]+n[a+2]+r,e[a+3]=i[a+3]+s[a+3]+n[a+3]+r,e[a+4]=i[a+4]+s[a+4]+n[a+4]+r,e[a+5]=i[a+5]+s[a+5]+n[a+5]+r,e[a+6]=i[a+6]+s[a+6]+n[a+6]+r,e[a+7]=i[a+7]+s[a+7]+n[a+7]+r},e[2][2][1][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this._in2+this._in3,r=this.inputs[2][0]+this.inputs[3][0],a=(r-n)*this.rate.slopeFactor,u=0;t>u;u+=8)e[u]=i[u]+s[u]+n,n+=a,e[u+1]=i[u+1]+s[u+1]+n,n+=a,e[u+2]=i[u+2]+s[u+2]+n,n+=a,e[u+3]=i[u+3]+s[u+3]+n,n+=a,e[u+4]=i[u+4]+s[u+4]+n,n+=a,e[u+5]=i[u+5]+s[u+5]+n,n+=a,e[u+6]=i[u+6]+s[u+6]+n,n+=a,e[u+7]=i[u+7]+s[u+7]+n,n+=a;this._in2=this.inputs[2][0],this._in3=this.inputs[2][0]},e[2][2][1][0]=e[2][2][1][1],e[2][2][0][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this.inputs[1],n=this._in2+this._in3,r=0;t>r;r+=8)e[r]=i[r]+s[r]+n,e[r+1]=i[r+1]+s[r+1]+n,e[r+2]=i[r+2]+s[r+2]+n,e[r+3]=i[r+3]+s[r+3]+n,e[r+4]=i[r+4]+s[r+4]+n,e[r+5]=i[r+5]+s[r+5]+n,e[r+6]=i[r+6]+s[r+6]+n,e[r+7]=i[r+7]+s[r+7]+n},e[2][1][1][1]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._in1+this._in2+this._in3,n=this.inputs[1][0]+this.inputs[2][0]+this.inputs[3][0],r=(n-s)*this.rate.slopeFactor,a=0;t>a;a+=8)e[a]=i[a]+s,s+=r,e[a+1]=i[a+1]+s,s+=r,e[a+2]=i[a+2]+s,s+=r,e[a+3]=i[a+3]+s,s+=r,e[a+4]=i[a+4]+s,s+=r,e[a+5]=i[a+5]+s,s+=r,e[a+6]=i[a+6]+s,s+=r,e[a+7]=i[a+7]+s,s+=r;this._in1=this.inputs[1][0],this._in2=this.inputs[2][0],this._in3=this.inputs[3][0]},e[2][1][1][0]=e[2][1][1][1],e[2][1][0][0]=e[2][1][1][1],e[2][0][0][0]=function(t){for(var e=this.outputs[0],i=this.inputs[0],s=this._in1+this._in2+this._in3,n=0;t>n;n+=8)e[n]=i[n]+s,e[n+1]=i[n+1]+s,e[n+2]=i[n+2]+s,e[n+3]=i[n+3]+s,e[n+4]=i[n+4]+s,e[n+5]=i[n+5]+s,e[n+6]=i[n+6]+s,e[n+7]=i[n+7]+s},e[1][1][1][1]=function(){this.outputs[0][0]=this.inputs[0][0]+this.inputs[1][0]+this.inputs[2][0]+this.inputs[3][0]},e[1][1][1][0]=e[1][1][1][1],e[1][1][0][0]=e[1][1][1][1],e[1][0][0][0]=e[1][1][1][1],e[3]=function(t){if(t){var e=a(this,0,t),i=a(this,1,t),s=a(this,2,t),n=a(this,3,t);this.outputs[0][0]=isNaN(e)||isNaN(i)||isNaN(s)||isNaN(n)?0/0:e+i+s+n}else u(this,0),u(this,1),u(this,2),u(this,3)},t}(),i.exports={uopFunc:o,unary_a:c,unary_k:h,unary_d:p,bopFunc:l,binary_aa:f,binary_ak:_,binary_ai:d,binary_ka:m,binary_kk:y,binary_ki:g,binary_ia:v,binary_ik:b,binary_dd:w}});var r=i("cc/cc","cc/loader");"undefined"!=typeof module&&(module.exports=r)}(this.self||global);